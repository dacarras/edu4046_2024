[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Interacción entre variables",
    "section": "",
    "text": "#------------------------------------------------\n# power analysis function\n#------------------------------------------------\n\nget_power &lt;- function(n_size, d){\nlibrary(dplyr)\npower &lt;- pwr::pwr.t.test(n=n_size,d=d,sig.level=.05,alternative=\"two.sided\") %&gt;%\n         purrr::pluck('power')\n\ntable &lt;- data.frame(n = n_size, power = power, d = d)\n\nreturn(table)\n}\n\n\n#------------------------------------------------\n# generate data\n#------------------------------------------------\n\ntable_n &lt;- dplyr::bind_rows(\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .1), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .2), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .3), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .4), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .5), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .6), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .7), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .8), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .9), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = 1.00), .id = 'index')\n)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n#------------------------------------------------\n# display plot\n#------------------------------------------------\n\nlibrary(ggplot2)\nggplot(table_n, aes(d, power, group=n, colour=n)) + \ngeom_line() +\ngeom_hline(yintercept = .80, lintype = 'dashed', color = 'red') +\ntheme_minimal() +\ntheme(\nlegend.position = 'right',\n# legend.title = element_blank(),\ntext = element_text(size = 12, family = 'Avenir'),\npanel.background = element_blank(),\npanel.grid.minor.y = element_blank(),\npanel.grid.major.y = element_blank(),\npanel.grid.minor.x = element_blank(),\npanel.grid.major.x = element_blank(),\naxis.text.x =  element_text(colour = \"grey30\", size = 10),\naxis.text.y =  element_text(colour = \"grey30\", size = 10),\naxis.line = element_line(colour = \"black\")\n) +\nxlab('effect size') +\nylab('satistical power')\n\nWarning in geom_hline(yintercept = 0.8, lintype = \"dashed\", color = \"red\"):\nIgnoring unknown parameters: `lintype`"
  },
  {
    "objectID": "index.html#a-second-subtitle",
    "href": "index.html#a-second-subtitle",
    "title": "Interacción entre variables",
    "section": "A second subtitle",
    "text": "A second subtitle\nAnd A third subtitle"
  },
  {
    "objectID": "edu4046_mod.html",
    "href": "edu4046_mod.html",
    "title": "Interacción entre variables",
    "section": "",
    "text": "Cuando estudiamos las relaciones de covariables con respecto a una variable de respuesta existe un escenario particular, donde las relaciones pueden no ser constantes. Es decir, que la relación de una covariable con respecto a la variable de respuesta, puede aumentar, o disminuir con respecto a los valores de una tercera variable.\nEn la investigación educación existen diversas aplicaciones donde este escenario es de interés:\n\n\npodemos estar interesados en buscar factores protectores para la brecha socioeconómica de los resultados académicos de los estudiantes.\n\n\npodemos estar evaluando el efecto de un programa de intervención, y tener dudas razonables respecto a si el programa es efectivo para todos los estudiantes.\n\n\npodemos estar estudiando cómo funciona una práctica escolar, y podríamos querer saber si opera de forma compensatoria con respecto a los estudiantes más vulnerables.\n\n\npodemos estar estudiando cómo funciona una práctica escolar, y podríamos querer evaluar si la práctica es igual de beneficiosa para estudiantes hombres y mujeres.\n\n\npodríamos estar interesados en sí la introducción de incentivos salariales para profesores en escuelas vulnerables promueve la retención de profesores en estas escuelas (a niveles similares al resto de las escuelas).\n\n\nEn todos los ejemplos anteriores podemos separar nuestras expectativas de resultados en al menos dos elementos:\n\n\ntenemos una relacion principal entre dos variables (la variable de respuesta, y una covariable).\n\n\nqueremos ver si esta relación principal cambia segun un tercer factor\n\n\nUna herramienta que nos sirve para estudiar si la relación entre dos variable cambia en relación a un tercer factor son las interacciones entre variables. Esta herramienta nos permite evaluar si una relación de interés entre dos variables es constante o no, a los valores de una tercera variable. Este tipo de modelos es muy común en el estudio de efectividad escolar, en el estudio de evaluación de programas, y en el estudio general de inequidad escolar."
  },
  {
    "objectID": "edu4046_mod.html#a-second-subtitle",
    "href": "edu4046_mod.html#a-second-subtitle",
    "title": "Interacción entre variables",
    "section": "A second subtitle",
    "text": "A second subtitle\nAnd A third subtitle"
  },
  {
    "objectID": "edu4046_mlm.html",
    "href": "edu4046_mlm.html",
    "title": "Modelos Multinivel",
    "section": "",
    "text": "#------------------------------------------------\n# power analysis function\n#------------------------------------------------\n\nget_power &lt;- function(n_size, d){\nlibrary(dplyr)\npower &lt;- pwr::pwr.t.test(n=n_size,d=d,sig.level=.05,alternative=\"two.sided\") %&gt;%\n         purrr::pluck('power')\n\ntable &lt;- data.frame(n = n_size, power = power, d = d)\n\nreturn(table)\n}\n\n\n#------------------------------------------------\n# generate data\n#------------------------------------------------\n\ntable_n &lt;- dplyr::bind_rows(\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .1), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .2), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .3), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .4), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .5), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .6), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .7), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .8), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .9), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = 1.00), .id = 'index')\n)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n#------------------------------------------------\n# display plot\n#------------------------------------------------\n\nlibrary(ggplot2)\nggplot(table_n, aes(d, power, group=n, colour=n)) + \ngeom_line() +\ngeom_hline(yintercept = .80, lintype = 'dashed', color = 'red') +\ntheme_minimal() +\ntheme(\nlegend.position = 'right',\n# legend.title = element_blank(),\ntext = element_text(size = 12, family = 'Avenir'),\npanel.background = element_blank(),\npanel.grid.minor.y = element_blank(),\npanel.grid.major.y = element_blank(),\npanel.grid.minor.x = element_blank(),\npanel.grid.major.x = element_blank(),\naxis.text.x =  element_text(colour = \"grey30\", size = 10),\naxis.text.y =  element_text(colour = \"grey30\", size = 10),\naxis.line = element_line(colour = \"black\")\n) +\nxlab('effect size') +\nylab('satistical power')\n\nWarning in geom_hline(yintercept = 0.8, lintype = \"dashed\", color = \"red\"):\nIgnoring unknown parameters: `lintype`"
  },
  {
    "objectID": "edu4046_mlm.html#a-second-subtitle",
    "href": "edu4046_mlm.html#a-second-subtitle",
    "title": "Modelos Multinivel",
    "section": "A second subtitle",
    "text": "A second subtitle\nAnd A third subtitle"
  },
  {
    "objectID": "edu4046_mod.html#introducción",
    "href": "edu4046_mod.html#introducción",
    "title": "Interacción entre variables",
    "section": "Introducción",
    "text": "Introducción"
  },
  {
    "objectID": "edu4046_mod.html#datos",
    "href": "edu4046_mod.html#datos",
    "title": "Interacción entre variables",
    "section": "Datos",
    "text": "Datos"
  },
  {
    "objectID": "edu4046_mod.html#preparar-datos",
    "href": "edu4046_mod.html#preparar-datos",
    "title": "Interacción entre variables",
    "section": "Preparar Datos",
    "text": "Preparar Datos"
  },
  {
    "objectID": "edu4046_mod.html#ajustar-modelo",
    "href": "edu4046_mod.html#ajustar-modelo",
    "title": "Interacción entre variables",
    "section": "Ajustar Modelo",
    "text": "Ajustar Modelo"
  },
  {
    "objectID": "edu4046_mod.html#tabla-de-resultados",
    "href": "edu4046_mod.html#tabla-de-resultados",
    "title": "Interacción entre variables",
    "section": "Tabla de resultados",
    "text": "Tabla de resultados"
  },
  {
    "objectID": "edu4046_mod.html#descripción-de-resultados",
    "href": "edu4046_mod.html#descripción-de-resultados",
    "title": "Interacción entre variables",
    "section": "Descripción de resultados",
    "text": "Descripción de resultados"
  },
  {
    "objectID": "edu4046_mod.html#interacciones-entre-dicotómicas",
    "href": "edu4046_mod.html#interacciones-entre-dicotómicas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre dicotómicas",
    "text": "Interacciones entre dicotómicas"
  },
  {
    "objectID": "edu4046_mod.html#interacciones-entre-dicotómicas-y-continuas",
    "href": "edu4046_mod.html#interacciones-entre-dicotómicas-y-continuas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre dicotómicas y continuas",
    "text": "Interacciones entre dicotómicas y continuas"
  },
  {
    "objectID": "edu4046_mod.html#interacciones-entre-continuas",
    "href": "edu4046_mod.html#interacciones-entre-continuas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre continuas",
    "text": "Interacciones entre continuas"
  },
  {
    "objectID": "edu4046_mod.html#inferencia-en-interacciones",
    "href": "edu4046_mod.html#inferencia-en-interacciones",
    "title": "Interacción entre variables",
    "section": "Inferencia en interacciones",
    "text": "Inferencia en interacciones"
  },
  {
    "objectID": "edu4046_mod.html#poder-estadístico",
    "href": "edu4046_mod.html#poder-estadístico",
    "title": "Interacción entre variables",
    "section": "Poder estadístico",
    "text": "Poder estadístico"
  },
  {
    "objectID": "edu4046_mod.html#modelos-alternativos-para-evaluar-interacciones",
    "href": "edu4046_mod.html#modelos-alternativos-para-evaluar-interacciones",
    "title": "Interacción entre variables",
    "section": "Modelos alternativos para evaluar interacciones",
    "text": "Modelos alternativos para evaluar interacciones"
  },
  {
    "objectID": "edu4046_mod.html#interacciones-en-modelos-generalizados",
    "href": "edu4046_mod.html#interacciones-en-modelos-generalizados",
    "title": "Interacción entre variables",
    "section": "Interacciones en modelos generalizados",
    "text": "Interacciones en modelos generalizados"
  },
  {
    "objectID": "edu4046_mod.html#terminologia",
    "href": "edu4046_mod.html#terminologia",
    "title": "Interacción entre variables",
    "section": "Terminologia",
    "text": "Terminologia\n\nEfectos principales (i.e., main effects)\nEfectos de interacción (i.e., interaction term)"
  },
  {
    "objectID": "edu4046_mod.html#forma-de-las-interacciones",
    "href": "edu4046_mod.html#forma-de-las-interacciones",
    "title": "Interacción entre variables",
    "section": "Forma de las interacciones",
    "text": "Forma de las interacciones"
  },
  {
    "objectID": "edu4046_mod.html#medias-condicionadas",
    "href": "edu4046_mod.html#medias-condicionadas",
    "title": "Interacción entre variables",
    "section": "Medias condicionadas",
    "text": "Medias condicionadas\nLos modelos de regresión los podemos pensar como modelos de medias condicionadas. En términos gráficos nos tenemos que imaginar que tenemos una media y condicional a los valores de otro atributo la media de la variable de respuesta puede tomar diferentes valores o posiciones.\nComencemos con un ejemplo de tres variables. Supongamos que tenemos los puntajes de un test que expresa habilidad matemática (e.g., capacidad de resolución de problemas matemáticos de sexto grado), y denominemos a este puntaje como \\(y_{i}\\). Que un modelo de regresión sea pensado como un modelo de medias condicionadas, nos permite indicar que podemos expresar diferentes puntos del puntaje total anterior, segun los valores de otras covariables (i.e., condicional a…). Por ejemplo, que contamos con la escolaridad de los padres de los estudiantes, para los cuales tenemos los puntajes de habilidad. Empleemos a la variable \\(x_{i}\\) para alojar a los valores de escolaridad de los padres (e.g., 1 para educación terciaria, y 0 para grados educativos menores a la educación terciaria.). Y finalmente, agreguemos un tercer factor: la dependencia de la escuelas a las que asisten los estudiantes. Designemos esta tercera variable mediante \\(w_{i}\\), y para este ejemplo vamos a emplear los valores cero para las escuelas públicas, y los valores uno para los estudiantes que asisten a escuelas privadas.\nPara ilustrar la idea de las medias condicionadas, comencemos con un escenario sencillo. En este primer escenario vamos a imaginarnos que no hay diferencias ni por la escolaridad de los padres de los estudiantes, y que tampoco hay diferencias condicional a la escuela a la que asisten los estudiantes. En este escenario, lo más informativo de los puntajes observados sería la media de los puntajes de matemáticas. Vamos a dejar este punto de referencia en 700 puntos.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*0  , # b1\n    b2*0  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_1 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_1 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(dependencia = factor(dependencia, \n  levels = c(\n    'Pública',\n    'Privada'\n    ))) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nmutate(escolaridad = factor(escolaridad, \n  levels = c(\n    'No terciaria',\n    'Terciaria'\n    ))) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Pública' = 'black',\n'Privada' = 'red'\n))\n\n\n\nEscenario 1: sin diferencias\n\n\n\nEn este primer escenario, formalmente estamos planteando que las medias de los cuatro grupos posibles son similares entre sí. Y por tanto, que hay diferencias o desplazamientos de la media grupal, condicional a los valores de los factores de interés ( \\(x_{i}\\) y \\(w_{i}\\)).\nAhora nos vamos imaginarnos un segundo escenario. En este segundo escenario, solo vamos a tener diferencias por la escolaridad de los padres de los estudiantes, pero nos vamos a imaginar que no hay diferencias condicionales a las escuela a la que asisten los estudiantes. De esta forma, la brecha de puntajes entre estudiantes con padres de diferente escolaridad, no varía según al tipo de escuela a la que asisten.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*0  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_2 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_2 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 2: solo diferencias respecto a x\n\n\n\nEn este segundo escenario solo tenemos una relación principal. Los valores de los puntajes de matemáticas ( \\(y_{i}\\) ), varían condicional a los valores de \\(x_{i}\\); pero no varían segun los valores de \\(w_{i}\\).\nSigamos con el ejemplo, e imaginemos un tercer escenario. En este escenario vamos a incluir efectos principales para cada covariable, o relaciones de interés para cada factor. En este escenario aun no estamos incluyendo una interacción. Esto nos permitirá obtener medias condicionales para los cuatro grupos posibles:\n\nestudiantes hijos de padres sin educación terciaria, que asisten a escuelas públicas\nestudiantes hijos de padres sin educación terciaria, que asisten a escuelas privadadas\nestudiantes hijos de padres con educación terciaria, que asisten a escuelas públicas\nestudiantes hijos de padres con educación terciaria, que asisten a escuelas privadadas\n\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_3 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_3 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 3: diferencias respecto a x y w, pero sin interacción\n\n\n\n\n\n\n\n\n\nAdvertencia\n\n\n\nEn este documento empleamos los términos efecto y efectos principales para referirnos a los parámetros del modelo, que esperamos genere los datos (i.e., data generating mechanism). En otras palabras, nos estamos refiriendo a un aspecto estructural de los modelos que se ajustan (ver Rabe-Hesketh & Skrondal, 2012, p56-59). Esta terminología, es similar en nombre al uso de la expresión efecto como efecto causal que se emplea en la literatura de inferencia causal. No obstante, si bien hay conincidencias de términos, ambas expresiones no significan lo mismo. En el presente documento emplearemos el término efecto solo para aludir a relaciones esperadas entre variables, las cuales estan expresadas en los modelos de regresión y no para aludir al efecto causal que se espera de una variable por sobre otra.\n\n\nEn este tercer escenario las medias se desplazan respecto al punto de referencia inicial, el intercepto. Este desplazamiento ocurre tanto condicional a los valores de \\(x_{i}\\), como condicional a los valores de \\(w_{i}\\). Los estudiantes hijos de padres sin educación terciara presentan medias menores, en contraste a sus pares que asisten a escuelas privadas. En este escenario, observamos diferencias similares, entre los estudiantes hijos de padres con educación terciara. Aquellos que asisten a escuelas privadas, presentan medias de mayor tamaño, en contraste a sus pares que asisten a escuelas públicas.\nAhora, nos vamos a imaginar un cuarto escenario, donde incluímos una interacción entre ambas variables: entre la escolaridad de los padres, y el tipo de escuela al que asisten los estudiantes.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*-1    # b3\n    )\n)\n\ndata_example_4 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_4 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 4: diferencias respecto a x y w, y una interacción negativa\n\n\n\nEn este cuarto escenario la brecha entre estudiantes que asiste a escuelas públicas y privadas no posee el mismo tamaño. Entre los estudiantes hijos de padres con escolaridad terciara no se observan diferencias de medias; mientras que entre los estudiantes hijos de padres son educación terciaria observamos una diferencia de 100 puntos.\nFinalmente, en un quinto escenario, vamos a incluir una interacción, pero esta interacción toma una dirección diferente. Mientras en el escenario anterior lo que observabamos condiciones donde la brecha en puntajes de matemáticas entre estudiantes hijos de padres de diferente escolaridad, era nula entre escuelas privadas, y solo se observada entre escuelas públicas; ahora vamos imaginarnos un escenario inverso. En este escenario inverso, vamos a incluir una interacción tal, que la brecha entre los estudiantes, producto de la escolaridad de sus padres es de mayor tamaño entre quieres asisten a escuelas privadas, en contraste entre quienes asisten a escuelas públicas.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*1    # b3\n    )\n)\n\ndata_example_5 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_5 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 5: diferencias respecto a x y w, y una interacción positiva\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nDe los cinco escenarios revisados, solo dos de ellos incluyen un término de interacción, el escenario 4 y el escenario 5. En estos escenarios lla brecha o relación entre \\(y_{i}\\) y \\(x_{i}\\) varía según los valores de \\(w_{i}\\). Mientras en el escenario 4 la brecha entre \\(y_{i}\\) y \\(x_{i}\\) se hace mas pequeña al aumentar los valores de \\(w_{i}\\); en el escenario 5 la brecha entre \\(y_{i}\\) y \\(x_{i}\\) es de mayor tamaño al aumentar los valores de \\(w_{i}\\) (de público \\(w_{i} = 0\\) a privado \\(w_{i} = 1\\)).\n\n\nA continuación, vamos a representar de manera formal a los escenarios anteriores."
  },
  {
    "objectID": "edu4046_mod.html#medias-esperadas-empleando-a-los-resultados-del-modelo-de-regresión",
    "href": "edu4046_mod.html#medias-esperadas-empleando-a-los-resultados-del-modelo-de-regresión",
    "title": "Interacción entre variables",
    "section": "Medias esperadas empleando a los resultados del modelo de regresión",
    "text": "Medias esperadas empleando a los resultados del modelo de regresión\nLa idea general es que con la ecuación de regresión anterior podemos producir valores. Podemos tanto producir valores esperados, como las medias esperadas de los grupos, como los valores esperados por el modelo. Nos vamos a enfocar en las medias esperadas de cada grupo. Ordenando los diferentes términos de la regresión general con interacción podemos obtener las medias esperadas de cada uno de los grupos implicados por ambos factores.\n\nMedia de estudiantes con padres de escolaridad menor a terciaria, que asisten a escuelas públicas\n\n\\[E(\\bar{y} | x_{i} = 0, w_{i} = 0) = \\beta_{0} + \\beta_{1}*0 + \\beta_{2}*0 + \\beta_{3}*0*0\\]\n\nMedia de estudiantes con padres de escolaridad menor a terciaria, que asisten a escuelas privadas\n\n\\[E(\\bar{y} | x_{i} = 0, w_{i} = 1) = \\beta_{0} + \\beta_{1}*0 + \\beta_{2}*1 + \\beta_{3}*0*1\\]\n\nMedia de estudiantes con padres de escolaridad terciaria, que asisten a escuelas públicas\n\n\\[E(\\bar{y} | x_{i} = 1, w_{i} = 0) = \\beta_{0} + \\beta_{1}*1 + \\beta_{2}*0 + \\beta_{3}*1*0\\]\n\nMedia de estudiantes con padres de escolaridad terciaria, que asisten a escuelas privadas\n\n\\[E(\\bar{y} | x_{i} = 1, w_{i} = 1) = \\beta_{0} + \\beta_{1}*1 + \\beta_{2}*1 + \\beta_{3}*1*1\\]"
  },
  {
    "objectID": "edu4046_mod.html#estimados-de-los-escenarios-revisados",
    "href": "edu4046_mod.html#estimados-de-los-escenarios-revisados",
    "title": "Interacción entre variables",
    "section": "Estimados de los escenarios revisados",
    "text": "Estimados de los escenarios revisados\nCon el modelo anterior y definiendo a los términos \\(\\beta_{0}\\), \\(\\beta_{1}\\), \\(\\beta_{2}\\) y \\(\\beta_{3}\\) generamos los datos de cada uno de los escenarios anteriores. Es decir que, produjimos datos simulados para representar diferentes posibilidades.\nEscenario 1: sin diferencias\n\\[y_{i} = 700 + 0*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 2: solo diferencias por escolaridad.\n\\[y_{i} = 700 + 100*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 3: efectos principales sin interacción\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 4: interacción negativa\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} - 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 5: interacción positiva\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nA continuación vamos a ajustar modelos de regresión sobre los datos generados que constituyen a los escenarios 1 a 5. Como los datos simulados solo incluyen a una realización del modelo o mecanismo generador de datos, los resultados obtenidos van a ser muy parecidos a los modelos definidos, pero no exactamente iguales. Estos ejericio nos servirá para ilustrar como los términos del modelo de regresión anterior se vinculan con las medias esperadas que fueron graficas con las figuras anteriores.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nm01 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_1)\nm02 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_2)\nm03 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_3)\nm04 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_4)\nm05 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_5)\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\ntexreg::screenreg(list(m01, m02, m03, m04, m05), \n  star.symbol = \"*\", \n  center = TRUE, \n  doctype = FALSE,\n  dcolumn = TRUE, \n  booktabs = TRUE,\n  single.row = FALSE,\n  custom.model.names = c('E1','E2','E3','E4','E5'))\n\n\n============================================================================\n             E1           E2           E3           E4           E5         \n----------------------------------------------------------------------------\n(Intercept)   699.14 ***   699.14 ***   699.14 ***   699.14 ***   699.14 ***\n               (2.32)       (2.32)       (2.32)       (2.32)       (2.32)   \nx               0.81       100.81 ***   100.81 ***   100.81 ***   100.81 ***\n               (3.35)       (3.35)       (3.35)       (3.35)       (3.35)   \nw              -0.80        -0.80        99.20 ***    99.20 ***    99.20 ***\n               (3.29)       (3.29)       (3.29)       (3.29)       (3.29)   \nx:w             2.02         2.02         2.02       -97.98 ***   102.02 ***\n               (4.71)       (4.71)       (4.71)       (4.71)       (4.71)   \n----------------------------------------------------------------------------\nR^2             0.00         0.29         0.46         0.24         0.66    \nAdj. R^2       -0.00         0.29         0.46         0.24         0.66    \nNum. obs.    4500         4500         4500         4500         4500       \n============================================================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "edu4046_mod.html#parámetros-de-los-escenarios-revisados",
    "href": "edu4046_mod.html#parámetros-de-los-escenarios-revisados",
    "title": "Interacción entre variables",
    "section": "Parámetros de los escenarios revisados",
    "text": "Parámetros de los escenarios revisados\nCon el modelo anterior y definiendo a los términos \\(\\beta_{0}\\), \\(\\beta_{1}\\), \\(\\beta_{2}\\) y \\(\\beta_{3}\\) generamos los datos de cada uno de los escenarios anteriores. Es decir, produjimos datos simulados para representar diferentes posibilidades de relaciones entre tres variables diferentes.\nEscenario 1: sin diferencias\n\\[y_{i} = 700 + 0*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 2: solo diferencias por un factor.\n\\[y_{i} = 700 + 100*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 3: efectos principales sin interacción\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 4: interacción negativa\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} - 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 5: interacción positiva\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]"
  },
  {
    "objectID": "edu4046_mod.html#representación-gráfica-de-una-interacción",
    "href": "edu4046_mod.html#representación-gráfica-de-una-interacción",
    "title": "Interacción entre variables",
    "section": "Representación gráfica de una interacción",
    "text": "Representación gráfica de una interacción\nTradicionalmente la visualización de interacciones emplea graficos de simple slopes o de medias por grupos unidas por una linea. A continuación graficaremos de esta forma a los 5 escenarios que planteamos anteriormente.\nPara el caso del escenario 1 el único parámetro informativo es el intercepto, porque este es un escenario en que las variables \\(x_{i}\\) e \\(w_{i}\\) no son informativas respecto a los valores de \\(y_{i}\\).\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm01 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_1)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_1 &lt;- interactions::interact_plot(m01, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 1',\nsubtitle = 'b0 = 700, b1 = 0, b2 = 0, b3 = 0'\n)\n\nplot_1\n\n\n\nEscenario 1: figura sin efectos\n\n\n\nEn el escenario 2, solo incluimos un efecto principal relaciona a la variabe \\(x_{i}\\). En este escenario podemos indicar que la brecha de puntajes de matemáticas producto de las diferencias de escolaridad de los padres, es generalizable a los estudiantes que asisten a ambos tipos de escuelas, tanto públicas como privadas.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm02 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_2)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_2 &lt;- interactions::interact_plot(m02, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 2',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 0, b3 = 0'\n)\n\nplot_2\n\n\n\nEscenario 1: figura sin efectos\n\n\n\nEl escenario 3, consiste de un escenario en que solo observamos efectos principales sin interaccionees. Es de decir que, los valores de \\(y_{i}\\) varían condicionales a los valores de \\(x_{i}\\) y \\(w_{i}\\), de forma aditiva, sin incluir interacciones entre ambos factores. En terminos sustantivos esto implica que los valores esperados de los puntajes de Matemáticas varían entre lso estudiantes segun la escolaridad de los padres, y según al tipo de escuela a la que asisten, sin que estas relaciones interactuen entre sí.\nEn este tipo de escenarios, los graficos de simple slopes presentan lineas rectas que son paralelas. Esta aspecto es una característica distintiva de la evaluacion de los efectos de interacción: solo cuando hay interacciones las rectas generadas por los graficos de simple slope se deben cruzar. En escenarios en que no hay interacciones, estos graficos deben desplegar rectas paralelas.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm03 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_3)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_3 &lt;- interactions::interact_plot(m03, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 3',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = 0'\n)\n\nplot_3\n\n\n\nEscenario 1: figura sin efectos\n\n\n\nEn el escenario 4, es el primer escenario donde en un sistema de 3 variables incluimos una interacción entre las covariables. En este caso, no podemos decir que la relación entre \\(y_{i}\\) y \\(x_{i}\\) es generalible a los diferentes valores observados de \\(w_{i}\\). En términos sustantivos, los resultados implican que no hay brecha en los puntajes de matemáticas de los estudiantes condicionales a la escolaridad de los padres, para aquellos estudiantes que asisten a escuelas privadas. Sin embargo, si observamos una brecha entre los estudiantes hijos de padres con diferentes grados educativos. Aquellos estudiantes hijos de padres sin educación terciaria, presentan medias de cerca de 700 puntos, en contraste a sus pares hijos de padres con mayor escolaridad (educación terciaria), los cuales presentan medias de cerca de 800 puntos.\nComo fuera mencionado anteriormente, solo en casos de interacción entre variables los gráficos de simples slopes, presentan rectas que no son paralelas y que potencionalmente se cruzan.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm04 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_4)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_4 &lt;- interactions::interact_plot(m04, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 4',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = -100'\n)\n\nplot_4\n\n\n\nEscenario 1: figura sin efectos\n\n\n\nFinalmente, en el escenario 5 incluimos un efecto de interacción. En este caso, es una interacción positiva que se espera que aumente las brechas observadas entre \\(y_{i}\\) y \\(x_{i}\\), condicional a los valores de \\(w_{i}\\). En terminos sustantivos, los resultados de este escenario nos indican que la brecha en los puntajes de matematicas relativa a la escolaridad de los padres, es de mayor tamaño entre los estudiantes que asisten a escuelas privadas, en contraste a los estudiantes que asisten a escuelas públicas.\nLos gráficos de simple slope, para este tipo de escenarios muestran rectas que se cruzan, y que se abren a medida que aumentan los valores de \\(x_{i}\\).\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm05 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_5)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_5 &lt;- interactions::interact_plot(m05, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 5',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = 100'\n)\n\nplot_5\n\n\n\nEscenario 1: figura sin efectos"
  },
  {
    "objectID": "edu4046_mod.html#estimados-de-los-escenarios-generados",
    "href": "edu4046_mod.html#estimados-de-los-escenarios-generados",
    "title": "Interacción entre variables",
    "section": "Estimados de los escenarios generados",
    "text": "Estimados de los escenarios generados\nA continuación vamos a ajustar modelos de regresión sobre los datos generados que constituyen a los escenarios 1 a 5. Como los datos simulados solo incluyen a una realización del modelo o mecanismo generador de datos, los resultados obtenidos van a ser muy parecidos a los modelos definidos, pero no exactamente iguales. Estos ejericio nos servirá para ilustrar como los términos del modelo de regresión anterior se vinculan con las medias esperadas que fueron graficas con las figuras anteriores.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nm01 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_1)\nm02 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_2)\nm03 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_3)\nm04 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_4)\nm05 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_5)\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\ntexreg::screenreg(list(m01, m02, m03, m04, m05), \n  star.symbol = \"*\", \n  center = TRUE, \n  doctype = FALSE,\n  dcolumn = TRUE, \n  booktabs = TRUE,\n  single.row = FALSE,\n  custom.model.names = c('E1','E2','E3','E4','E5'))\n\n\n============================================================================\n             E1           E2           E3           E4           E5         \n----------------------------------------------------------------------------\n(Intercept)   699.14 ***   699.14 ***   699.14 ***   699.14 ***   699.14 ***\n               (2.32)       (2.32)       (2.32)       (2.32)       (2.32)   \nx               0.81       100.81 ***   100.81 ***   100.81 ***   100.81 ***\n               (3.35)       (3.35)       (3.35)       (3.35)       (3.35)   \nw              -0.80        -0.80        99.20 ***    99.20 ***    99.20 ***\n               (3.29)       (3.29)       (3.29)       (3.29)       (3.29)   \nx:w             2.02         2.02         2.02       -97.98 ***   102.02 ***\n               (4.71)       (4.71)       (4.71)       (4.71)       (4.71)   \n----------------------------------------------------------------------------\nR^2             0.00         0.29         0.46         0.24         0.66    \nAdj. R^2       -0.00         0.29         0.46         0.24         0.66    \nNum. obs.    4500         4500         4500         4500         4500       \n============================================================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "edu4046_mod.html#texto-sin-editar",
    "href": "edu4046_mod.html#texto-sin-editar",
    "title": "Interacción entre variables",
    "section": "Texto sin editar",
    "text": "Texto sin editar\nDiagrama Conceptual\nDiagrama de vías\nDescriptivamente, podemos calcular las medias de ambos grupos de estudiantes, y ademas, podríamos calcular la diferencia de medias entre ambos grupos, y con lo anterior tener una noción de si los estudiantes difieren en sus puntajes condicional a la escolaridad de sus padres.\nAhora, podemos abordar la misma inquietud empleando un modelo de regresión:\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\epsilon_{i}\\]\nDonde,\n\n\\(y_{i}\\) = puntaje total de cada estudiante \\(_{i}\\).\n\\(x_{i}\\) = escolaridad máxima de los padres de cada estudiante \\(_{i}\\).\n\nCon los resultados de un modelo de regresión como el anterior podemos obtener las medias esperadas de cada grupo:\n\nMedia de estudiantes con padres de escolaridad menor a terciaria\n\n\\[\\beta_{0} + \\beta_{1}(x_{i} = 0)\\]\n\nMedia de estudiantes con padres de escolaridad terciaria\n\n\\[\\beta_{0} + \\beta_{1}(x_{i} = 1)\\]\n¿Que pasaría sin incluimos una tercera variable? Si tuvieramos la información de una tercera variable, dado que estamos pensando el modelo de regresión como una forma de expresar medias condicionadas, es que entonces podriamos tener otra diferencia adicional entre grupos. Pensemos en una tercera covariable como la dependencia de la escuelas (e.g., Privadas y Públicas). Para efectos del ejemplo, pensemos que las escuelas privadas toman un valor uno, y las escuelas públicas toman un valor cero.\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\beta_{2}w_{i} + \\epsilon_{i}\\]\n\n\n\\(w_{i}\\) = tipo de escuela a la que asisten a los estudiantes \\(_{i}\\), donde 1 son escuelas privadas, y 0 son escuelas públicas.\n\nCon el modelo anterior, solo podemos representar (i.e., asumir) que las medias entre los grupos aumentan o disminuyen con respecto a al intercepto ( \\(\\beta_{0}\\) ), condicional a los valores de \\(x_{i}\\) (i.e. la escolaridad máxima de los padres) y condicional a los valores de \\(w_{i}\\) (i.e., la dependencia administrativa de la escuelas).\nPara poder representar que las medias anteriores son condicionales entre sí o que interactúan, necesitamos incluir un término adicional: el múltiplo de las variables \\(x_{i}\\) e \\(w_{i}\\), es decir \\(x_{i}*w_{i}\\). Este término nos permitirá obtener un coeficiente de regresión adicional, el cual nos permite saber si hay un “exceso” en las diferencias de medias que estamos obteniendo con los coeficientes anteriores. Este “exceso” puede ser positivo o negativo.\nSi incluimos a todos los términos, ahora contamos con un modelo de regresión, el cual incluye a un término de interacción para las variabels \\(x_{i}\\) e \\(w_{i}\\).\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\beta_{2}w_{i} + \\beta_{3}(x_{i}*w_{i})+\\epsilon_{i}\\]\nLa inquietud general que uno busca responder con los modelos de regresión con interacciones consiste en evaluar si la relación entre dos variables es equivalente, cuando consideramos la información de una tercera variable."
  },
  {
    "objectID": "edu4046_mod.html#parámetros-definidos",
    "href": "edu4046_mod.html#parámetros-definidos",
    "title": "Interacción entre variables",
    "section": "Parámetros definidos",
    "text": "Parámetros definidos\nEmpleando al modelo de regresión anterior generamos datos para cada uno de los escenarios posibles antes descritos. Definimos los valores de los términos \\(\\beta_{0}\\), \\(\\beta_{1}\\), \\(\\beta_{2}\\) y \\(\\beta_{3}\\), y \\(\\epsilon_{i}\\) para 5 escenarios diferentes. En base a esta definición generamos datos para 4500 observaciones, en una sola realización.\nProdujimos datos simulados para ilustrar diferentes posibilidades de resultados que podríamos tener con conjuntos de relaciones de tres variables en modelos de regresión.\nLos escenarios generados fueron los siguientes:\nEscenario 1: sin diferencias\n\\[y_{i} = 700 + 0*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 2: solo diferencias por un factor.\n\\[y_{i} = 700 + 100*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 3: efectos principales sin interacción\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 4: interacción negativa\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} - 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 5: interacción positiva\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nPara cada uno de los escenarios definimos que \\(\\epsilon_i \\sim \\mathcal{N}(0, \\sigma^2)\\), donde,\n\n\n\\(\\sigma^2\\) = 6350.643\n\n\n\n\n\n\n\nNota\n\n\n\nPara poder generar datos simulados empleando a los parámetros anteriores library(simglm) (ver LeBau, 2024). Previo a la presentación de cada figura se encuentra el código empleado. Si se hace click sobre el término presentado en gris code, se puede acceder al código empleado."
  },
  {
    "objectID": "edu4046_mod.html#representación-gráfica",
    "href": "edu4046_mod.html#representación-gráfica",
    "title": "Interacción entre variables",
    "section": "Representación gráfica",
    "text": "Representación gráfica\nTradicionalmente la visualización de interacciones emplea gráficos de simple slopes (Bauer, 2005; Preacher et al., 2006). En el caso de las interacciones generadas con variables categóricas de dos valores, estos gráficos incluyen a las medias esperadas de cada grupo, y estas medias son unidas con una linea. La inclinación de estas estas rectas expresan a las pendientes de regresión esperadas.\nA continuación generamos gráficos para los 5 escenarios anteriores empleando este tipo de figuras.\nPara el caso del  escenario 1  el único parámetro informativo es el intercepto, porque este es un escenario en que las variables \\(x_{i}\\) e \\(w_{i}\\) no son informativas respecto a los valores de \\(y_{i}\\).\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm01 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_1)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_1 &lt;- interactions::interact_plot(m01, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 1',\nsubtitle = 'b0 = 700, b1 = 0, b2 = 0, b3 = 0'\n)\n\nplot_1\n\n\n\nEscenario 1: figura sin efectos\n\n\n\nEn el  escenario 2 , solo incluimos un efecto principal, la relación de la variable \\(x_{i}\\) con \\(y_{i}\\). En este escenario podemos indicar que la brecha de puntajes de matemáticas producto de las diferencias de escolaridad de los padres es generalizable a los estudiantes que asisten a ambos tipos de escuelas, tanto públicas como privadas.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm02 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_2)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_2 &lt;- interactions::interact_plot(m02, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 2',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 0, b3 = 0'\n)\n\nplot_2\n\n\n\nEscenario 2: efecto de x solamente\n\n\n\nEl  escenario 3  consiste de un escenario en que solo observamos efectos principales de los factores estudiados, sin interacción alguna. Es de decir que, los valores de \\(y_{i}\\) varían condicionales a los valores de \\(x_{i}\\) y \\(w_{i}\\), de forma aditiva, sin incluir interacciones entre ambos factores.\nEn términos sustantivos lo anterior implica que los valores esperados de los puntajes de Matemáticas varían entre los estudiantes según la escolaridad de los padres, y según al tipo de escuela a la que asisten, sin que estas relaciones interactúen entre sí.\nEn este tipo de escenarios los gráficos de simple slopes presentan lineas rectas que son paralelas. Lo anterior, es una característica distintiva de este tipo de gráficos cuando hay una ausencia de interacción entre variables. Complementariamente, solo cuando hay interacciones las rectas generadas por este tipo de gráficos se cruzan pueden cruzar.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm03 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_3)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_3 &lt;- interactions::interact_plot(m03, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 3',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = 0'\n)\n\nplot_3\n\n\n\nEscenario 3: efecto de x e w sin interacción\n\n\n\nEn el  escenario 4, es el primer escenario donde en un sistema de 3 variables incluimos una interacción entre las covariables incluidas en el modelo. En este caso, no podemos decir que la relación entre \\(y_{i}\\) y \\(x_{i}\\) es generalizable a los diferentes valores observados de \\(w_{i}\\).\nEn términos sustantivos, los resultados implican que no hay brecha en los puntajes de matemáticas de los estudiantes condicionales a la escolaridad de los padres, para aquellos estudiantes que asisten a escuelas privadas. Sin embargo, si observamos una brecha entre los estudiantes hijos de padres con diferentes grados educativos. Aquellos estudiantes hijos de padres sin educación terciaria, presentan medias de cerca de 700 puntos, en contraste a sus pares hijos de padres con mayor escolaridad (educación terciaria), los cuales presentan medias de cerca de 800 puntos.\nComo fuera mencionado anteriormente, solo en casos de interacción entre variables los gráficos de simples slopes, presentan rectas que no son paralelas y que potencialmente se cruzan.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm04 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_4)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_4 &lt;- interactions::interact_plot(m04, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 4',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = -100'\n)\n\nplot_4\n\n\n\nEscenario 4: interacción negativa\n\n\n\nFinalmente, en el escenario 5 incluimos un efecto de interacción. En este caso, es una interacción positiva que se espera que aumente las brechas observadas entre \\(y_{i}\\) y \\(x_{i}\\), condicional a los valores de \\(w_{i}\\).\nEn términos sustantivos, los resultados de este escenario nos indican que la brecha en los puntajes de matemáticas relativa a la escolaridad de los padres, es de mayor tamaño entre los estudiantes que asisten a escuelas privadas, en contraste a los estudiantes que asisten a escuelas públicas.\nLos gráficos de simple slope, para este tipo de escenarios muestran rectas que se cruzan, y que se abren a medida que aumentan los valores de \\(x_{i}\\).\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm05 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_5)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_5 &lt;- interactions::interact_plot(m05, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 5',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = 100'\n)\n\nplot_5\n\n\n\nEscenario 1: figura sin efectos"
  },
  {
    "objectID": "edu4046_mod.html#estimados-de-regresión",
    "href": "edu4046_mod.html#estimados-de-regresión",
    "title": "Interacción entre variables",
    "section": "Estimados de regresión",
    "text": "Estimados de regresión\nA continuación vamos a ajustar modelos de regresión sobre los datos generados empleados en los escenarios 1 a 5. Como los datos sobre los que ajustaremos los modelos son datos simulados, de una sola realización del modelo definido o mecanismos generador datos, los resultados obtenidos van a ser muy parecidos a los parámetros definidos; pero no exactamente iguales.\nEsta diferencia entre el parámetro del modelo y el estimado del modelo suele simbolizarse mediante acentos en la notación. Por ejemplo el parámetro que expresa a la relación entre \\(y_{i}\\) e \\(x_{i}\\) es \\(\\beta_{1}\\), mientras que el estimado de esta relación es \\(\\hat{\\beta}_{1}\\).\nEl siguiente ejercicio nos servirá para ilustrar como serían los modelos de regresión que se pueden ajustar sobre los datos que generan a las figuras de los 5 escenarios anteriores.\n\nCode#---------------------------------------------------------------\n# regression\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fit models\n#--------------------------------------\n\nm01 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_1)\nm02 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_2)\nm03 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_3)\nm04 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_4)\nm05 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_5)\n\n#--------------------------------------\n# estimates\n#--------------------------------------\n\ntexreg::screenreg(list(m01, m02, m03, m04, m05), \n  star.symbol = \"*\", \n  center = TRUE, \n  doctype = FALSE,\n  dcolumn = TRUE, \n  booktabs = TRUE,\n  single.row = FALSE,\n  custom.model.names = c('E1','E2','E3','E4','E5'))\n\n\n============================================================================\n             E1           E2           E3           E4           E5         \n----------------------------------------------------------------------------\n(Intercept)   699.14 ***   699.14 ***   699.14 ***   699.14 ***   699.14 ***\n               (2.32)       (2.32)       (2.32)       (2.32)       (2.32)   \nx               0.81       100.81 ***   100.81 ***   100.81 ***   100.81 ***\n               (3.35)       (3.35)       (3.35)       (3.35)       (3.35)   \nw              -0.80        -0.80        99.20 ***    99.20 ***    99.20 ***\n               (3.29)       (3.29)       (3.29)       (3.29)       (3.29)   \nx:w             2.02         2.02         2.02       -97.98 ***   102.02 ***\n               (4.71)       (4.71)       (4.71)       (4.71)       (4.71)   \n----------------------------------------------------------------------------\nR^2             0.00         0.29         0.46         0.24         0.66    \nAdj. R^2       -0.00         0.29         0.46         0.24         0.66    \nNum. obs.    4500         4500         4500         4500         4500       \n============================================================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "logit_reg.html",
    "href": "logit_reg.html",
    "title": "Regresión logística en R",
    "section": "",
    "text": "El presente documento reproduce los resultados presentados en Osborne (2012):\n\nOsborne, J. W. (2012). Logits and tigers and bears , oh my! A brief look at the simple math of logistic regression and how it can improve dissemination of results. Practical Assessment, Research and Evaluation, 17(June 2012), pp. 1–10.\n\nEn este artículo se ajustan modelos de regresión logística sobre datos de deserción escolar de estudiantes de Estados Unidos, previo a la graduación de secundaria. Para estos propósitos el autor emplea datos de NELS88 (https://nces.ed.gov/surveys/nels88/) de 1988. En este estudio se siguen a estudiantes de 8vo grado (14 años aproximadamente), hasta el momento de graduación.\nLa variable de respuesta, o variable dependiente, que se emplea se llama dropout. En esta se codifica como cero a los estudiantes que se graduan (i.e., completan la secundaria), y como uno a los estudiantes que interrumpen su trayectoria escolar.\nLos datos que emplea el autor en Osborne (2012) y en Osborne (2015) se encuentran disponibles en el siguiente link:\n\nhttps://www.dropbox.com/s/s1y0qkn8vuebqvr/NELS_data_pulll_2.SAV?dl=0"
  },
  {
    "objectID": "logit_reg.html#desde-url",
    "href": "logit_reg.html#desde-url",
    "title": "Regresión logística en R",
    "section": "Desde URL",
    "text": "Desde URL\nCódigo 1. Abrir los datos desde URL\n\n# crear objeto con la ubicación de los datos\n1file_url &lt;- 'https://www.dropbox.com/s/s1y0qkn8vuebqvr/NELS_data_pulll_2.SAV?dl=1'\n\n# abrir los datos empleando haven\n2data_nels &lt;- haven::read_sav(file_url)\n\n# inspeccionar datos cargados en R\n3dplyr::glimpse(data_nels)\n\n\n1\n\nCreamos un objeto con la dirección de los datos como una URL directa. Para R, este texto es solo la ubicación lógica del archivo vamos a emplear. Esta podría ser reemplazada por una dirección en una carpeta.\n\n2\n\nAbrimos los datos empleando la librería “haven”. Empleamos haven::read_sav() para abrir el archivo que esta empleando el autor. Asignamos los datos abiertos al objeto data_nels, para emplear la tabla de datos que creamos en sesión.\n\n3\n\nLuego, aplicamos la función dplyr::glimpse(data_nels) para tener una panorámica de los datos que vamos a ocupar."
  },
  {
    "objectID": "logit_reg.html#desde-el-computador",
    "href": "logit_reg.html#desde-el-computador",
    "title": "Regresión logística en R",
    "section": "Desde el computador",
    "text": "Desde el computador\nCódigo 2. Abrir los datos desde el computador.\n\n# abrir datos en formato SPSS\n1data_nels &lt;- haven::read_sav('NELS_data_pulll_2.sav')\n\n# inspeccionar datos cargados en R\ndplyr::glimpse(data_nels)\n\n\n1\n\nA diferencia del código anterior, en este caso indicamos sólo el nombre del archivo, que presupone que el código y el archivo se encuentran en la carpeta de trabajo de R. Para verificar que se encuentran en la misma carpeta podemos ocupar el comando getwd(), el cual nos indica cuál es el directorio de trabajo de la consola de R.\n\n\n\n\nEl resultado en consola, tanto del Código 1 como del Código 2, es el siguiente:\n\n\nRows: 16,610\nColumns: 8\n$ graduated &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …\n$ zses      &lt;dbl&gt; -0.61560884, -0.42631319, -1.02657966, -0.09753653, -0.19467…\n$ ZACH      &lt;dbl&gt; 0.186200428, 0.625510312, 0.308392581, -0.062062995, -0.5614…\n$ BYACH     &lt;dbl&gt; 0.26825101, 0.70913561, 0.39088116, 0.01909768, -0.48212874,…\n$ dropout   &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …\n$ byses     &lt;dbl&gt; -0.529, -0.377, -0.859, -0.113, -0.191, -0.238, -0.319, -0.2…\n$ sex       &lt;dbl+lbl&gt; 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1,…\n$ poor      &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0, 1, 1, 1, 1, …"
  },
  {
    "objectID": "logit_reg.html#tabla-cruzada-de-descriptivos",
    "href": "logit_reg.html#tabla-cruzada-de-descriptivos",
    "title": "Regresión logística en R",
    "section": "Tabla cruzada de descriptivos",
    "text": "Tabla cruzada de descriptivos\nPara crear una tabla cruzada simple, podemos emplear la función xtabs().\nCódigo 3. Tabla cruzada de deserción (dropout), e ingreso familiar.\n\n# tabla cruzada básica\n1xtabs(~ poor + dropout, data = data_nels)\n\n\n1\n\nOcupamos la función xtabs, para crear una tabla cruzada. Esta función sigue la lógica de cruzar la variable de respuesta de interés, cruzada por la covariable de interés de la siguiente forma: xtabs(~ covariable + variable_de_respuesta, data = datos_de_interes).\n\n\n\n\nEl resultado del codigo anterior, debiera aparecer de la siguiente forma:\n\n\n    dropout\npoor    0    1\n   0 7821  233\n   1 7312 1244"
  },
  {
    "objectID": "logit_reg.html#tabla-cruzada-con-información-adicional.",
    "href": "logit_reg.html#tabla-cruzada-con-información-adicional.",
    "title": "Regresión logística en R",
    "section": "Tabla cruzada con información adicional.",
    "text": "Tabla cruzada con información adicional.\nEl siguiente código permite reproducir la Tabla 1 de Osborne (2012). Para poder producir todas las cifras presentes en esta tabla se requieren varios pasos. El siguiente código no es la única manera de producir esta tabla, si no que es una manera entre varias otras, que se puede emplear para producir esta tabla.\nEl código comienza con la creación de una tabla de frecuencias para dos variables de forma conjunta, empleando a la función dplyr::count(). Luego esta tabla inicial es reorganizada para que tome la forma de una tabla cruzada de 2x2, empleando a la función tidyr::pivot_wider. Y luego, se incluyen una serie de operaciones para incluir las cifras adicionales que la función xtabs no produce por si sola, como los totales, las probabilidades condicionales, y los odds ratio de la tabla 1.\nCada una de los pasos empleados, desde el paso 1 al paso 17, son comentados para indicar porque se incluye cada una de las líneas de código escritas.\nCódigo 4. Tabla cruzada de deserción (dropout), e ingreso familiar\n\n# tabla cruzada con información adicional\n\n# abrimos library(dplyr)\n1library(dplyr)\n\n# crear primera porcion de tabla 1\n2table_1a &lt;- dplyr::count(data_nels, poor, dropout) %&gt;%\n3tidyr::pivot_wider(names_from = dropout, values_from = n) %&gt;%\n4mutate(poor = case_when(\npoor == 1 ~ 'poor_yes',\npoor == 0 ~ 'poor_no'\n)) %&gt;%\n5rename(drop_no = `0`, drop_yes = `1`) %&gt;%\n6arrange(desc(poor)) %&gt;%\n7rowwise() %&gt;%\nmutate(total = sum(drop_no, drop_yes)) %&gt;%\nungroup() %&gt;%\n8mutate(conditional_prob = drop_yes/total) %&gt;%\n9mutate(odds = conditional_prob/(1-conditional_prob)) %&gt;%\n10mutate(odds_ratio = odds/dplyr::lead(odds))\n\n# crear fila de totales de tabla 1\n11table_1b &lt;- data.frame(\n12poor     = 'total',\n13drop_no  = sum(table_1a['drop_no']),\n14drop_yes = sum(table_1a['drop_yes']),\n15total    = sum(table_1a['total'])\n) \n\n# juntar ambas partes\n16table_1 &lt;- dplyr::bind_rows(table_1a, table_1b)\n\n# mostrar tabla 1\n17knitr::kable(table_1, digits = 3)\n\n\n1\n\nAbrimos la libreria dplyr para poder ocupar los comandos %&gt;% y así poder encadenar funciones y resultados.\n\n2\n\nCreamos una tabla que produce los valores cruzados.\n\n3\n\nRotamos la tabla, de modo tal que las frecuencias se re-agrupen como una tabla cruzada\n\n4\n\nRenombramos los valores numericos de poor a texto de modo tal que poor == 1 sea poor_yes, y que poor == 0 sea poor_no.\n\n5\n\nRenombramos los nombres de las columnas de drop, que originalmente quedan como 0 y 1, y les cambiamos los nombres a que sean drop_no, y drop_yes respectivamente.\n\n6\n\nReordenamos los valores de poor, de modo que aparezca poor_yes primero, y luego poor_no\n\n7\n\nAplicamos rowwise() a toda la tabla, para poder crear el total de suma de valores de cada fila. Luego aplicamos mutate(total = sum(drop_no, drop_yes)), código que nos va a sumar las celdas de la tabla cruzada. Finalmente, cerramos la operación con ungroup, para que R pueda seguir realizando las operaciones en su modo por defecto.\n\n8\n\nCalculamos las probabilidades condicionales del evento de la variable de respuesta. Es decir que, generamos la proporción de estudiantes que deserta de la escuela, condicional a los valores de poor.\n\n9\n\nCalculamos las chances u odds, la cual es la cantidad de veces en que el evento (deserción) se encuentra por sobre su inverso (la proporción del no evento, la retención). La formula general de los odds es \\(p/q\\), donde p es \\(Pr(y=1)\\), y donde \\(q\\) es \\(1 - Pr(y=1)\\).\n\n10\n\nTeniendo a los odds del evento, podemos calcular los odds ratio, esta es una razón que nos indica que tan grande son las chances de que los estudiantes de familias de menores ingresos (bajo el promedio del ingreso familiar el país, poor == 1), en contraste a los estudiantes que desertan, pero que provienen de familias de mayores ingresos (sobre el promedio del ingreso familiar el país, poor == 0)(ver Osborne, 2015, p21).\n\n11\n\nCreamos la fila de totales de la tabla, como el objeto table_1b.\n\n12\n\nCreamos el campo total dentro de la variable poor\n\n13\n\nSumamos los valores de la columna drop_no de la table_1a\n\n14\n\nSumamos los valores de la columna drop_yes de la table_1a\n\n15\n\nSumamos los valores de la columna total de la table_1a\n\n16\n\nUnimos las dos tablas parciales empleando la función dplyr::bind_rows()\n\n17\n\nPodemos desplegar el resultado empleando a knitr::kable() para que la tabla generada, se vea como una tabla estructurada en consola.\n\n\n\n\nCon todos los pasos anteriores, podemos producir la tabla 1, obteniendo como a la siguiente tabla como resultado en consola:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\npoor\ndrop_no\ndrop_yes\ntotal\nconditional_prob\nodds\nodds_ratio\n\n\n\n\npoor_yes\n7312\n1244\n8556\n0.145\n0.17\n5.711\n\n\npoor_no\n7821\n233\n8054\n0.029\n0.03\n\n\n\ntotal\n15133\n1477\n16610"
  },
  {
    "objectID": "logit_reg.html#tasa-de-prevalencia-del-evento",
    "href": "logit_reg.html#tasa-de-prevalencia-del-evento",
    "title": "Regresión logística en R",
    "section": "Tasa de prevalencia del evento",
    "text": "Tasa de prevalencia del evento\nA la base del uso de los modelos de regresión logística, se encuentran las proporciones del evento que queremos representar mediante el modelo, es decir \\(Pr(y=1)\\). En términos generales, nos referimos a esta proporación como la tasa de prevalencia del evento de interés. El evento en este caso, refiere a la cantidad de estudiantes que no se ha graduado, a pesar de iniciar sus estudios en 1988, y luego de 12 años no ha concluido sus estudios secundarios (ver: https://nces.ed.gov/surveys/nels88/).\n\n\n\n\n\n\nNota\n\n\n\nPrevalencia, refiere en general a la cantidad de personas que personas que presenta un atributo o condición. Es un término empleado de forma general en estadísticas de salud y medicina para referirse a la la cantidad de personas que presenta o padeció una enfermedad. Es común, que en estudios de deserción escolar, y de otras literaturas referidas a eventos que toman valores de presencia y ausencia, el término prevalencia tambien sea empleado. Por ejemplo en el documento de trabajo “Deserción escolar: diagnóstico y proyección en tiempos de pandemia” (CEM, 2020) se habla de “tasa de prevalencia”, para referirse a la proporción de estudiantes en un rango etario que sin haber egresado de 4° medio, no asiste a algún establecimiento educacional en un momento dado, excluyendo a quienes nunca han asistido a la educación formal.\n\n\nEn Osborne (2012), el evento de interés \\(p\\) es la cantidad de estudiantes del total que no se ha graduado. Complemtariamente, tambien tenemos a \\(q\\) o \\(1-p\\), el cual consiste en el conjunto de estudiantes que no presenta el evento de interés (i.e., el conjunto de estudiantes que sí sea ha graduado).\nEn Osborne (2012) \\(p = 1477\\), y el total es \\(total = 16610\\). De esta manera \\(P_{dropout}\\) es:\n\\[P_{dropout} = \\frac{1477}{16610}\\]\n\\[P_{dropout} = 0.0889\\]\nLa cifra complementaria a la anterior, es obtener la proporción de estudiantes que no presenta el evento:\n\\[1 - P_{dropout} = \\frac{15133}{16610}\\]\n\\[1 - P_{dropout} = 0.9111\\]\n\n\n\n\n\n\nNota\n\n\n\nPara que tengamos un poco de contexto comparativo, en Chile la tasa de prevalencia de la deserción escolar para los estudiantes de 14 a 17 años, es de 3.9% en 2019 (CEM, 2020). En términos de odds ratio, los resultados revisados en Osborne (2012) son 2.27 más grandes que los observados en Chile.\n\n\nPodemos realizar las operaciones anteriores mediante Código 5.\nCódigo 5. Tasa de prevalencia empleando cifras totales.\n\n# prorporción de desersción y retención\n\n## cantidad de casos que presenta el evento (desersión)\ny_p   &lt;- 1477\n\n## cantidad de casos que que no presenta el evento (retención)\ny_q   &lt;- 15133\n\n## cantidad total de casos\ny_tot &lt;- 16610\n\n## proporción de desersión entre las observaciones\nprob_p  &lt;- y_p/y_tot\nprob_p # text aqui\n\n## proporción de retención entre las observaciones\nprob_q  &lt;- y_q/y_tot\nprob_q\n\nLos códigos anteriores, nos entregan los siguientes resultados para prob_p:\n\n\n[1] 0.08892234\n\n\nY el siguiente es el resultado para el objeto prob_q:\n\n\n[1] 0.9110777\n\n\n\n\n\n\n\n\nImportante\n\n\n\nLos resultados generados por Osborne (2012) son solo ilustrativos, ya que los resultados generados ignoran la probabilidad de selección de las observaciones del estudio. Los datos de NELS88 provienen de una muestra probabilística, o muestra de diseño complejo, la cual posee diferentes aspectos que pueden ser incluidos en el cálculo de resultados para producir cifras como proporciones y totales, que refieran al marco muestral empleado en el estudio (ver Osborne, 2015, p21; y Osborne, 2011)."
  },
  {
    "objectID": "logit_reg.html#modelo-nulo-y-prevalencia-del-evento",
    "href": "logit_reg.html#modelo-nulo-y-prevalencia-del-evento",
    "title": "Regresión logística en R",
    "section": "Modelo nulo y prevalencia del evento",
    "text": "Modelo nulo y prevalencia del evento\nPodemos emplear el modelo nulo de la regresión logística, para obtener \\(Pr(y=1)\\). Para realizar esta operación necesitamos ajustar el siguiente modelo:\n\\[ln[Pr(y_{i} = 1)] = \\hat{\\beta}_{0}\\]\nEste es el modelo de regresión logística nulo. El modelo nulo es un modelo de regresión logística donde solo tenemos un intercepto \\(\\hat{\\beta}_{0}\\), y no incluimos ningún predictor. De forma analoga, como en el modelo de regresión nulo lo único que se estima es la media, en el caso de la regresión logística, el intercepto del modelo nulo nos entrega un estimado que nos permite llegar a \\(Pr(y=1)\\).\nAjustemos del modelo de regresión logística nulo, y veamos su salida en R.\nCódigo 6. Modelo nulo de regresión logística sobre dropout.\n\n# output\nglm(dropout ~ 1, data = data_nels, family = \"binomial\") %&gt;%\nsummary()\n\n\nCall:\nglm(formula = dropout ~ 1, family = \"binomial\", data = data_nels)\n\nCoefficients:\n            Estimate Std. Error z value Pr(&gt;|z|)    \n(Intercept) -2.32686    0.02726  -85.36   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 9967.2  on 16609  degrees of freedom\nResidual deviance: 9967.2  on 16609  degrees of freedom\nAIC: 9969.2\n\nNumber of Fisher Scoring iterations: 5"
  },
  {
    "objectID": "logit_reg.html#output-anotado-modelo-nulo",
    "href": "logit_reg.html#output-anotado-modelo-nulo",
    "title": "Regresión logística en R",
    "section": "Output anotado: modelo nulo",
    "text": "Output anotado: modelo nulo\nEl resultado del código anterior, nos entrega diferentes piezas de información. Vamos a anotar las piezas más relevantes de esta salida.\nOutput 1. Salida del modelo nulo.\n\n# Call:\n1# glm(formula = dropout ~ 1, family = \"binomial\", data = data_nels)\n# \n2# Deviance Residuals:\n#     Min       1Q   Median       3Q      Max\n# -0.4316  -0.4316  -0.4316  -0.4316   2.2000\n# \n3# Coefficients:\n#             Estimate Std. Error z value Pr(&gt;|z|)\n# (Intercept) -2.32686    0.02726  -85.36   &lt;2e-16 ***\n# ---\n4# Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n# \n# (Dispersion parameter for binomial family taken to be 1)\n# \n5#     Null deviance: 9967.2  on 16609  degrees of freedom\n6# Residual deviance: 9967.2  on 16609  degrees of freedom\n7# AIC: 9969.2\n\n\n1\n\nEsta línea contiene el código del modelo ajustado.\n\n2\n\nEstas líneas nos entregan los descriptivos de los residuales del modelo. Estos se encuentran en unidades de deviance o devianza. Mientras más grande sean estos numeros, se interpreta que el modelo ajusta menos a los datos observados.\n\n3\n\nEsta sección contiene los resultados de interés del modelo. Bajo la columna de Estimate se encuentra al interpecepto del modelo que hemos llamado \\(\\hat{\\beta}_{0}\\). Este estimado se encuentra acompañado de un error estandar, bajo la columna de Std. Error. Y además, se encuentra acompañado de un estadístico que es la division del estimado por su error estándar. Este estadístico se le suele llamar z-test o Wald statistic (\\(W\\)). Este estadístico sige una distribucion \\(\\chi^2\\) de un solo grado de libertad, que puede ser escrita de la siguiente forma \\(\\chi_{1}^2\\). Empleando los valores de \\(W\\), y la distribucion de \\(\\chi_{1}^2\\) se puede calcular el valor p (Pr(&gt;|z|)). Este valor nos indica que tan típico el valor obtenido, en la distribución de todo los valores posibles en un modelo donde \\(Pr(y=1) = .50\\).\n\n4\n\nEsta línea indica como el output clasifica a los resultados obtenidos según su valor p obtenido. cuando estos son menores a .001, se marcan con ***; cuando son menores a .01 se marcan como **, y cuando son menores a .05 se marcan como *. Para el caso en que los resultados obsevados fueran mayores a .05 (i.e., no significativos), no se marcan.\n\n5\n\nEn esta línea el output de R nos entrega la devianza nula del modelo.\n\n6\n\nEn esta siguiente línea el output de R nos entrega la devianza total del modelo, la cual es igual a la anterior, porque el modelo ajustado no incluye predictores.\n\n7\n\nFinalmente, el output entrega al AIC, el cual es un indicador de ajusta llamado Akaike Information Criterion, el cual es consiste en la devianza del modelo, más el doble de la cantidad de parámetros ajustados en el modelo. En este caso es la desvianza más 2. Mientras menor sea el AIC de un modelo, en contraste a otro modelo diferente, se interpreta que el modelo de menor AIC ajusta mejor a los datos observados."
  },
  {
    "objectID": "logit_reg.html#prevalencia-e-intercepto-del-modelo-nulo",
    "href": "logit_reg.html#prevalencia-e-intercepto-del-modelo-nulo",
    "title": "Regresión logística en R",
    "section": "Prevalencia e intercepto del modelo nulo",
    "text": "Prevalencia e intercepto del modelo nulo\nPodemos ocupar el intercepto del modelo nulo para obtener la tasa de prevalencia del evento de interés. En otras palabras, podemos ocupar el estimado de \\(\\hat{\\beta}_{0}\\), para calular la proporción de estudiantes que no se ha graduado.\nEmpleando los resultados de este modelo, vamos a obtener a \\(\\hat{\\beta}_{0}\\) en escala de logits. Empleando la formula de conversión de logits a probabilidades, podemos obtener la tasa de prevalencia de la deserción escolar para los estudiantes de 1988. Esta formula es la siguiente:\n\\[Pr(y_{i} = 1) = \\frac{\\exp(\\hat{\\beta}_{0})}{1 + \\exp(\\hat{\\beta}_{0})}\\]\nOtra forma de expresar la misma formula, es la siguiente:\n\\[Pr(y_{i} = 1) = \\frac{1}{1 + \\exp(-\\hat{\\beta}_{0})}\\]\nAmbas ecuaciones nos llevan a los mismos resultados. A continuación, en el Código 7 incluimos a ambas ecuaciones para producir los resultados esperados por el modelo nulo.\nCódigo 7. Estimación de la tasa de prevalencia empleando a los resultados del modelo.\n\n# empleamos el intercepto del modelo nulo de regresión logística\n# para obtener la tasa de prevalencia\n1glm(dropout ~ 1, data = data_nels, family = \"binomial\") %&gt;%\n2broom::tidy() %&gt;%\n3mutate(eq_1_pr_y = exp(estimate) / (1 + exp(estimate))) %&gt;%\n4mutate(eq_2_pr_y = 1 / (1 + exp(-estimate))) %&gt;%\n5knitr::kable(., digits = 4)\n\n\n1\n\nAjustamos el modelo nulo.\n\n2\n\nEmpleamos a la librería broom y a su función tidy() de forma conjunta, broom::tidy() para que nos entregue los resultados de los estimados en un objeto tabla.\n\n3\n\nOcupamos la formula 1 para calcular las probabilidades esperadas de dropout\n\n4\n\nOcupamos la segunda formula 2 para calcular las probabilidades esperadas de dropout\n\n5\n\nOcupamos a knitr::kable() para producir una tabla estructurada en la consola.\n\n\n\n\nCon todos los códigos anteriores, podemos producir la siguiente tabla:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\neq_1_pr_y\neq_2_pr_y\n\n\n\n\n(Intercept)\n-2.3269\n0.0273\n-85.357\n0\n0.0889\n0.0889\n\n\n\n\n\nEn la tabla anterior eq_1_pr_y y eq_2_pr_y nos entregan a \\(P_{dropout} = 0.0889\\)."
  },
  {
    "objectID": "logit_reg.html#probabilidades-odds-y-logits",
    "href": "logit_reg.html#probabilidades-odds-y-logits",
    "title": "Regresión logística en R",
    "section": "Probabilidades, odds y logits",
    "text": "Probabilidades, odds y logits\nEn la sección anterior hemos visto que empleando la formula de logit inverso, podemos llegar a las probabilidades esperadas con el modelo nulo.\n\\[Pr(y_{i} = 1) = \\frac{1}{1 + \\exp(-\\hat{\\beta}_{0})}\\]\nEn términos generales, los odds consisten en la razon entre el evento de interés \\(Pr(y_{1}=1)\\), y su complementario \\(Pr(y_{1}=0)\\), o \\(1 - Pr(y_{1}=1)\\).\n\\[Odds = \\frac{Pr}{1 - Pr}\\]\nInversamente, podemos convertir los odds de una proporción o probabilidad a probabilides.\n\\[Pr = \\frac{odds}{1 + odds}\\]\nFinalmente, podemos convertir los logits del intercepto a odds de un modelo nulo con la siguiente formula:\n\\(odds = exp(\\hat{\\beta}_{0})\\)\nEn términos generales, un modelo de regresión logística es un modelo que se aplica sobre los odds, en escala de logits, es un modelo de log odds o logits. A continuación, incluimos una tabla de que transforma probabilidades de .001 a .999 a odds, y luego a logits empleando las formulas anteriores.\n\n\nCódigo tabla prob, logits, odds\n# aumentar cantidad de decimales en consola\noptions(scipen = 99)\noptions(digits = 5)\nlibrary(dplyr)\n\n# crear tabla\ndata_prob &lt;- data.frame(\nprob = c(.001, 0.01, seq(.100,.900,0.100), .99, .999)\n) %&gt;%\nmutate(prob = as.numeric(prob)) %&gt;%\nmutate(odds = prob/(1-prob)) %&gt;%\nmutate(logits = log(odds)) %&gt;%\ndplyr::select(prob, logits, odds)\n\n# mostrar tabla\nknitr::kable(data_prob, digits = 4)\n\n\n\n\n\nprob\nlogits\nodds\n\n\n\n\n0.001\n-6.9068\n0.0010\n\n\n0.010\n-4.5951\n0.0101\n\n\n0.100\n-2.1972\n0.1111\n\n\n0.200\n-1.3863\n0.2500\n\n\n0.300\n-0.8473\n0.4286\n\n\n0.400\n-0.4055\n0.6667\n\n\n0.500\n0.0000\n1.0000\n\n\n0.600\n0.4055\n1.5000\n\n\n0.700\n0.8473\n2.3333\n\n\n0.800\n1.3863\n4.0000\n\n\n0.900\n2.1972\n9.0000\n\n\n0.990\n4.5951\n99.0000\n\n\n0.999\n6.9068\n999.0000\n\n\n\n\n\nNótese que una probabilidad de .50, es decir donde la mitad de las observaciones posee al evento de interés, es equivalente a un logit de 0. Y por su parte, esto es equivalente a un odds de 1.\nEn los modelos de regresión logística, un logit de cero, es nuestro punto de referencia para producir inferencias con los estimados. Indicamos que un estimado es significativo, si se encuentra los suficientemente lejos de este punto de referencia.\nEn cambio, un estimado que en odds, que fuera cercano a 1, es un estimado que se encuentra muy cerca del punto de referencia de un \\(Pr = .5\\)."
  },
  {
    "objectID": "logit_reg.html#relación-gráfica-logits-y-probabilidades",
    "href": "logit_reg.html#relación-gráfica-logits-y-probabilidades",
    "title": "Regresión logística en R",
    "section": "Relación gráfica logits y probabilidades",
    "text": "Relación gráfica logits y probabilidades\nMientras los logits se alejan del cero, a probabilides menores a .5, los logits se hacen más grandes y negativos. Mientras se alejan del cero a probabilidades mayores a .5, los logits se hacen más grandes y positivos. La conversión de valores es simétrica: la distancia que toman los valores desde el .5, hacia mayores valores o hacia menores valores toma la misma distancia en la escala de logíts.\n\n\nCódigo prob x logits\ndata_prob_fine &lt;- data.frame(\nprob = c(seq(000,1,0.001))\n) %&gt;%\nmutate(prob = as.numeric(prob)) %&gt;%\nmutate(odds = prob/(1-prob)) %&gt;%\nmutate(logits = log(odds)) %&gt;%\ndplyr::select(prob, logits, odds)\n\nlibrary(ggplot2)\nplot_logit_prob &lt;- ggplot(data_prob_fine, \n  aes(                                    \n    x = logits,                           \n    y = prob                              \n    )) +                                  \ngeom_line() +                             \ngeom_point(size=1) +                   \ntheme_bw() +                           \ntheme(                                 \n  legend.title = element_blank(),      \n  panel.grid.major.x = element_blank(),\n  panel.grid.minor.x = element_blank(),\n  panel.grid.minor.y = element_blank(),\n  panel.grid.major.y =                            \n  element_line(linewidth = .25, colour = \"grey70\")\n  )                                               \n\n# mostrar plot\nsuppressWarnings(print(plot_logit_prob))"
  },
  {
    "objectID": "logit_reg.html#relación-gráfica-odds-y-probabilidades",
    "href": "logit_reg.html#relación-gráfica-odds-y-probabilidades",
    "title": "Regresión logística en R",
    "section": "Relación gráfica odds y probabilidades",
    "text": "Relación gráfica odds y probabilidades\nPor su parte los odds siguen otro patrón con respecto a las probabilidades. Los odds se acercan al cero mientras menor sea la probabilidad a la que representan, y se hacen más positivos a medida que aumenta la probabilidad representada. La conversión de valores es no es simétrica, y es solo positiva.\nA continuación graficamos como se ven los odds con respecto a las probabilidades de \\(Pr =.5\\) a \\(Pr = 1\\).\n\n\nCódigo prob x odds\ndata_prob_fine &lt;- data.frame(\nprob = c(seq(000,1,0.001))\n) %&gt;%\nmutate(prob = as.numeric(prob)) %&gt;%\nmutate(odds = prob/(1-prob)) %&gt;%\nmutate(logits = log(odds)) %&gt;%\ndplyr::select(prob, logits, odds)\n\nlibrary(ggplot2)\nplot_logit_odds &lt;- ggplot(data_prob_fine, \n  aes(                                    \n    x = odds,                           \n    y = prob                              \n    )) +                                  \n# geom_line() +                             \ngeom_point(size=1) +                   \nxlim(c(1,50)) +\nylim(c(.5,1)) +\ntheme_bw() +                           \ntheme(                                 \n  legend.title = element_blank(),      \n  panel.grid.major.x = element_blank(),\n  panel.grid.minor.x = element_blank(),\n  panel.grid.minor.y = element_blank(),\n  panel.grid.major.y =                            \n  element_line(linewidth = .25, colour = \"grey70\")\n  )                                               \n\n# mostrar plot\nsuppressWarnings(print(plot_logit_odds))"
  },
  {
    "objectID": "logit_reg.html#modelo-ajustado",
    "href": "logit_reg.html#modelo-ajustado",
    "title": "Regresión logística en R",
    "section": "Modelo ajustado",
    "text": "Modelo ajustado\nEn la tabla 4, Osborne (2012) incluye los resultados de un modelo con un solo predictor. Este modelo puede ser expresado de la siguiente forma:\n\\[ln[Pr(y_{i} = 1)] = \\hat{\\beta}_{0} + \\hat{\\beta}_{1}x_{i}\\]\nSi somos más explicitos podemos reemplazar a \\(y_{i}\\) y a \\(x_{i}\\) por los nombres de las variables que estamos empleando.\n\\[ln[Pr(dropout_{i} = 1)] = \\hat{\\beta}_{0} + \\hat{\\beta}_{1}poor_{i}\\]\nLa siguiente figura reproduce los resultados de la tabla 4 de Osborne (2012).\n\n\n\nTable 4: SPSS logistic regression output for POOR and DROPOUT analysis"
  },
  {
    "objectID": "logit_reg.html#modelo-ajustado-en-r",
    "href": "logit_reg.html#modelo-ajustado-en-r",
    "title": "Regresión logística en R",
    "section": "Modelo ajustado en R",
    "text": "Modelo ajustado en R\nA continuación ajustamos el modelo de regresión logística que reproduce los resultados de la tabla 4 de Osborne (2012, p6):\nCódigo 8. Modelo regresión logística con un predictor sobre dropout.\n\n# modelo de regresión logística con un predictor binario\nglm(dropout ~ 1 + poor, data = data_nels, family = \"binomial\") %&gt;%\nsummary()\n\n\nCall:\nglm(formula = dropout ~ 1 + poor, family = \"binomial\", data = data_nels)\n\nCoefficients:\n            Estimate Std. Error z value            Pr(&gt;|z|)    \n(Intercept)  -3.5135     0.0665   -52.9 &lt;0.0000000000000002 ***\npoor          1.7423     0.0732    23.8 &lt;0.0000000000000002 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 9967.2  on 16609  degrees of freedom\nResidual deviance: 9205.5  on 16608  degrees of freedom\nAIC: 9209\n\nNumber of Fisher Scoring iterations: 6\n\n\nEn la siguiente sección vamos a revisar la salida que nos entrega el código anterior."
  },
  {
    "objectID": "logit_reg.html#output-anotado-modelo-con-un-predictor",
    "href": "logit_reg.html#output-anotado-modelo-con-un-predictor",
    "title": "Regresión logística en R",
    "section": "Output anotado: modelo con un predictor",
    "text": "Output anotado: modelo con un predictor\nA continuación vamos a revisar las líneas adicionales de la salida de una regresión logística que entrega R, empleando a la función glm().\nOutput 2. Salida del modelo con un predictor\n\n# Call:\n# glm(formula = dropout ~ 1 + poor, family = \"binomial\", data = data_nels)\n# \n# Deviance Residuals: \n#     Min       1Q   Median       3Q      Max  \n# -0.5606  -0.5606  -0.2423  -0.2423   2.6619  \n# \n# Coefficients:\n#             Estimate Std. Error z value Pr(&gt;|z|)    \n1# (Intercept) -3.51353    0.06648  -52.85   &lt;2e-16 ***\n2# poor         1.74234    0.07321   23.80   &lt;2e-16 ***\n# ---\n# Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1\n# \n# (Dispersion parameter for binomial family taken to be 1)\n# \n3#     Null deviance: 9967.2  on 16609  degrees of freedom\n4# Residual deviance: 9205.5  on 16608  degrees of freedom\n# AIC: 9209.5\n# \n# Number of Fisher Scoring iterations: 6\n\n\n1\n\nAl igual que en el output anterior esta es la línea del intercepto del modelo, \\(\\hat{\\hat{\\beta}}_{0}\\). Sin embargo, ahora esta calculara para entregarnos los logits de \\(Pr(y = 1 | x = 0)\\). Es decir, que estos valores nos permiten obtener la tasa de prevalencia del evento de interes, entre los estudiantes que vienen de familias de ingresos iguales o supieriors al promedio de ingreso.\n\n2\n\nEn esta línea se encuentra el estimado de \\(\\hat{\\beta}_{1}\\). Este nos entrega a las probabilidades condicionales del evento de interes, cuando poor == 1 en log(odds) o logits. Dicho en otras palabras. Este estimado nos permite saber cuanto más grande son las chances de que los estudiantes pobres deserten de la secundaria, en contraste a los estudiantes que han desertado, pero que provienen de familias de mayores ingresos. Si exponenciamos este coeficiente podemos convertir este coeficiente a odds ratio \\(\\exp(\\hat{\\hat{\\beta}}_{1}) = 5.711\\)\n\n3\n\nAl igual que en el modelo nulo, esta línea nos reporta el total de la devianza del modelo nulo. Este número es la suma de todas las devianzas asociadas a cada valor observado, donde se solo se emplea al intercepto del modelo como información.\n\n4\n\nEsta línea nos entrega la suma de las devianza de todas las observaciones luego de que emplearamos la información del modelo ajustado, incluyendo al intercepto y a la pendiente asociada a la variable poor."
  },
  {
    "objectID": "logit_reg.html#agregando-los-odds-ratio",
    "href": "logit_reg.html#agregando-los-odds-ratio",
    "title": "Regresión logística en R",
    "section": "Agregando los odds ratio",
    "text": "Agregando los odds ratio\nEmpleando a broom::tidy(), podemos exponenciar a los estimados obtenidos, producir a los odds ratio del modelo, y agregarlos a la tabla de resultados. El siguiente código incluye líneas para para implementar estos diferentes pasos.\nCódigo 9. Agregar odds ratio a la tabla de estimados\n\n# modelo de regresión logística con un predictor binario\n1glm(dropout ~ 1 + poor, data = data_nels, family = \"binomial\") %&gt;%\n2broom::tidy()  %&gt;%\n3mutate(odds_ratio = exp(estimate))  %&gt;%\n4knitr::kable(., digits = 3)\n\n\n1\n\nLa primera línea específica el modelo que queremos ajustar.\n\n2\n\nEn una secuencia aplicamos la función broom::tidy() para que de salida tradicional de glm() extraigamos a los estimados como una tabla.\n\n3\n\nLa función mutate() genera la variable odds_ratio donde alojaremos a los estimados exponenciados.\n\n4\n\nFinalmente, empleamos a la función knitr::kable() para desplegar a la tabla creada, como una tabla estructurada en la consola.\n\n\n\n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\nodds_ratio\n\n\n\n\n(Intercept)\n-3.514\n0.066\n-52.850\n0\n0.030\n\n\npoor\n1.742\n0.073\n23.798\n0\n5.711"
  },
  {
    "objectID": "logit_reg.html#logits-y-odds-ratio-un-poco-de-algebra",
    "href": "logit_reg.html#logits-y-odds-ratio-un-poco-de-algebra",
    "title": "Regresión logística en R",
    "section": "Logits y odds ratio: un poco de algebra",
    "text": "Logits y odds ratio: un poco de algebra\nLos odds ratio, a diferencia de los odds son razones entre dos odds. Si exponienciamos al coefiente \\(\\hat{\\beta}_{1}\\) del modelo anterior vamos a obtener un odds ratio.\n\\[\\text{odds ratio} = exp(\\hat{\\beta}_{1})\\]\nEste odds ratio proviene de la siguiente relación de odds (Rabe-Hesketh et al., 2012, p 503):\n\\[\\frac{Odds(y_{i} = 1 | x_{1} = a + 1)}{Odds(y_{i} = 1 | x_{1} = a)}\\]\nLo anterior quiere decir que el aumento de odds de \\(y_{i} = 1\\), condicional a una unidad adicional sobre \\(x_{1} = a + 1\\), por sobre los odds de \\(Odds(y_{i} = 1\\) condicional a los valores de \\(x_{i}\\) antes de aumentar en una unidad (i.e., \\(x_{1} = a)\\)) es equivalente a \\(exp(\\hat{\\beta}_{1})\\)\nLa función de enlace de la regresión logística (i.e., function link), es atractiva porque produce una función lineal a los log odds (i.e., una recta). Si restaramos las siguientes expresiones entre sí, de tal forma que restaramos a la expresion 2, a la expresión 1 siguiente, obtendriamos como resultado a \\(\\beta_{1}\\).\n\nExpresión 1:\n\n\\[ln[Odds(y_{i} = 1 | x_{1} = a + 1)] = \\beta_{0} + \\beta_{1}(a + 1)\\]\n\nExpresión 2:\n\n\\[ln[Odds(y_{i} = 1 | x_{1} = a)]  = \\beta_{0} + \\beta_{1}(a)\\]\nEl resultado de la resta entre las expresiones anteriores es \\(\\beta_{1}\\). Veamos esto por pasos:\n\nPaso 1: \\([\\beta_{0} + \\beta_{1}(a + 1)] - [\\beta_{0} + \\beta_{1}(a)]\\)\n\n\nEliminamos a los interceptos.\n\n\nPaso 2: \\(\\beta_{1}(a + 1) - \\beta_{1}(a)\\)\n\n\nMultiplicamos los términos sobre los parentesis.\n\n\nPaso 3: \\(\\beta_{1}a + \\beta_{1} - \\beta_{1}a\\)\n\n\nAplicamos la resta entre los términos equivalentes.\n\n\nResultado: \\(\\beta_{1}\\)\n\nSi extendemos el modelo a la inclusión de dos predictores, podemos escribir la regresión logística como:\n\\[ln[Pr(y_{i} = 1 | x_{1i}, x_{2i})] = \\beta_{0} + \\beta_{1}x_{1i} + \\beta_{2}x_{2i}\\]\nEn este caso, \\(exp(\\hat{\\beta}_{1})\\) es interpretado comos los odds ratio de la probabilidad esperada de \\(y_{i} = 1\\), cuando \\(x_{1i} = a + 1\\), en contraste a \\(x_{1i} = a\\), a valores cero de \\(x_{2i}\\) (i.e., controlando por \\(x_{2i}\\)).\nPor su parte, \\(exp(\\hat{\\beta}_{2})\\) son los odds ratio de \\(Pr(y_{i} = 1)\\), cuando \\(x_{2i} = a + 1\\), en contraste a \\(x_{2i} = a\\), cuando \\(x_{1i} = 0\\) (i.e., controlando por \\(x_{1i}\\)).\nPodemos ser más explicitos aun, y descomponer la información implicada por \\(exp(\\hat{\\beta}_{1})\\), y tenemos que:\n\\[\\frac{Odds(y_{i} = 1 | x_{1} = a + 1)}{Odds(y_{i} = 1 | x_{1} = a)} =  \\frac{Pr(y_{i} = 1 | x_{1} = a + 1)}{Pr(y_{i} = 0 | x_{1} = a + 1)} \\biggm/ \\frac{Pr(y_{i} = 1 | x_{1} = a)}{Pr(y_{i} = 0 | x_{1} = a)}\\]\nDe esta forma, podemos indicar analíticamente, i.e. mediante formulas y algebra, que los odds ratio generados por un modelo de regresión logística son la razon de proporción de \\(y_{i}\\), es decir \\(Pr /(1-Pr)\\), condicional a los valores de \\(x_{i}\\), a una unidad de distancia (i.e., \\(x_{i} = a + 1\\) vs. \\(x_{i} = a\\))."
  },
  {
    "objectID": "logit_reg.html#modelo-ajustado-1",
    "href": "logit_reg.html#modelo-ajustado-1",
    "title": "Regresión logística en R",
    "section": "Modelo Ajustado",
    "text": "Modelo Ajustado\nEn la tabla 5 Osborne (2012) incluye dos predictores continuos, además de una interación entre los predictores incluidos en el modelo. En términos generales podemos representar este modelo de la siguiente forma:\n\\[ln[Pr(y_{i} = 1)] = \\hat{\\beta}_{0} + \\hat{\\beta}_{1}x_{1i} + \\hat{\\beta}_{2}x_{2i} + \\hat{\\beta}_{3}x_{2i}x_{3i}\\]\nVamos a proceder de la misma forma anterior, y vamos a reemplazar los términos genéricos de la ecucación anterior por las variables que estamos empleando para la ilustración presente.\n\\[ln[Pr(dropout_{i} = 1)] = \\hat{\\beta}_{0} + \\hat{\\beta}_{1}ZACH_{i} + \\hat{\\beta}_{2}zses_{i} + \\hat{\\beta}_{3}ZACH_{i}zses_{i}\\]\nLa tabla 5 de Osborne (2012, p7) se ve de la siguiente forma:\n\n\n\nTable 5: SPSS logistic regression output predicting DROPOUT fro ACH, SES"
  },
  {
    "objectID": "logit_reg.html#modelo-ajustado-en-r-1",
    "href": "logit_reg.html#modelo-ajustado-en-r-1",
    "title": "Regresión logística en R",
    "section": "Modelo ajustado en R",
    "text": "Modelo ajustado en R\nPara ajustar un modelo de regresión logística con más de un predictor, nos basta con llamar a las variables de interés en la linea de formula del comando glm. Además, para incluir interacciones entre los predictores, podemos interponer : con lo cual R interpreta que necesitamos al producto de las variables incluidas en la formula.\nCódigo 10. Ajuste de modelo de regresión con varios predictores.\n\n# modelo de regresión logística con varios predictores\nglm(dropout ~ ZACH + zses + ZACH:zses, \n  data = data_nels, \n  family = \"binomial\") %&gt;%                                          \nbroom::tidy()  %&gt;%                                                  \nmutate(odds_ratio = exp(estimate))  %&gt;%                             \nknitr::kable(., digits = 3)                                         \n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\nodds_ratio\n\n\n\n\n(Intercept)\n-3.174\n0.054\n-58.817\n0\n0.042\n\n\nZACH\n-1.174\n0.055\n-21.436\n0\n0.309\n\n\nzses\n-0.857\n0.054\n-15.863\n0\n0.424\n\n\nZACH:zses\n-0.209\n0.051\n-4.074\n0\n0.811\n\n\n\n\n\nEl código anterior se diferencia del Código 8 empleado para la tabla 4, no sólo porque estamos empleando más de un predictor, sino porque estamos incluyendo una interacción entre variables. Hay tres maneras de incluir un término de interacción entre variables en los modelos líneales generales en R. Podemos incluir términos de interacción empleando las siguiente formas\n\n\nvariable_1:variable_2;\n\n\nvariable_1*variable_2;\n\n\ntambién es posible incluir los términos de interacción creando una nueva variable, emplando un comando como el siguiente mutate(int = variable_1*variable_2\n\n\n\n\n\n\n\n\nTip\n\n\n\nCon las tres formas de código se producen los mismos resultados (ver Anexo 1: interacción).\n\n\nA continuación vamos a ajustar el modelo de rgeresión logística con varios predictores, e inspeccionaremos la salida tradicional que nos entrega, empleando a la función summary().\nCódigo 11. Ajuste de modelo de regresión con varios predictores y salida tradicional.\n\n# modelo de regresión logística con varios predictores\nglm(dropout ~ ZACH + zses + ZACH:zses, \n  data = data_nels, \n  family = \"binomial\") %&gt;%                                          \nsummary()\n\n\nCall:\nglm(formula = dropout ~ ZACH + zses + ZACH:zses, family = \"binomial\", \n    data = data_nels)\n\nCoefficients:\n            Estimate Std. Error z value             Pr(&gt;|z|)    \n(Intercept)  -3.1743     0.0540  -58.82 &lt; 0.0000000000000002 ***\nZACH         -1.1744     0.0548  -21.44 &lt; 0.0000000000000002 ***\nzses         -0.8570     0.0540  -15.86 &lt; 0.0000000000000002 ***\nZACH:zses    -0.2093     0.0514   -4.07             0.000046 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 9967.2  on 16609  degrees of freedom\nResidual deviance: 8045.5  on 16606  degrees of freedom\nAIC: 8054\n\nNumber of Fisher Scoring iterations: 7"
  },
  {
    "objectID": "logit_reg.html#output-anotado-modelo-con-varios-predictores",
    "href": "logit_reg.html#output-anotado-modelo-con-varios-predictores",
    "title": "Regresión logística en R",
    "section": "Output anotado: modelo con varios predictores",
    "text": "Output anotado: modelo con varios predictores\nVamos a revisar la salida del output anterior. A diferencia de la salida del modelo ajustado con un solo predictor, ahora se incluyen dos líneas adicionales, una para el predictor adicional, y otra línea de salida para incluir al estimado del término de interacción.\nOutput 3. Salida del modelo ajustado con varios predictores\n\n# Call:\n# glm(formula = dropout ~ ZACH + zses + ZACH:zses, family = \"binomial\", \n#     data = data_nels)\n# \n# Deviance Residuals: \n#     Min       1Q   Median       3Q      Max  \n# -1.3764  -0.4708  -0.2510  -0.1017   3.6332  \n# \n# Coefficients:\n#             Estimate Std. Error z value Pr(&gt;|z|)    \n1# (Intercept) -3.17426    0.05397 -58.817  &lt; 2e-16 ***\n2# ZACH        -1.17443    0.05479 -21.436  &lt; 2e-16 ***\n3# zses        -0.85697    0.05402 -15.863  &lt; 2e-16 ***\n4# ZACH:zses   -0.20932    0.05138  -4.074 4.61e-05 ***\n# ---\n# Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1\n# \n# (Dispersion parameter for binomial family taken to be 1)\n# \n5#     Null deviance: 9967.2  on 16609  degrees of freedom\n6# Residual deviance: 8045.5  on 16606  degrees of freedom\n# AIC: 8053.5\n# \n7# Number of Fisher Scoring iterations: 7\n\n\n1\n\nEsta línea nos entrega el estimado del intercepto del modelo, es el estimado de \\(\\hat{\\beta}_{0}\\). Este estimado nos permite llegar a la prevalencia del evento, a niveles medios de la variable ZACH, a niveles medios de la variable zses, y sin interacción. Este estimado, sigue la misma lógica de los modelos de regresión lineal donde el itercepto es el valor esperado de la variable de respuesta, es decir \\(E(y_{i})\\), cuando todos los valores de las covariables del modelo se encuentran en cero.\n\n2\n\nEn esta línea se encuentra el estimado de \\(\\hat{\\beta}_{1}\\). Este estimado nos indica que los riesgos de deserción escolar disminuyen condicionales al desempeño académicos de los estudiantes. Se esper que ños estudiantes a una desviación estándar de desempeño académico presentan probabilidades condicionales de deserción escolar menor, a la de sus pares con desempeños académicos medios.\n\n3\n\nEn esta línea se encuentra el estimado de \\(\\hat{\\beta}_{2}\\). Este estimado nos indica que los riesgos de deserción escolar disiminuyen, condicionales al nivel socioeconómico de las familias. ses es una variable continua, generada como el compuesto de la educación de madre y padre, la ocupación de ambos padres, y el ingreso del hogar (ver NCES, 2018, p5). Estudiantes a una desviación estandar de la media de los estudiantes, en este indicador, son menos proclives a desertar de la educación secundaria.\n\n4\n\nEn esta línea se encuentra el estimado de \\(\\hat{\\beta}_{3}\\). Este estimado nos indica que los riesgos de deserción escolar se aceleran o desaceleran producto de los valores de ACH o de ses. En este caso, dado que el estimado es negativo, de igual dirección que los coeficiientes anteriores, lo podemos interpretar como un término de interacción que representa a una aceleración. Es decir, es un coeficiente que modera de forma positiva a los coeficientes anteriores. Los resultados de este coeficiente implican que los estudiantes de familias de mayor nivel socioeconómico, y de mayor desempeño académico, son menos proclives a desertar de la secundaria\n\n5\n\nAl igual que en los modelos anteriores, esta línea nos entrega la devianza del modelo nulo. Este resultado nos permite evaluar de forma global al modelo ajustado, en contraste al modelo, por ejemplo empleando una prueba omnibus como un Likelihood Ratio Test (ver Masyn, 2013; Rabe-Hesketh et al, 2012).\n\n6\n\nEsta línea nos entrega la devianza total del modelo ajustado. Esta corresponde a la suma total de devianzas de todos los valores observados en contraste a los valores esperados por el modelo, expresados en escala de devianzas. Este número, puede ser considerado una medida de ajuste de los datos al modelo ajustado. Es un término análogo al calculo de residuales presentes en los modelos de regresión linea, solo que se encuentra en escala de devianza.\n\n7\n\nA diferencia de los modelos de regresión lineal, en la cual los estimados pueden ser obtenidos mediante soluciones analíticas (i.e., con un poco de algebra), los resultados de los modelos de regresión logística no pueden ser resueltos de esta forma, y requieren de métodos numéricos. Los métodos numéricos son procesos de estimación iterativos. En estos procesos se comienza con un aproximado de los posibles valores que pudieran resolver a los estimados, y que al mismo tiempo minimizen las devianzas de los valores observados en comparación modelo posible de cada iteración. Esta línea, nos indica que se realizaron 7 iteraciones antes de encontrar los estimados propuestos en el modelo.\n\n\n\n\n\n\n\n\n\n\nTip\n\n\n\nBryer (2021) tiene una visualización de un proceso de interación para regresión logística de un solo predictor. Ver: https://htmlpreview.github.io/?https://github.com/jbryer/visualMLE/blob/master/doc/mle.html"
  },
  {
    "objectID": "logit_reg.html#logits-esperados",
    "href": "logit_reg.html#logits-esperados",
    "title": "Regresión logística en R",
    "section": "Logits esperados",
    "text": "Logits esperados\nRecordemos el modelo ajustado:\n\\[ln[Pr(dropout_{i} = 1)] = \\hat{\\beta}_{0} + \\hat{\\beta}_{1}ZACH_{i} + \\hat{\\beta}_{2}zses_{i} + \\hat{\\beta}_{3}ZACH_{i}zses_{i}\\]\nCon este modelo, podemos generar los modelos logits esperados a diferentes valores observados de las variables ZACH y zses. El autor emplea los valores -2SD y +2SD como ejemplos valores que representen a valores altos y bajos de cada factor del modelo.\nLos valores esperados por el modelo, en escala logit los podemos expresar de la siguiente forma:\n\\[\\hat{ln[Pr(dropout_{i} = 1)]} = \\hat{\\beta}_{0} + \\hat{\\beta}_{1}ZACH_{i} + \\hat{\\beta}_{2}zses_{i} + \\hat{\\beta}_{3}ZACH_{i}zses_{i}\\]\nSi reemplazamos los valores de \\(\\hat{\\beta}_{0}\\), \\(\\hat{\\beta}_{1}\\), \\(\\hat{\\beta}_{2}\\) y \\(\\hat{\\beta}_{3}\\) por lo valores obtenidos en el modelo anterior, con hasta tres decimales, podemos escribir la ecuación de los logits esperados por el modelo:\n\\[\\hat{ln[Pr(dropout_{i} = 1)]} = -3.174 -1.174(ZACH_{i}) -0.857(zses_{i}) -0.209(ZACH_{i}zses_{i})\\]\nA continuación reemplazamos los valores de cada variable, por los valores de interés, y empleamos las formulas de logits esperados, las de odds ratio, y las formulas para obtener las probabilidades condicionales.\nCódigo 12. Calcular valores esperados por el modelo\n\n# valores de interés\nlo_ach &lt;- -2\nhi_ach &lt;-  2\nlo_ses &lt;- -2\nhi_ses &lt;-  2\n\n# coeficientes en logits del modelo\nb0 &lt;- -3.174\nb1 &lt;- -1.174\nb2 &lt;- -0.857\nb3 &lt;- -0.209\n\n# logits esperados a cada conjunto de valores de interés\ne_logit_1 &lt;- b0 + b1*(lo_ach) + b2*(lo_ses) + b3*(lo_ach*lo_ses)\ne_logit_2 &lt;- b0 + b1*(lo_ach) + b2*(hi_ses) + b3*(lo_ach*hi_ses)\ne_logit_3 &lt;- b0 + b1*(hi_ach) + b2*(lo_ses) + b3*(hi_ach*lo_ses)\ne_logit_4 &lt;- b0 + b1*(hi_ach) + b2*(hi_ses) + b3*(hi_ach*hi_ses)\n\n# crear tabla 6\ntable_6 &lt;- data.frame(\ngroup = c(\n  'Low ACH, Low SES',\n  'Low ACH, High SES',\n  'High ACH, Low SES',\n  'High ACH, High SES'),\npredicted_logits = c(\ne_logit_1,\ne_logit_2,\ne_logit_3,\ne_logit_4\n)\n) %&gt;%\nmutate(odds_ratio = exp(predicted_logits)) %&gt;%\nmutate(conditional_prob = odds_ratio/(1+odds_ratio))\n\n# mostrar tabla 6\nknitr::kable(table_6, digits = 3)\n\n\n\n\ngroup\npredicted_logits\nodds_ratio\nconditional_prob\n\n\n\n\nLow ACH, Low SES\n0.052\n1.053\n0.513\n\n\nLow ACH, High SES\n-1.704\n0.182\n0.154\n\n\nHigh ACH, Low SES\n-2.972\n0.051\n0.049\n\n\nHigh ACH, High SES\n-8.072\n0.000\n0.000"
  },
  {
    "objectID": "logit_reg.html#valores-predichos",
    "href": "logit_reg.html#valores-predichos",
    "title": "Regresión logística en R",
    "section": "Valores predichos",
    "text": "Valores predichos\nLos valores predichos por el modelo, y los valores esperados por el modelo refieren a la misma entidad. Es decir, que los valores predichos consisten en los valores que podemos producir empleando a los estiados del modelo.\nA continuación replicamos el procedimiento anterior, pero por medio de la función predict(). Esta función en R, nos permite generar valores esperados empleando al modelo ajustado como objeto, y bridandole los valores de interés que quisieramos.\nPara emplear esta función, vamos a crear un objeto que contenga al modelo de interés. Vamos a llamar a este objeto m02. Luego, vamos a crear una tabla de datos, que contenga los valores de interés. Finalmente, empleamos a la función predict() para producir los valores esperados por el modelo, en la escala de logits, y en la escala de probabilidades.\nCódigo 13. Calcular valores predichos empleando a predict()\n\n# ajustar modelo\n1m02 &lt;- data_nels %&gt;%\n       mutate(int = ZACH*zses) %&gt;%\n2       glm(dropout ~ ZACH + zses + int,\n       data = .,\n       family = \"binomial\"\n       )\n\n# tabla de valores esperados\n3expected_values &lt;- data.frame(\nZACH =  c(-2,-2,2,2),\nzses  = c(-2,2,-2,2)\n) %&gt;%\n4mutate(int = ZACH*zses)\n\n# crear tabla\n5tabla_6a &lt;- data.frame(\ngroup = c(\n  'Low ACH, Low SES',\n  'Low ACH, High SES',\n  'High ACH, Low SES',\n  'High ACH, High SES'\n),\npredicted_logits =\n6 predict(m02, newdata = expected_values, type = 'link')\n) %&gt;%\n7mutate(odds_ratio = exp(predicted_logits)) %&gt;%\nmutate(conditional_prob = \n8  predict(m02, newdata = expected_values, type = 'response'\n    )\n)\n\n# mostrar tabla\n9knitr::kable(tabla_6a, digits = 3)\n\n\n1\n\nCon estas líneas de código creamos la base de datos que ahora contiene al término de interacción int, el cual corresponde a la multiplicación de los términos ZACHy zses.\n\n2\n\nEn secuencia, ahora escribimos la formula que expresa al modelo que queremos ajustar. El resultado de nuestro modelo ajustado, queda alojado en el objeto m02.\n\n3\n\nEn estas lineas de codigo, nos encontramos creando una tabla de datos que posee 3 columnas: ZACH, zses, y la columna int. Cada una de estas columnas contiene a los valores de interés -2,-2,2,2; -2,2,-2,2, y a los valores 4, -4, -4, 4 respectivamente.\n\n4\n\nEn particular la línea que contiene a mutate(int = ZACH*zses) crea al vector, o columna de valores para nuestro término de interacción int. Este vector contiene a los valores 4, -4, -4, 4.\n\n5\n\nAhora creamos la tabla 6, indicando primero la secuencia de grupos ‘Low ACH, Low SES’, ‘Low ACH, High SES’,‘High ACH, Low SES’,‘High ACH, High SES’ presentes en la tabla 6.\n\n6\n\nCon la función predict() creamos los valores predichos empleando al objeto m02. En esta aplicación ocupamos al argumento type = 'link' para que los valores predichos se encuentren en la escala de logits.\n\n7\n\nCon los valores predichos, podemos calcular a los odds ratio, por medio de exponenciar a los logits obtenidos.\n\n8\n\nNuevamente, empleando a la función predict(), pero esta vez con el argumento type = 'response' podemos obtener los valores predichos en escala de probabilidades. Estas son las probabilidades condicionales generadas con el modelo sobre los valores de interés.\n\n9\n\nFinalmente, con la última linea podemos desplegar en consola tabla creada.\n\n\n\n\nEmpleando el Código 13 podemos generar la siguiente tabla.\n\n\n\n\n\ngroup\npredicted_logits\nodds_ratio\nconditional_prob\n\n\n\n\nLow ACH, Low SES\n0.051\n1.053\n0.513\n\n\nLow ACH, High SES\n-1.702\n0.182\n0.154\n\n\nHigh ACH, Low SES\n-2.972\n0.051\n0.049\n\n\nHigh ACH, High SES\n-8.074\n0.000\n0.000\n\n\n\n\n\n\n\n\n\n\n\nImportante\n\n\n\nLos resultados de Osborne (2012) de la tabla 6 no son reproducibles para la primera fila de la tabla. En el articulo el autor reporta un logit esperado de 0.088; mientras que nosotros obtenemos un logit esperado de 0.051. Asumimos que la discrepancia es un error presente en el artículo original."
  },
  {
    "objectID": "logit_reg.html#plot-con-logits-esperados",
    "href": "logit_reg.html#plot-con-logits-esperados",
    "title": "Regresión logística en R",
    "section": "Plot con logits esperados",
    "text": "Plot con logits esperados\nCódigo 14. Tabla de valores predichos para Figura 2.\n\n# creamos tabla básica con los logits esperados\n1data_plot &lt;- data.frame(\nx_var = c('Low SES', 'High SES', 'Low SES','High SES'),\ny_var = c(e_logit_1, e_logit_2, e_logit_3, e_logit_4),\ngroup = c('Low ACH', 'Low ACH', 'High ACH','High ACH')\n)\n\n# reordenamos a los valores del factor ses\n2data_plot_figure_2 &lt;- data_plot %&gt;%\nmutate(ses_grp = as.factor(x_var)) %&gt;%\nmutate(ses_grp =\n  forcats::fct_relevel(ses_grp,c('Low SES', 'High SES'))\n  ) %&gt;%\n3mutate(ach_grp = as.factor(group)) %&gt;%\nmutate(ach_grp =\n  forcats::fct_relevel(ach_grp,c('Low ACH', 'High ACH'))\n  )        \n# mostrar la tabla generada\n4knitr::kable(data_plot_figure_2, digits = 3)\n\n\n1\n\nCon estas líneas nos encontramos generando la tabla de estimados, empleando el mismo método que hemos empleado en el Código 13, empleando directamente a la función data.frame.\n\n2\n\nSobre la misma tabla creada anteriormente, necesitamos crear una variable de tipo factor, de modo que podamos darle un orden discrecional a la manera en que se ordena el eje X de la figura 2. De lo contrario ggplot2 va colocar como primer valor al grupo que posea el nombre que aparece primero por orden alfabético. En este caso al grupo High SES.\n\n3\n\nProcedemos de la misma forma con la variable group. Esto nos permite darle el orden que deseemos a la legenda presente en la figura 2. En particular, queremos que Low ACH, aparezca primero, y luego aparezca High ACH en la legenda de los puntos y las líneas de figura 2.\n\n4\n\nFinalmente, con la última línea desplegamos la tabla creada con la función knitr::kable(), para inspeccionar si luce como esperamos.\n\n\n\n\n\n\n\nx_var\ny_var\ngroup\nses_grp\nach_grp\n\n\n\n\nLow SES\n0.052\nLow ACH\nLow SES\nLow ACH\n\n\nHigh SES\n-1.704\nLow ACH\nHigh SES\nLow ACH\n\n\nLow SES\n-2.972\nHigh ACH\nLow SES\nHigh ACH\n\n\nHigh SES\n-8.072\nHigh ACH\nHigh SES\nHigh ACH\n\n\n\n\n\nPara crear la figura 2 de la manera más similar posible a como aparece en el artículo, vamos a emplear la librería ggplot2 (Wicham, 2008; 2009). Esta es una librería que permite controlar diferentes aspectos de los gráficos o plots que uno desee construir. Por lo mismo, debido a que permite especificar una serie de parámetros para dibujar figuras basadas en datos, requiere que el usuario indique diferentes opciones. De esta manera, el costo de crear figuras de forma específica es que se empleen varias líneas de código. A continuación escribimos varias de estas líneas, y comentamos que se encuentra haciendo cada una.\nCódigo 15. Crear figura 2 con ggplot2\n\n# creamos la figura 2\nlibrary(ggplot2)\n1figure_2 &lt;- ggplot(data_plot_figure_2,\n2  aes(\n3    x = ses_grp,\n4    y = y_var,\n5    group = ach_grp,\n6    color = ach_grp,\n7    shape = ach_grp\n8    )) +\n9geom_line() +\n10geom_point(size=4) +\n11scale_color_manual(\n  values = c(\n    'High ACH' = 'red',\n    'Low ACH' = 'black'\n    )) +\n12scale_shape_manual(\n  values = c(\n    'High ACH' = 19,\n    'Low ACH' = 15\n    )) +\n13xlab('') +\n14scale_y_continuous(\n15  name = 'Logit (natural log of the odds of dropout)',\n16  breaks = seq(-9,1,1)\n17  ) +\n18theme_bw() +\n19theme(\n20  legend.title = element_blank(),\n21  panel.grid.major.x = element_blank(),\n22  panel.grid.minor.y = element_blank(),\n23  panel.grid.major.y =\n  element_line(linewidth = .25, colour = \"grey70\")\n  )\n\n# mostrar la figura 2\n24figure_2\n\n\n1\n\nLlamamos los datos creados anteriormente al objeto data_plot_figure_2, dentro de la función general ggplot().\n\n2\n\nAbrimos la función aes() para indicar que vectores de la tabla van a definir ciertos parámetros.\n\n3\n\nEn esta línea, indicamos que el eje x va a representar a los valores contenidos en ses_grp\n\n4\n\nEn esta línea, indicamos que el eje y va a representar a los valores contenidos en y_var. Esta variable o vector de valores, contiene a los logits esperados por el modelo.\n\n5\n\nEl argumento group toma los valores de la variale ach_grp de la tabla. Este nos sirve para que los puntos graficos puedan ser unidos por las líneas generadas por geom_line(). Si este línea fuera suprimida, solo graficaríamos puntos.\n\n6\n\nEl argumento color toma los valores de la variale ach_grp de la tabla. Esto nos sirve para posteriormente definir que colores debe tener las líneas y puntos generados. Estos los definimos posteriormente en la nota 11.\n\n7\n\nEl argumento shape toma los valores de la variale ach_grp de la tabla. Esto nos sirve para que especifiquemos que forma toma cada punto. Estos los definimos posteriormente en la nota 12.\n\n8\n\nEsta línea se incluye para cerrar al argumento aes(). Además, esta linea incluye al símbolo + para encadenar a las diferentes funciones. En algun sentido, esta lógica es un precursor a los %&gt;% presentes de modo general en la librería dplyr.\n\n9\n\ngeom_line() Es el argumento que le indica a ggplot() que vamos a dibujar líneas.\n\n10\n\ngeom_point() Es el argumento que le indica a ggplot() que ademas vamos a dibujar puntos.\n\n11\n\nscale_color_manual() nos permite indicar los colores que vamos a emplear para las lineas y puntos incluidos en la figura. En estas líneas indicamos que grupos toman que colores. Definimos que el grupo Low ACH tome el color negro, y que el grupo High ACH tome el color rojo.\n\n12\n\nscale_shape_manual() nos permite indicar que formas toda cada punto dibujado. La forma 19 corresponde a un círculo coloreado, y la forma 15 corresponde a un cuadrado coloreado.\n\n13\n\nEsta línea, nos permite suprimir al texto del eje x de la figura, por un espacio vacío.\n\n14\n\nscale_y_continuous nos permte definir el texto del eje y de la figura, además de como aparecen los números de este eje.\n\n15\n\nCon el subargumento name = indicamos que texto queremos que aparezca en el eje y.\n\n16\n\nCon el subargumento breaks = indicamos como queremos que aparezcan los números del eje y. Empleamos a la función seq(-9,1,1) para que se produzca un vector de 11 valores, desde -9 a 1. Esta es una función que nos permite generar todos los valores posibles entre los extremos -9 y 1, avanzando en una unida.\n\n17\n\nEsta línea cierra a la función scale_y_continuous, y continuar con los siguentes argumentos para producir a la figura de interés.\n\n18\n\nLa función theme_bw nos permite aplicar de forma general un tema o template genérico sencillo, el cual porsee defaults de blanco y negro. Existen diferentes opciones de este tipo, para aplicar diversos templates (ver: https://ggplot2.tidyverse.org/reference/ggtheme.html)\n\n19\n\nLa función theme() nos permite cambiar aspectos específicos de la estética de la figura. Existen diversos aspectos que podemos alterar (ver: https://ggplot2.tidyverse.org/reference/theme.html). A continuación, vamos a cambiar algunos aspectos como la leyenda, y las lineas que aparecen en el panel de fondo de la figura.\n\n20\n\nIncluimos legend.title = element_blank() para borrar al titulo de la leyenda de la figura.\n\n21\n\nIncluimos panel.grid.major.x = element_blank(), para eliminar las lineas verticales que aparecen en el panel de fondo de la figura.\n\n22\n\nIncluimos panel.grid.minor.y = element_blank(), para eliminar algunas lineas horizontales que aparecen por defecto en este tipo de plot. Lo que queremos lograr, es que nuestro plot se asemeje los más posible a la figura que aparece en el artículo.\n\n23\n\nEn el argumento panel.grid.major.y definimos el groso de las lineas horizontales junto a su color.\n\n24\n\nFinalmente, llamamos en consola a la figura que queremos mostrar."
  },
  {
    "objectID": "logit_reg.html#tabla-de-proporciones-observadas",
    "href": "logit_reg.html#tabla-de-proporciones-observadas",
    "title": "Regresión logística en R",
    "section": "Tabla de proporciones observadas",
    "text": "Tabla de proporciones observadas\nPara poder generar la figura 3 el autor realiza diversos pasos. Uno de ellos, es que necesita separar a los valores de la ZACH entre aquellos que se encuentran por sobre la media de desempeño, y los que se encuentran bajo la media de desempeño. Esencialmente, esta crear una variable dicotómica a partir de una variable continua. Vamos a crear esta variable discretizada con el siguiente código:\ndplyr::if_else(ZACH &gt; mean(ZACH),'High ACH','Low ACH'))\nAdemás, necesita agrupar a la variable zses en diferentes grupos, seguna secuencia compleja de rangos. Vamos crear una serie de valores discretos ordenados, segun la secuencia de rangos que genera el autor. Osborne (2012) esta agrupando todos los valores menores -3 de la variable zsez, y luego agrupa a todos los valores siguientes, en rangos de incrementos de .05. Finalmente, genera un último rango que agrupa a todos los valores sobre 2. Esta agrupación de valore de zses la vamos a generar con el siguiente código:\ncut(zses, breaks = c(-9, seq(-3, 2, .5), 9)))\nA continuación generamos el código que genera la tabla que podemos ocupar en ggplot2 para producir a la figura de interés.\nCódigo 16. Tabla de proporciones esperadas.\n\n# creamos tabla para figura 3\n1data_plot_figure_3 &lt;- data_nels %&gt;%\nmutate(ach_grp =\n  dplyr::if_else(ZACH &gt; mean(ZACH),'High ACH','Low ACH')\n  ) %&gt;%\n2mutate(ach_grp = as.factor(ach_grp)) %&gt;%\n3mutate(ach_grp =\n  forcats::fct_relevel(ach_grp,c('Low ACH', 'High ACH'))\n  ) %&gt;%\n4mutate(ses_grp =\n  cut(zses, breaks = c(-9, seq(-3, 2, .5), 9))\n  ) %&gt;%\n5group_by(ses_grp, ach_grp) %&gt;%\n6summarize(\n7n = n(),\n8droput_prob = mean(dropout, na.rm = TRUE),\n9median_ses = median(zses, na.rm = TRUE)\n10) %&gt;%\n11arrange(ses_grp) %&gt;%\n12mutate(ses_txt = case_when(\nses_grp == '(-9,-3]'   ~ '&lt; -3',\nses_grp == '(-3,-2.5]' ~ '-2.5',\nses_grp == '(-2.5,-2]' ~ '-2.0',\nses_grp == '(-2,-1.5]' ~ '-1.5',\nses_grp == '(-1.5,-1]' ~ '-1.0',\nses_grp == '(-1,-0.5]' ~ '-0.5',\nses_grp == '(-0.5,0]'  ~ ' 0.0',\nses_grp == '(0,0.5]'   ~ ' 0.5',\nses_grp == '(0.5,1]'   ~ ' 1.0',\nses_grp == '(1,1.5]'   ~ ' 1.5',\nses_grp == '(1.5,2]'   ~ ' 2.0',\nses_grp == '(2,9]'     ~ '&gt;2+'\n)) %&gt;%\n13mutate(ses_fct = forcats::as_factor(ses_txt))   %&gt;%\n14ungroup()\n\n# muestra de tabla de figura 3\n15data_plot_figure_3 %&gt;%\narrange(ach_grp, ses_fct) %&gt;%\nknitr::kable(., digits = 2)\n\n\n1\n\nPrimero creamos clasificamos los valores de ZACH, mediante una función de if_else. Esta función nos permite clasificar a los estudiantes como alto y bajo desempeño académico, según se encuentren por sobre o bajo la media del conjunto de estudiantes incluidos en los datos.\n\n2\n\nLuego, convertimos la variable anterior a una variable tipo factor. Esto es importante para, al igual que en la figura anterior, tengamos control sobre que orden de presentación toman los valores graficados.\n\n3\n\nAplicamos la función forcats::fct_relevel para brindar el orden que queremos sobre el factor generado anteriormente.\n\n4\n\nEmpleamos a la función cut(), de modo de clasificar todos los valores observados en la variable zses en los rangos deseados. Los rangos deseados los definimos con el vector c(-9, seq(-3, 2, .5), 9))\n\n5\n\nAgrupamos los datos, de modo obtener las probabilidades observadas por los factores de interés.\n\n6\n\nLa función summarize() nos permite generar descriptivos que se entregan en formato tabla, sobre los datos agrupados por los factores definidos.\n\n7\n\nCalculamos la cantidad de observaciones de cada grupo.\n\n8\n\nCalculamos la probabilidad observada de deserción para cada grupo definido, por el cruce de los factores definidos. Es decir, que obtenemos la proporción de estudiantes que presenta valores 1, en la variable droput, segun los valores de los factores ses_grp y ach_grp definidos previamente.\n\n9\n\nSolo para tener diagnóstico, tambien calculamos la mediana de zses por celda.\n\n10\n\nCerramos a la función summarize().\n\n11\n\nOrdenamos a la tabla, segun los valores de ses_grp. Esto es iportante porque queremos convertir a esta variable en un factor ordenado en un paso ulterior.\n\n12\n\nCreamos el vector de nombres de la variable ses_txt segun los rangos generados por cut(), Le daremos el nombre del limite superior de cada rango, empleando los mismos nombres que emplea Osborne (2012) en la figura 3.\n\n13\n\nCreamos la variable factor ses_fct, la cual toma el mismo orden generado en el paso 11.\n\n14\n\nDesagrupamos los datos generados.\n\n15\n\nMostramos como se ve la tabla generada.\n\n\n\n\n\n\n\nses_grp\nach_grp\nn\ndroput_prob\nmedian_ses\nses_txt\nses_fct\n\n\n\n\n(-9,-3]\nLow ACH\n6\n0.50\n-3.56\n&lt; -3\n&lt; -3\n\n\n(-3,-2.5]\nLow ACH\n30\n0.33\n-2.73\n-2.5\n-2.5\n\n\n(-2.5,-2]\nLow ACH\n226\n0.35\n-2.14\n-2.0\n-2.0\n\n\n(-2,-1.5]\nLow ACH\n811\n0.30\n-1.67\n-1.5\n-1.5\n\n\n(-1.5,-1]\nLow ACH\n1324\n0.23\n-1.24\n-1.0\n-1.0\n\n\n(-1,-0.5]\nLow ACH\n1701\n0.16\n-0.74\n-0.5\n-0.5\n\n\n(-0.5,0]\nLow ACH\n1786\n0.11\n-0.25\n0.0\n0.0\n\n\n(0,0.5]\nLow ACH\n1493\n0.09\n0.21\n0.5\n0.5\n\n\n(0.5,1]\nLow ACH\n890\n0.06\n0.70\n1.0\n1.0\n\n\n(1,1.5]\nLow ACH\n406\n0.04\n1.21\n1.5\n1.5\n\n\n(1.5,2]\nLow ACH\n120\n0.02\n1.67\n2.0\n2.0\n\n\n(2,9]\nLow ACH\n22\n0.00\n2.15\n&gt;2+\n&gt;2+\n\n\n(-3,-2.5]\nHigh ACH\n1\n0.00\n-2.59\n-2.5\n-2.5\n\n\n(-2.5,-2]\nHigh ACH\n22\n0.00\n-2.18\n-2.0\n-2.0\n\n\n(-2,-1.5]\nHigh ACH\n117\n0.15\n-1.66\n-1.5\n-1.5\n\n\n(-1.5,-1]\nHigh ACH\n326\n0.10\n-1.20\n-1.0\n-1.0\n\n\n(-1,-0.5]\nHigh ACH\n761\n0.05\n-0.70\n-0.5\n-0.5\n\n\n(-0.5,0]\nHigh ACH\n1215\n0.03\n-0.20\n0.0\n0.0\n\n\n(0,0.5]\nHigh ACH\n1443\n0.02\n0.26\n0.5\n0.5\n\n\n(0.5,1]\nHigh ACH\n1517\n0.01\n0.74\n1.0\n1.0\n\n\n(1,1.5]\nHigh ACH\n1362\n0.00\n1.24\n1.5\n1.5\n\n\n(1.5,2]\nHigh ACH\n832\n0.00\n1.71\n2.0\n2.0\n\n\n(2,9]\nHigh ACH\n199\n0.00\n2.14\n&gt;2+\n&gt;2+"
  },
  {
    "objectID": "logit_reg.html#figura-con-proporciones-observadas",
    "href": "logit_reg.html#figura-con-proporciones-observadas",
    "title": "Regresión logística en R",
    "section": "Figura con proporciones observadas",
    "text": "Figura con proporciones observadas\nPara crear la figura 3, empleamos en gran medida el código empleado para crear a la figura 2, presente en el Código 15. No obstante, sobre este código debemos cambiar algunas especificaciones. A continuación anotamos las líneas críticas que hemos cambiado.\nCódigo 17. Figura 3 con proporciones observadas.\n\n# creamos la figura 3\nlibrary(ggplot2)\nfigure_3 &lt;- ggplot(data_plot_figure_3,  \n  aes(                                  \n1    x = ses_fct,\n    y = droput_prob,                    \n    group = ach_grp,                    \n    color = ach_grp,                    \n    shape = ach_grp                     \n    )) +                                \ngeom_line() +                           \ngeom_point(size=4) +                    \nscale_color_manual(                     \n  values = c(                           \n    'High ACH' = 'red',                 \n    'Low ACH' = 'black'                 \n    )) +                                \nscale_shape_manual(                     \n  values = c(                           \n    'High ACH' = 19,                    \n    'Low ACH' = 15                      \n    )) +                                \n2xlab('Family SES (zscore)') +\n3scale_y_continuous(\n  name = 'Observed percentages of dropout',\n  breaks = seq(0,1,.05)\n  ) +\ntheme_bw() +                             \ntheme(                                   \n  legend.title = element_blank(),        \n  panel.grid.major.x = element_blank(),  \n  panel.grid.minor.y = element_blank(),  \n  panel.grid.major.y =                               \n  element_line(linewidth = .25, colour = \"grey70\")   \n  )                                                  \n\n# mostrar la figura 2\n4figure_3\n\n\n1\n\nEn el eje x, incluimos a la variable ses_fct que creamos anteriormente.\n\n2\n\nAgregamos el texto del eje x.\n\n3\n\nEn el argumento scale_y_continuous le damos el nombre al eje y, y especificamos los valores queremos que se muestren.\n\n4\n\nEscribimos en consola al nombre del objeto de la figura, figure_3 para la figura generada sea mostrada."
  },
  {
    "objectID": "logit_reg.html#tabla-de-proporciones-esperadas",
    "href": "logit_reg.html#tabla-de-proporciones-esperadas",
    "title": "Regresión logística en R",
    "section": "Tabla de proporciones esperadas",
    "text": "Tabla de proporciones esperadas\nEn la siguiente sección vamos a emplear el codigo que genera la tabla de logits esperados, generada en el Código 14, y además vamos a convertir estos logits es probabilidades condicionales. Para estos propósitos vamos a emplear la siguiente formula:\n\\[Pr(y = 1) = \\frac{1}{1 + \\exp(-\\hat{\\beta}_{0})}\\]\nCódigo 18. Tabla de valores predichos para Figura 2.\n\n# creamos tabla básica con los logits esperados\n1data_plot &lt;- data.frame(\nx_var = c('Low SES', 'High SES', 'Low SES','High SES'),\ny_var = c(e_logit_1, e_logit_2, e_logit_3, e_logit_4),\ngroup = c('Low ACH', 'Low ACH', 'High ACH','High ACH')\n)\n\n# reordenamos a los valores del factor ses\n2data_plot_figure_4 &lt;- data_plot %&gt;%\nmutate(ses_grp = as.factor(x_var)) %&gt;%\nmutate(ses_grp =\n  forcats::fct_relevel(ses_grp,c('Low SES', 'High SES'))\n  ) %&gt;%\n3mutate(ach_grp = as.factor(group)) %&gt;%\nmutate(ach_grp =\n  forcats::fct_relevel(ach_grp,c('Low ACH', 'High ACH'))\n  ) %&gt;%\n4mutate(expected_prob = 1/(1+(exp(-y_var))))\n# mostrar la tabla generada\n5knitr::kable(data_plot_figure_4, digits = 3)\n\n\n1\n\nCon estas líneas nos encontramos generando la tabla de estimados, empleando el mismo método que hemos empleado en el Código 13, empleando directamente a la función data.frame.\n\n2\n\nSobre la misma tabla creada anteriormente, necesitamos crear una variable de tipo factor, de modo que podamos darle un orden discrecional a la manera en que se ordena el eje X de la figura 2. De lo contrario ggplot2 va colocar como primer valor al grupo que posea el nombre que aparece primero por orden alfabético. En este caso al grupo High SES.\n\n3\n\nProcedemos de la misma forma con la variable group. Esto nos permite darle el orden que deseemos a la legenda presente en la figura 2. En particular, queremos que Low ACH, aparezca primero, y luego aparezca High ACH en la legenda de los puntos y las líneas de figura 2.\n\n4\n\nAplicamos la formula de conversión de logits esperados a probabilidades condicionales \\(Pr(y = 1) = \\frac{1}{1 + \\exp(-\\hat{\\beta}_{0})}\\)\n\n5\n\nFinalmente, con la última línea desplegamos la tabla creada con la función knitr::kable(), para inspeccionar si luce como esperamos.\n\n\n\n\n\n\n\nx_var\ny_var\ngroup\nses_grp\nach_grp\nexpected_prob\n\n\n\n\nLow SES\n0.052\nLow ACH\nLow SES\nLow ACH\n0.513\n\n\nHigh SES\n-1.704\nLow ACH\nHigh SES\nLow ACH\n0.154\n\n\nLow SES\n-2.972\nHigh ACH\nLow SES\nHigh ACH\n0.049\n\n\nHigh SES\n-8.072\nHigh ACH\nHigh SES\nHigh ACH\n0.000"
  },
  {
    "objectID": "logit_reg.html#figura-con-proporciones-esperadas",
    "href": "logit_reg.html#figura-con-proporciones-esperadas",
    "title": "Regresión logística en R",
    "section": "Figura con proporciones esperadas",
    "text": "Figura con proporciones esperadas\nCódigo 19. Crear figura 4 con ggplot2\n\n# creamos la figura 2\nlibrary(ggplot2)\n1figure_4 &lt;- ggplot(data_plot_figure_4,\n  aes(                                  \n    x = ses_grp,                        \n2    y = expected_prob,\n    group = ach_grp,                    \n    color = ach_grp,                    \n    shape = ach_grp                     \n    )) +                                \ngeom_line() +                           \ngeom_point(size=4) +                    \nscale_color_manual(                     \n  values = c(                           \n    'High ACH' = 'red',                 \n    'Low ACH' = 'black'                 \n    )) +                                \nscale_shape_manual(                     \n  values = c(                           \n    'High ACH' = 19,                    \n    'Low ACH' = 15                      \n    )) +                                \n3xlab('Family SES (zscore)') +\n4scale_y_continuous(\n  name = 'Probability of dropping out',\n  breaks = seq(0,1,.1),\n  limits = c(0,.6)\n  ) +                                    \ntheme_bw() +                             \ntheme(                                   \n  legend.title = element_blank(),        \n  panel.grid.major.x = element_blank(),  \n  panel.grid.minor.y = element_blank(),  \n  panel.grid.major.y =                              \n  element_line(linewidth = .25, colour = \"grey70\")  \n  )                                                 \n\n# mostrar la figura 2\n5figure_4\n\n\n1\n\nLlamamos la tabla de datos con las probabilidades condicionales data_plot_figure_4.\n\n2\n\nEspecificamos al vector con los valores de probabilidades condicionales expected_prob.\n\n3\n\nAgregamos el texto que aparece en el eje x.\n\n4\n\nCambiamos el titulo del eje y, y especificamos los valores que queremos mostrar en este eje.\n\n5\n\nLlamamos a la figura_4 en consola, para mostrar a la figura resultante."
  },
  {
    "objectID": "logit_reg.html#figuras-comparadas",
    "href": "logit_reg.html#figuras-comparadas",
    "title": "Regresión logística en R",
    "section": "Figuras comparadas",
    "text": "Figuras comparadas\nPara hacer más explicito el punto de Osborne (2012) vamos a comparar lado a lado las figuras 2 y 4.\n\n# reorganizar las figuras generadas\nplot_in_wide &lt;- cowplot::plot_grid(\n  cowplot::plot_grid(\n    figure_2 + \n      ggtitle('Plot en\\nlogits esperados') + \n      theme(legend.position = 'none'),\n    figure_4 + \n      ggtitle('Plot en\\nprobabilidades condicionales') + \n      theme(legend.position = 'none'),\n    ncol=2, nrow = 1\n  ),\n  cowplot::get_legend(\n    figure_2 + \n    theme(legend.position = \"bottom\")\n    ),\n    ncol=1, rel_heights=c(.95, .05)\n  )\n\nWarning in get_plot_component(plot, \"guide-box\"): Multiple components found;\nreturning the first one. To return all, use `return_all = TRUE`.\n\n# mostrar a las figuras generadas\nplot_in_wide\n\n\n\n\n\n\n\n\nEn el caso de la figura generada con los logits esperados podriamos concluir que la diferencia entre los estudiantes de alto nivel socioeconómico segun su desempeño académico (alto y bajo) es donde diferencias de mayor tamaño. Lo anterior, porque la distancia en logits, entre los “High SES” de “High ACH” y de “Low ACH” es más grande que entre los “Low SES”. En contraste, en la figura que emplea a las probabilidades condicionales la diferencia de mayor tamaño se observa entre los estudiantes de nivel socioeconómico bajo (“Low SES”), condicional a su desempeño académico (“High ACH” vs. “Low ACH”).\nOsborne (2012) compara puntos esperados esperados generados con un modelo de regresión logística, en escala de probabilidad para ilustrar la interacción entre ZACH:zses. Obtiene estos resultados esperados en escala de probabilidad esperada, condiciona a ciertos valores especificados, a -2SD y +2SD para cada factor. Esta aplicación, es un caso especial de un efecto marginal a valores específicos (marginal effects at representative values, ver Heiss, 2022)."
  },
  {
    "objectID": "logit_reg.html#sobre-la-comunicación-de-resultados",
    "href": "logit_reg.html#sobre-la-comunicación-de-resultados",
    "title": "Regresión logística en R",
    "section": "Sobre la comunicación de resultados",
    "text": "Sobre la comunicación de resultados\nCuando las diferencias de distancias entre estimados, o puntos generados por un modelo no son equivalentes entre escalas, la escala de logits (log odds) y la escala de probabilidades (porcentajes, proporciones), se habla de que los estimados no son invariantes a sus conversiones a otraas escalas. Un escenario similar ocurre con los modelos de regresión lineal, cuando se interpretan los coeficientes estandarizados, en contraste a los coeficientes no estandarizados. Hay casos límite en que las diferencias por sobre cero, se observan en una escala, pero no en otra. De esta forma es importante ser consistentes con la cifra empleada para realizar las inferencias. Es decir, si la afirmación de que dos variables se encuentran relacionadas, o si dos grupos son diferentes respecto a una variable de respuesta, es importante indicar que estamos emplando para concluir que hay una relación o diferentes de interés (e.g., logits, probabilidades condicionales, odds ratio u otra cifra).\nDebido a que los estimados en logits, y en odds ratio no son necesariamente comparables entre modelos ajustados (Mood, 2010), es común que en la comunicación de resultados de modelos de regresión logística se recurra a otras formas de ilustrar el tamaño de los efectos esperados, como por ejemplo presentar resultados en escala de respuesta, i.e., en porcentajes esperados. Producir indicadores de tamaño de efecto con estimados modelos de regresión logística, otros modelos generalizados, posee diferentes alternativas, y no todas estas implican a los mismos resultados que los lectores tienden a suponer (Hanmer, et al, 2013; Heiss, 2022; Mood, 2010; Muller et al., 2014). Dee esta forma la comunicación de resultados de modelos de regresión logística requiere que los investigadores guarden consideración a los propósitos de la investigación en curso, y las características que las diferentes formas de presentar relaciones y diferencias posen según el modelo empleado.\nEl uso de los probabilidades condicionales a valores particulares de las variables de interés, es una forma de presentar resultados entre otras alternativas."
  },
  {
    "objectID": "logit_reg.html#anexo-1-interacción",
    "href": "logit_reg.html#anexo-1-interacción",
    "title": "Regresión logística en R",
    "section": "Anexo 1: interacción",
    "text": "Anexo 1: interacción\n\nInteracción empleando var_1:var_2\n\n# modelo de regresión logística con un predictor binario\nglm(dropout ~ ZACH + zses + ZACH:zses, \n  data = data_nels, \n  family = \"binomial\") %&gt;%                                          \nbroom::tidy()  %&gt;%                                                  \nmutate(odds_ratio = exp(estimate))  %&gt;%                             \nknitr::kable(., digits = 3)                                         \n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\nodds_ratio\n\n\n\n\n(Intercept)\n-3.174\n0.054\n-58.817\n0\n0.042\n\n\nZACH\n-1.174\n0.055\n-21.436\n0\n0.309\n\n\nzses\n-0.857\n0.054\n-15.863\n0\n0.424\n\n\nZACH:zses\n-0.209\n0.051\n-4.074\n0\n0.811\n\n\n\n\n\n\n\nInteracción empleando var_1*var_2\n\n# modelo de regresión logística con un predictor binario\nglm(dropout ~ ZACH + zses + ZACH:zses, \n  data = data_nels, \n  family = \"binomial\") %&gt;%                                          \nbroom::tidy()  %&gt;%                                                  \nmutate(odds_ratio = exp(estimate))  %&gt;%                             \nknitr::kable(., digits = 3)                                         \n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\nodds_ratio\n\n\n\n\n(Intercept)\n-3.174\n0.054\n-58.817\n0\n0.042\n\n\nZACH\n-1.174\n0.055\n-21.436\n0\n0.309\n\n\nzses\n-0.857\n0.054\n-15.863\n0\n0.424\n\n\nZACH:zses\n-0.209\n0.051\n-4.074\n0\n0.811\n\n\n\n\n\n\n\nInteracción empleando mutate(int = var_1*var_2)\n\n# modelo de regresión logística con un predictor binario\ndata_nels %&gt;%\nmutate(int = ZACH*zses) %&gt;%\nglm(dropout ~ ZACH + zses + int, \n  data = ., \n  family = \"binomial\") %&gt;%                                          \nbroom::tidy()  %&gt;%                                                  \nmutate(odds_ratio = exp(estimate))  %&gt;%                             \nknitr::kable(., digits = 3)                                         \n\n\n\n\nterm\nestimate\nstd.error\nstatistic\np.value\nodds_ratio\n\n\n\n\n(Intercept)\n-3.174\n0.054\n-58.817\n0\n0.042\n\n\nZACH\n-1.174\n0.055\n-21.436\n0\n0.309\n\n\nzses\n-0.857\n0.054\n-15.863\n0\n0.424\n\n\nint\n-0.209\n0.051\n-4.074\n0\n0.811"
  },
  {
    "objectID": "untitled.html",
    "href": "untitled.html",
    "title": "Interacción entre variables",
    "section": "",
    "text": "Cuando estudiamos las relaciones de covariables con respecto a una variable de respuesta existe un escenario particular, donde las relaciones pueden no ser constantes. Es decir, que la relación de una covariable con respecto a la variable de respuesta, puede aumentar, o disminuir con respecto a los valores de una tercera variable.\nEn la investigación educación existen diversas aplicaciones donde este escenario es de interés:\n\n\npodemos estar interesados en buscar factores protectores para la brecha socioeconómica de los resultados académicos de los estudiantes.\n\n\npodemos estar evaluando el efecto de un programa de intervención, y tener dudas razonables respecto a si el programa es efectivo para todos los estudiantes.\n\n\npodemos estar estudiando cómo funciona una práctica escolar, y podríamos querer saber si opera de forma compensatoria con respecto a los estudiantes más vulnerables.\n\n\npodemos estar estudiando cómo funciona una práctica escolar, y podríamos querer evaluar si la práctica es igual de beneficiosa para estudiantes hombres y mujeres.\n\n\npodríamos estar interesados en sí la introducción de incentivos salariales para profesores en escuelas vulnerables promueve la retención de profesores en estas escuelas (a niveles similares al resto de las escuelas).\n\n\nEn todos los ejemplos anteriores podemos separar nuestras expectativas de resultados en al menos dos elementos:\n\n\ntenemos una relacion principal entre dos variables (la variable de respuesta, y una covariable).\n\n\nqueremos ver si esta relación principal cambia segun un tercer factor\n\n\nUna herramienta que nos sirve para estudiar si la relación entre dos variable cambia en relación a un tercer factor son las interacciones entre variables. Esta herramienta nos permite evaluar si una relación de interés entre dos variables es constante o no, a los valores de una tercera variable. Este tipo de modelos es muy común en el estudio de efectividad escolar, en el estudio de evaluación de programas, y en el estudio general de inequidad escolar."
  },
  {
    "objectID": "untitled.html#medias-condicionadas",
    "href": "untitled.html#medias-condicionadas",
    "title": "Interacción entre variables",
    "section": "Medias condicionadas",
    "text": "Medias condicionadas\nLos modelos de regresión los podemos pensar como modelos de medias condicionadas. En términos gráficos nos tenemos que imaginar que tenemos una media y condicional a los valores de otro atributo la media de la variable de respuesta puede tomar diferentes valores o posiciones.\nComencemos con un ejemplo de tres variables. Supongamos que tenemos los puntajes de un test que expresa habilidad matemática (e.g., capacidad de resolución de problemas matemáticos de sexto grado), y denominemos a este puntaje como \\(y_{i}\\). Que un modelo de regresión sea pensado como un modelo de medias condicionadas, nos permite indicar que podemos expresar diferentes puntos del puntaje total anterior, segun los valores de otras covariables (i.e., condicional a…). Por ejemplo, que contamos con la escolaridad de los padres de los estudiantes, para los cuales tenemos los puntajes de habilidad. Empleemos a la variable \\(x_{i}\\) para alojar a los valores de escolaridad de los padres (e.g., 1 para educación terciaria, y 0 para grados educativos menores a la educación terciaria.). Y finalmente, agreguemos un tercer factor: la dependencia de la escuelas a las que asisten los estudiantes. Designemos esta tercera variable mediante \\(w_{i}\\), y para este ejemplo vamos a emplear los valores cero para las escuelas públicas, y los valores uno para los estudiantes que asisten a escuelas privadas.\nPara ilustrar la idea de las medias condicionadas, comencemos con un escenario sencillo. En este primer escenario vamos a imaginarnos que no hay diferencias ni por la escolaridad de los padres de los estudiantes, y que tampoco hay diferencias condicional a la escuela a la que asisten los estudiantes. En este escenario, lo más informativo de los puntajes observados sería la media de los puntajes de matemáticas. Vamos a dejar este punto de referencia en 700 puntos.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*0  , # b1\n    b2*0  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_1 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_1 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 1: sin diferencias\n\n\n\nEn este primer escenario, formalmente estamos planteando que las medias de los cuatro grupos posibles son similares entre sí. Y por tanto, que hay diferencias o desplazamientos de la media grupal, condicional a los valores de los factores de interés ( \\(x_{i}\\) y \\(w_{i}\\)).\nAhora nos vamos imaginarnos un segundo escenario. En este segundo escenario, solo vamos a tener diferencias por la escolaridad de los padres de los estudiantes, pero nos vamos a imaginar que no hay diferencias condicionales a las escuela a la que asisten los estudiantes. De esta forma, la brecha de puntajes entre estudiantes con padres de diferente escolaridad, no varía según al tipo de escuela a la que asisten.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*0  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_2 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_2 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 2: solo diferencias respecto a x\n\n\n\nEn este segundo escenario solo tenemos una relación principal. Los valores de los puntajes de matemáticas ( \\(y_{i}\\) ), varían condicional a los valores de \\(x_{i}\\); pero no varían segun los valores de \\(w_{i}\\).\nSigamos con el ejemplo, e imaginemos un tercer escenario. En este escenario vamos a incluir efectos principales para cada covariable, o relaciones de interés para cada factor. En este escenario aun no estamos incluyendo una interacción. Esto nos permitirá obtener medias condicionales para los cuatro grupos posibles:\n\nestudiantes hijos de padres sin educación terciaria, que asisten a escuelas públicas\nestudiantes hijos de padres sin educación terciaria, que asisten a escuelas privadadas\nestudiantes hijos de padres con educación terciaria, que asisten a escuelas públicas\nestudiantes hijos de padres con educación terciaria, que asisten a escuelas privadadas\n\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_3 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_3 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 3: diferencias respecto a x y w, pero sin interacción\n\n\n\nEn este tercer escenario las medias se desplazan respecto al punto de referencia inicial, el intercepto. Este desplazamiento ocurre tanto condicional a los valores de \\(x_{i}\\), como condicional a los valores de \\(w_{i}\\). Los estudiantes hijos de padres sin educación terciara presentan medias menores, en contraste a sus pares que asisten a escuelas privadas. En este escenario, observamos diferencias similares, entre los estudiantes hijos de padres con educación terciara. Aquellos que asisten a escuelas privadas, presentan medias de mayor tamaño, en contraste a sus pares que asisten a escuelas públicas.\nAhora, nos vamos a imginar un cuarto escenario, donde incluímos una interacción entre ambas variables: entre la escolaridad de los padres, y el tipo de escuela al que asisten los estudiantes.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*-1    # b3\n    )\n)\n\ndata_example_4 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_4 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 4: diferencias respecto a x y w, y una interacción negativa\n\n\n\nEn este cuarto escenario la brecha entre estudiantes que asiste a escuelas públicas y privadas no posee el mismo tamaño. Entre los estudiantes hijos de padres con escolaridad terciara no se observan diferencias de medias; mientras que entre los estudiantes hijos de padres son educación terciaria observamos una diferencia de 100 puntos.\nFinalmente, en un quinto escenario, vamos a incluir una interacción, pero esta interacción toma una dirección diferente. Mientras en el escenario anterior lo que observabamos condiciones donde la brecha en puntajes de matemáticas entre estudiantes hijos de padres de diferente escolaridad, era nula entre escuelas privadas, y solo se observada entre escuelas públicas; ahora vamos imaginarnos un escenario inverso. En este escenario inverso, vamos a incluir una interacción tal, que la brecha entre los estudiantes, producto de la escolaridad de sus padres es de mayor tamaño entre quieres asisten a escuelas privadas, en contraste entre quienes asisten a escuelas públicas.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*1    # b3\n    )\n)\n\ndata_example_5 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_5 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 5: diferencias respecto a x y w, y una interacción positiva\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nDe los cinco escenarios revisados, solo dos de ellos incluyen un efecto de interacción, el escenario 4 y 5. En estos escenarios los la brecha o relación entre \\(y_{i}\\) y \\(x_{i}\\) varía segúm los valores de \\(w_{i}\\). Mientras en el escenario 4 la brecha entre \\(y_{i}\\) y \\(x_{i}\\) se hace mas pequeña al aumentar los valores de \\(w_{i}\\); en el escenario 5 la brecha entre \\(y_{i}\\) y \\(x_{i}\\) es de mayor tamaño al aumentar los valores de \\(w_{i}\\) (de público \\(w_{i} = 0\\) a privado \\(w_{i} = 1\\)).\n\n\nA continuación, vamos a representar de manera formal a los escenarios anteriores."
  },
  {
    "objectID": "untitled.html#estimados-de-los-escenarios-revisados",
    "href": "untitled.html#estimados-de-los-escenarios-revisados",
    "title": "Interacción entre variables",
    "section": "Estimados de los escenarios revisados",
    "text": "Estimados de los escenarios revisados\nCon el modelo anterior y definiendo a los términos \\(\\beta_{0}\\), \\(\\beta_{1}\\), \\(\\beta_{2}\\) y \\(\\beta_{3}\\) generamos los datos de cada uno de los escenarios anteriores. Es decir que, produjimos datos simulados para representar diferentes posibilidades.\nEscenario 1: sin diferencias\n\\[y_{i} = 700 + 0*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 2: solo diferencias por escolaridad.\n\\[y_{i} = 700 + 100*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 3: efectos principales sin interacción\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 4: interacción negativa\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} - 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 5: interacción positiva\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nA continuación vamos a ajustar modelos de regresión sobre los datos generados que constituyen a los escenarios 1 a 5. Como los datos simulados solo incluyen a una realización del modelo o mecanismo generador de datos, los resultados obtenidos van a ser muy parecidos a los modelos definidos, pero no exactamente iguales. Estos ejericio nos servirá para ilustrar como los términos del modelo de regresión anterior se vinculan con las medias esperadas que fueron graficas con las figuras anteriores.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nm01 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_1)\nm02 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_2)\nm03 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_3)\nm04 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_4)\nm05 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_5)\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\ntexreg::screenreg(list(m01, m02, m03, m04, m05), \n  star.symbol = \"*\", \n  center = TRUE, \n  doctype = FALSE,\n  dcolumn = TRUE, \n  booktabs = TRUE,\n  single.row = FALSE,\n  custom.model.names = c('E1','E2','E3','E4','E5'))\n\n\n============================================================================\n             E1           E2           E3           E4           E5         \n----------------------------------------------------------------------------\n(Intercept)   699.14 ***   699.14 ***   699.14 ***   699.14 ***   699.14 ***\n               (2.32)       (2.32)       (2.32)       (2.32)       (2.32)   \nx               0.81       100.81 ***   100.81 ***   100.81 ***   100.81 ***\n               (3.35)       (3.35)       (3.35)       (3.35)       (3.35)   \nw              -0.80        -0.80        99.20 ***    99.20 ***    99.20 ***\n               (3.29)       (3.29)       (3.29)       (3.29)       (3.29)   \nx:w             2.02         2.02         2.02       -97.98 ***   102.02 ***\n               (4.71)       (4.71)       (4.71)       (4.71)       (4.71)   \n----------------------------------------------------------------------------\nR^2             0.00         0.29         0.46         0.24         0.66    \nAdj. R^2       -0.00         0.29         0.46         0.24         0.66    \nNum. obs.    4500         4500         4500         4500         4500       \n============================================================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "untitled.html#medias-esperadas-empleando-a-los-resultados-del-modelo-de-regresión",
    "href": "untitled.html#medias-esperadas-empleando-a-los-resultados-del-modelo-de-regresión",
    "title": "Interacción entre variables",
    "section": "Medias esperadas empleando a los resultados del modelo de regresión",
    "text": "Medias esperadas empleando a los resultados del modelo de regresión\nLa idea general es que con la ecuación de regresión anterior podemos producir valores. Podemos tanto producir valores esperados, como las medias esperadas de los grupos, como los valores esperados por el modelo. Nos vamos a enfocar en las medias esperadas de cada grupo. Ordenando los diferentes términos de la regresión general con interacción podemos obtener las medias esperadas de cada uno de los grupos implicados por ambos factores.\n\nMedia de estudiantes con padres de escolaridad menor a terciaria, que asisten a escuelas públicas\n\n\\(E(\\bar{y} | x_{i} = 0, w_{i} = 0) = \\beta_{0} + \\beta_{1}*0 + \\beta_{2}*0 + \\beta_{3}*0*0\\)\n\nMedia de estudiantes con padres de escolaridad menor a terciaria, que asisten a escuelas privadas\n\n\\(E(\\bar{y} | x_{i} = 0, w_{i} = 1) = \\beta_{0} + \\beta_{1}*0 + \\beta_{2}*1 + \\beta_{3}*0*1\\)\n\nMedia de estudiantes con padres de escolaridad terciaria, que asisten a escuelas públicas\n\n\\(E(\\bar{y} | x_{i} = 1, w_{i} = 0) = \\beta_{0} + \\beta_{1}*1 + \\beta_{2}*0 + \\beta_{3}*1*0\\)\n\nMedia de estudiantes con padres de escolaridad terciaria, que asisten a escuelas privadas\n\n\\(E(\\bar{y} | x_{i} = 1, w_{i} = 1) = \\beta_{0} + \\beta_{1}*1 + \\beta_{2}*1 + \\beta_{3}*1*1\\)\nDiagrama Conceptual\nDiagrama de vías\nDescriptivamente, podemos calcular las medias de ambos grupos de estudiantes, y ademas, podríamos calcular la diferencia de medias entre ambos grupos, y con lo anterior tener una noción de si los estudiantes difieren en sus puntajes condicional a la escolaridad de sus padres.\nAhora, podemos abordar la misma inquietud empleando un modelo de regresión:\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\epsilon_{i}\\]\nDonde,\n\n\\(y_{i}\\) = puntaje total de cada estudiante \\(_{i}\\).\n\\(x_{i}\\) = escolaridad máxima de los padres de cada estudiante \\(_{i}\\).\n\nCon los resultados de un modelo de regresión como el anterior podemos obtener las medias esperadas de cada grupo:\n\nMedia de estudiantes con padres de escolaridad menor a terciaria\n\n\\(\\beta_{0} + \\beta_{1}(x_{i} = 0)\\)\n\nMedia de estudiantes con padres de escolaridad terciaria\n\n\\(\\beta_{0} + \\beta_{1}(x_{i} = 1)\\)\n¿Que pasaría sin incluimos una tercera variable? Si tuvieramos la información de una tercera variable, dado que estamos pensando el modelo de regresión como una forma de expresar medias condicionadas, es que entonces podriamos tener otra diferencia adicional entre grupos. Pensemos en una tercera covariable como la dependencia de la escuelas (e.g., Privadas y Públicas). Para efectos del ejemplo, pensemos que las escuelas privadas toman un valor uno, y las escuelas públicas toman un valor cero.\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\beta_{2}w_{i} + \\epsilon_{i}\\]\n\n\n\\(w_{i}\\) = tipo de escuela a la que asisten a los estudiantes \\(_{i}\\), donde 1 son escuelas privadas, y 0 son escuelas públicas.\n\nCon el modelo anterior, solo podemos representar (i.e., asumir) que las medias entre los grupos aumentan o disminuyen con respecto a al intercepto ( \\(\\beta_{0}\\) ), condicional a los valores de \\(x_{i}\\) (i.e. la escolaridad máxima de los padres) y condicional a los valores de \\(w_{i}\\) (i.e., la dependencia administrativa de la escuelas).\nPara poder representar que las medias anteriores son condicionales entre sí o que interactúan, necesitamos incluir un término adicional: el múltiplo de las variables \\(x_{i}\\) e \\(w_{i}\\), es decir \\(x_{i}*w_{i}\\). Este término nos permitirá obtener un coeficiente de regresión adicional, el cual nos permite saber si hay un “exceso” en las diferencias de medias que estamos obteniendo con los coeficientes anteriores. Este “exceso” puede ser positivo o negativo.\nSi incluimos a todos los términos, ahora contamos con un modelo de regresión, el cual incluye a un término de interacción para las variabels \\(x_{i}\\) e \\(w_{i}\\).\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\beta_{2}w_{i} + \\beta_{3}(x_{i}*w_{i})+\\epsilon_{i}\\]\nLa inquietud general que uno busca responder con los modelos de regresión con interacciones consiste en evaluar si la relación entre dos variables es equivalente, cuando consideramos la información de una tercera variable."
  },
  {
    "objectID": "untitled.html#terminologia",
    "href": "untitled.html#terminologia",
    "title": "Interacción entre variables",
    "section": "Terminologia",
    "text": "Terminologia\n\nEfectos principales (i.e., main effects)\nEfectos de interacción (i.e., interaction term)"
  },
  {
    "objectID": "untitled.html#forma-de-las-interacciones",
    "href": "untitled.html#forma-de-las-interacciones",
    "title": "Interacción entre variables",
    "section": "Forma de las interacciones",
    "text": "Forma de las interacciones"
  },
  {
    "objectID": "untitled.html#introducción",
    "href": "untitled.html#introducción",
    "title": "Interacción entre variables",
    "section": "Introducción",
    "text": "Introducción"
  },
  {
    "objectID": "untitled.html#datos",
    "href": "untitled.html#datos",
    "title": "Interacción entre variables",
    "section": "Datos",
    "text": "Datos"
  },
  {
    "objectID": "untitled.html#preparar-datos",
    "href": "untitled.html#preparar-datos",
    "title": "Interacción entre variables",
    "section": "Preparar Datos",
    "text": "Preparar Datos"
  },
  {
    "objectID": "untitled.html#ajustar-modelo",
    "href": "untitled.html#ajustar-modelo",
    "title": "Interacción entre variables",
    "section": "Ajustar Modelo",
    "text": "Ajustar Modelo"
  },
  {
    "objectID": "untitled.html#tabla-de-resultados",
    "href": "untitled.html#tabla-de-resultados",
    "title": "Interacción entre variables",
    "section": "Tabla de resultados",
    "text": "Tabla de resultados"
  },
  {
    "objectID": "untitled.html#descripción-de-resultados",
    "href": "untitled.html#descripción-de-resultados",
    "title": "Interacción entre variables",
    "section": "Descripción de resultados",
    "text": "Descripción de resultados"
  },
  {
    "objectID": "untitled.html#interacciones-entre-dicotómicas",
    "href": "untitled.html#interacciones-entre-dicotómicas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre dicotómicas",
    "text": "Interacciones entre dicotómicas"
  },
  {
    "objectID": "untitled.html#interacciones-entre-dicotómicas-y-continuas",
    "href": "untitled.html#interacciones-entre-dicotómicas-y-continuas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre dicotómicas y continuas",
    "text": "Interacciones entre dicotómicas y continuas"
  },
  {
    "objectID": "untitled.html#interacciones-entre-continuas",
    "href": "untitled.html#interacciones-entre-continuas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre continuas",
    "text": "Interacciones entre continuas"
  },
  {
    "objectID": "untitled.html#inferencia-en-interacciones",
    "href": "untitled.html#inferencia-en-interacciones",
    "title": "Interacción entre variables",
    "section": "Inferencia en interacciones",
    "text": "Inferencia en interacciones"
  },
  {
    "objectID": "untitled.html#poder-estadístico",
    "href": "untitled.html#poder-estadístico",
    "title": "Interacción entre variables",
    "section": "Poder estadístico",
    "text": "Poder estadístico"
  },
  {
    "objectID": "untitled.html#modelos-alternativos-para-evaluar-interacciones",
    "href": "untitled.html#modelos-alternativos-para-evaluar-interacciones",
    "title": "Interacción entre variables",
    "section": "Modelos alternativos para evaluar interacciones",
    "text": "Modelos alternativos para evaluar interacciones"
  },
  {
    "objectID": "untitled.html#interacciones-en-modelos-generalizados",
    "href": "untitled.html#interacciones-en-modelos-generalizados",
    "title": "Interacción entre variables",
    "section": "Interacciones en modelos generalizados",
    "text": "Interacciones en modelos generalizados"
  },
  {
    "objectID": "edu4046_mod_code.html",
    "href": "edu4046_mod_code.html",
    "title": "Interacción entre variables",
    "section": "",
    "text": "Cuando estudiamos las relaciones de covariables con respecto a una variable de respuesta existe un escenario particular, donde las relaciones pueden no ser constantes. Es decir, que la relación de una covariable con respecto a la variable de respuesta, puede aumentar, o disminuir con respecto a los valores de una tercera variable.\nEn la investigación educación existen diversas aplicaciones donde este escenario es de interés:\n\n\npodemos estar interesados en buscar factores protectores para la brecha socioeconómica de los resultados académicos de los estudiantes.\n\n\npodemos estar evaluando el efecto de un programa de intervención, y tener dudas razonables respecto a si el programa es efectivo para todos los estudiantes.\n\n\npodemos estar estudiando cómo funciona una práctica escolar, y podríamos querer saber si opera de forma compensatoria con respecto a los estudiantes más vulnerables.\n\n\npodemos estar estudiando cómo funciona una práctica escolar, y podríamos querer evaluar si la práctica es igual de beneficiosa para estudiantes hombres y mujeres.\n\n\npodríamos estar interesados en sí la introducción de incentivos salariales para profesores en escuelas vulnerables promueve la retención de profesores en estas escuelas (a niveles similares al resto de las escuelas).\n\n\nEn todos los ejemplos anteriores podemos separar nuestras expectativas de resultados en al menos dos elementos:\n\n\ntenemos una relacion principal entre dos variables (la variable de respuesta, y una covariable).\n\n\nqueremos ver si esta relación principal cambia segun un tercer factor\n\n\nUna herramienta que nos sirve para estudiar si la relación entre dos variable cambia en relación a un tercer factor son las interacciones entre variables. Esta herramienta nos permite evaluar si una relación de interés entre dos variables es constante o no, a los valores de una tercera variable. Este tipo de modelos es muy común en el estudio de efectividad escolar, en el estudio de evaluación de programas, y en el estudio general de inequidad escolar."
  },
  {
    "objectID": "edu4046_mod_code.html#medias-condicionadas",
    "href": "edu4046_mod_code.html#medias-condicionadas",
    "title": "Interacción entre variables",
    "section": "Medias condicionadas",
    "text": "Medias condicionadas\nLos modelos de regresión los podemos pensar como modelos de medias condicionadas. En términos gráficos nos tenemos que imaginar que tenemos una media y condicional a los valores de otro atributo la media de la variable de respuesta puede tomar diferentes valores o posiciones.\nComencemos con un ejemplo de tres variables. Supongamos que tenemos los puntajes de un test que expresa habilidad matemática (e.g., capacidad de resolución de problemas matemáticos de sexto grado), y denominemos a este puntaje como \\(y_{i}\\). Que un modelo de regresión sea pensado como un modelo de medias condicionadas, nos permite indicar que podemos expresar diferentes puntos del puntaje total anterior, segun los valores de otras covariables (i.e., condicional a…). Por ejemplo, que contamos con la escolaridad de los padres de los estudiantes, para los cuales tenemos los puntajes de habilidad. Empleemos a la variable \\(x_{i}\\) para alojar a los valores de escolaridad de los padres (e.g., 1 para educación terciaria, y 0 para grados educativos menores a la educación terciaria.). Y finalmente, agreguemos un tercer factor: la dependencia de la escuelas a las que asisten los estudiantes. Designemos esta tercera variable mediante \\(w_{i}\\), y para este ejemplo vamos a emplear los valores cero para las escuelas públicas, y los valores uno para los estudiantes que asisten a escuelas privadas.\nPara ilustrar la idea de las medias condicionadas, comencemos con un escenario sencillo. En este primer escenario vamos a imaginarnos que no hay diferencias ni por la escolaridad de los padres de los estudiantes, y que tampoco hay diferencias condicional a la escuela a la que asisten los estudiantes. En este escenario, lo más informativo de los puntajes observados sería la media de los puntajes de matemáticas. Vamos a dejar este punto de referencia en 700 puntos.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*0  , # b1\n    b2*0  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_1 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_1 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(dependencia = factor(dependencia, \n  levels = c(\n    'Pública',\n    'Privada'\n    ))) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nmutate(escolaridad = factor(escolaridad, \n  levels = c(\n    'No terciaria',\n    'Terciaria'\n    ))) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Pública' = 'black',\n'Privada' = 'red'\n))\n\n\n\nEscenario 1: sin diferencias\n\n\n\nEn este primer escenario, formalmente estamos planteando que las medias de los cuatro grupos posibles son similares entre sí. Y por tanto, que hay diferencias o desplazamientos de la media grupal, condicional a los valores de los factores de interés ( \\(x_{i}\\) y \\(w_{i}\\)).\nAhora nos vamos imaginarnos un segundo escenario. En este segundo escenario, solo vamos a tener diferencias por la escolaridad de los padres de los estudiantes, pero nos vamos a imaginar que no hay diferencias condicionales a las escuela a la que asisten los estudiantes. De esta forma, la brecha de puntajes entre estudiantes con padres de diferente escolaridad, no varía según al tipo de escuela a la que asisten.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*0  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_2 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_2 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 2: solo diferencias respecto a x\n\n\n\nEn este segundo escenario solo tenemos una relación principal. Los valores de los puntajes de matemáticas ( \\(y_{i}\\) ), varían condicional a los valores de \\(x_{i}\\); pero no varían segun los valores de \\(w_{i}\\).\nSigamos con el ejemplo, e imaginemos un tercer escenario. En este escenario vamos a incluir efectos principales para cada covariable, o relaciones de interés para cada factor. En este escenario aun no estamos incluyendo una interacción. Esto nos permitirá obtener medias condicionales para los cuatro grupos posibles:\n\nestudiantes hijos de padres sin educación terciaria, que asisten a escuelas públicas\nestudiantes hijos de padres sin educación terciaria, que asisten a escuelas privadadas\nestudiantes hijos de padres con educación terciaria, que asisten a escuelas públicas\nestudiantes hijos de padres con educación terciaria, que asisten a escuelas privadadas\n\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_3 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_3 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 3: diferencias respecto a x y w, pero sin interacción\n\n\n\n\n\n\n\n\n\nAdvertencia\n\n\n\nEn este documento empleamos los términos efecto y efectos principales para referirnos a los parámetros del modelo, que esperamos genere los datos (i.e., data generating mechanism). En otras palabras, nos estamos refiriendo a un aspecto estructural de los modelos que se ajustan (ver Rabe-Hesketh & Skrondal, 2012, p56-59). Esta terminología, es similar en nombre al uso de la expresión efecto como efecto causal que se emplea en la literatura de inferencia causal. No obstante, si bien hay conincidencias de términos, ambas expresiones no significan lo mismo. En el presente documento emplearemos el término efecto solo para aludir a relaciones esperadas entre variables, las cuales estan expresadas en los modelos de regresión y no para aludir al efecto causal que se espera de una variable por sobre otra.\n\n\nEn este tercer escenario las medias se desplazan respecto al punto de referencia inicial, el intercepto. Este desplazamiento ocurre tanto condicional a los valores de \\(x_{i}\\), como condicional a los valores de \\(w_{i}\\). Los estudiantes hijos de padres sin educación terciara presentan medias menores, en contraste a sus pares que asisten a escuelas privadas. En este escenario, observamos diferencias similares, entre los estudiantes hijos de padres con educación terciara. Aquellos que asisten a escuelas privadas, presentan medias de mayor tamaño, en contraste a sus pares que asisten a escuelas públicas.\nAhora, nos vamos a imaginar un cuarto escenario, donde incluímos una interacción entre ambas variables: entre la escolaridad de los padres, y el tipo de escuela al que asisten los estudiantes.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*-1    # b3\n    )\n)\n\ndata_example_4 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_4 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 4: diferencias respecto a x y w, y una interacción negativa\n\n\n\nEn este cuarto escenario la brecha entre estudiantes que asiste a escuelas públicas y privadas no posee el mismo tamaño. Entre los estudiantes hijos de padres con escolaridad terciara no se observan diferencias de medias; mientras que entre los estudiantes hijos de padres son educación terciaria observamos una diferencia de 100 puntos.\nFinalmente, en un quinto escenario, vamos a incluir una interacción, pero esta interacción toma una dirección diferente. Mientras en el escenario anterior lo que observabamos condiciones donde la brecha en puntajes de matemáticas entre estudiantes hijos de padres de diferente escolaridad, era nula entre escuelas privadas, y solo se observada entre escuelas públicas; ahora vamos imaginarnos un escenario inverso. En este escenario inverso, vamos a incluir una interacción tal, que la brecha entre los estudiantes, producto de la escolaridad de sus padres es de mayor tamaño entre quieres asisten a escuelas privadas, en contraste entre quienes asisten a escuelas públicas.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*1    # b3\n    )\n)\n\ndata_example_5 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_5 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 5: diferencias respecto a x y w, y una interacción positiva\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nDe los cinco escenarios revisados, solo dos de ellos incluyen un término de interacción, el escenario 4 y el escenario 5. En estos escenarios lla brecha o relación entre \\(y_{i}\\) y \\(x_{i}\\) varía según los valores de \\(w_{i}\\). Mientras en el escenario 4 la brecha entre \\(y_{i}\\) y \\(x_{i}\\) se hace mas pequeña al aumentar los valores de \\(w_{i}\\); en el escenario 5 la brecha entre \\(y_{i}\\) y \\(x_{i}\\) es de mayor tamaño al aumentar los valores de \\(w_{i}\\) (de público \\(w_{i} = 0\\) a privado \\(w_{i} = 1\\)).\n\n\nA continuación, vamos a representar de manera formal a los escenarios anteriores."
  },
  {
    "objectID": "edu4046_mod_code.html#parámetros-definidos",
    "href": "edu4046_mod_code.html#parámetros-definidos",
    "title": "Interacción entre variables",
    "section": "Parámetros definidos",
    "text": "Parámetros definidos\nEmpleando al modelo de regresión anterior generamos datos para cada uno de los escenarios posibles antes descritos. Definimos los valores de los términos \\(\\beta_{0}\\), \\(\\beta_{1}\\), \\(\\beta_{2}\\) y \\(\\beta_{3}\\), y \\(\\epsilon_{i}\\) para 5 escenarios diferentes. En base a esta definición generamos datos para 4500 observaciones, en una sola realización.\nProdujimos datos simulados para ilustrar diferentes posibilidades de resultados que podríamos tener con conjuntos de relaciones de tres variables en modelos de regresión.\nLos escenarios generados fueron los siguientes:\nEscenario 1: sin diferencias\n\\[y_{i} = 700 + 0*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 2: solo diferencias por un factor.\n\\[y_{i} = 700 + 100*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 3: efectos principales sin interacción\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 4: interacción negativa\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} - 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 5: interacción positiva\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nPara cada uno de los escenarios definimos que \\(\\epsilon_i \\sim \\mathcal{N}(0, \\sigma^2)\\), donde,\n\n\n\\(\\sigma^2\\) = 6350.643\n\n\n\n\n\n\n\nNota\n\n\n\nPara poder generar datos simulados empleando a los parámetros anteriores library(simglm) (ver LeBau, 2024). Previo a la presentación de cada figura se encuentra el código empleado. Si se hace click sobre el término presentado en gris code, se puede acceder al código empleado."
  },
  {
    "objectID": "edu4046_mod_code.html#representación-gráfica",
    "href": "edu4046_mod_code.html#representación-gráfica",
    "title": "Interacción entre variables",
    "section": "Representación gráfica",
    "text": "Representación gráfica\nTradicionalmente la visualización de interacciones emplea gráficos de simple slopes (Bauer, 2005; Preacher et al., 2006). En el caso de las interacciones generadas con variables categóricas de dos valores, estos gráficos incluyen a las medias esperadas de cada grupo, y estas medias son unidas con una linea. La inclinación de estas estas rectas expresan a las pendientes de regresión esperadas.\nA continuación generamos gráficos para los 5 escenarios anteriores empleando este tipo de figuras.\nPara el caso del  escenario 1  el único parámetro informativo es el intercepto, porque este es un escenario en que las variables \\(x_{i}\\) e \\(w_{i}\\) no son informativas respecto a los valores de \\(y_{i}\\).\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm01 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_1)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_1 &lt;- interactions::interact_plot(m01, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 1',\nsubtitle = 'b0 = 700, b1 = 0, b2 = 0, b3 = 0'\n)\n\nplot_1\n\n\n\nEscenario 1: figura sin efectos\n\n\n\nEn el  escenario 2 , solo incluimos un efecto principal, la relación de la variable \\(x_{i}\\) con \\(y_{i}\\). En este escenario podemos indicar que la brecha de puntajes de matemáticas producto de las diferencias de escolaridad de los padres es generalizable a los estudiantes que asisten a ambos tipos de escuelas, tanto públicas como privadas.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm02 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_2)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_2 &lt;- interactions::interact_plot(m02, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 2',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 0, b3 = 0'\n)\n\nplot_2\n\n\n\nEscenario 2: efecto de x solamente\n\n\n\nEl  escenario 3  consiste de un escenario en que solo observamos efectos principales de los factores estudiados, sin interacción alguna. Es de decir que, los valores de \\(y_{i}\\) varían condicionales a los valores de \\(x_{i}\\) y \\(w_{i}\\), de forma aditiva, sin incluir interacciones entre ambos factores.\nEn términos sustantivos lo anterior implica que los valores esperados de los puntajes de Matemáticas varían entre los estudiantes según la escolaridad de los padres, y según al tipo de escuela a la que asisten, sin que estas relaciones interactúen entre sí.\nEn este tipo de escenarios los gráficos de simple slopes presentan lineas rectas que son paralelas. Lo anterior, es una característica distintiva de este tipo de gráficos cuando hay una ausencia de interacción entre variables. Complementariamente, solo cuando hay interacciones las rectas generadas por este tipo de gráficos se cruzan pueden cruzar.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm03 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_3)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_3 &lt;- interactions::interact_plot(m03, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 3',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = 0'\n)\n\nplot_3\n\n\n\nEscenario 3: efecto de x e w sin interacción\n\n\n\nEn el  escenario 4, es el primer escenario donde en un sistema de 3 variables incluimos una interacción entre las covariables incluidas en el modelo. En este caso, no podemos decir que la relación entre \\(y_{i}\\) y \\(x_{i}\\) es generalizable a los diferentes valores observados de \\(w_{i}\\).\nEn términos sustantivos, los resultados implican que no hay brecha en los puntajes de matemáticas de los estudiantes condicionales a la escolaridad de los padres, para aquellos estudiantes que asisten a escuelas privadas. Sin embargo, si observamos una brecha entre los estudiantes hijos de padres con diferentes grados educativos. Aquellos estudiantes hijos de padres sin educación terciaria, presentan medias de cerca de 700 puntos, en contraste a sus pares hijos de padres con mayor escolaridad (educación terciaria), los cuales presentan medias de cerca de 800 puntos.\nComo fuera mencionado anteriormente, solo en casos de interacción entre variables los gráficos de simples slopes, presentan rectas que no son paralelas y que potencialmente se cruzan.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm04 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_4)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_4 &lt;- interactions::interact_plot(m04, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 4',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = -100'\n)\n\nplot_4\n\n\n\nEscenario 4: interacción negativa\n\n\n\nFinalmente, en el escenario 5 incluimos un efecto de interacción. En este caso, es una interacción positiva que se espera que aumente las brechas observadas entre \\(y_{i}\\) y \\(x_{i}\\), condicional a los valores de \\(w_{i}\\).\nEn términos sustantivos, los resultados de este escenario nos indican que la brecha en los puntajes de matemáticas relativa a la escolaridad de los padres, es de mayor tamaño entre los estudiantes que asisten a escuelas privadas, en contraste a los estudiantes que asisten a escuelas públicas.\nLos gráficos de simple slope, para este tipo de escenarios muestran rectas que se cruzan, y que se abren a medida que aumentan los valores de \\(x_{i}\\).\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm05 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_5)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_5 &lt;- interactions::interact_plot(m05, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 5',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = 100'\n)\n\nplot_5\n\n\n\nEscenario 1: figura sin efectos"
  },
  {
    "objectID": "edu4046_mod_code.html#estimados-de-regresión",
    "href": "edu4046_mod_code.html#estimados-de-regresión",
    "title": "Interacción entre variables",
    "section": "Estimados de regresión",
    "text": "Estimados de regresión\nA continuación vamos a ajustar modelos de regresión sobre los datos generados empleados en los escenarios 1 a 5. Como los datos sobre los que ajustaremos los modelos son datos simulados, de una sola realización del modelo definido o mecanismos generador datos, los resultados obtenidos van a ser muy parecidos a los parámetros definidos; pero no exactamente iguales.\nEsta diferencia entre el parámetro del modelo y el estimado del modelo suele simbolizarse mediante acentos en la notación. Por ejemplo el parámetro que expresa a la relación entre \\(y_{i}\\) e \\(x_{i}\\) es \\(\\beta_{1}\\), mientras que el estimado de esta relación es \\(\\hat{\\beta}_{1}\\).\nEl siguiente ejercicio nos servirá para ilustrar como serían los modelos de regresión que se pueden ajustar sobre los datos que generan a las figuras de los 5 escenarios anteriores.\n\nCode#---------------------------------------------------------------\n# regression\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fit models\n#--------------------------------------\n\nm01 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_1)\nm02 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_2)\nm03 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_3)\nm04 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_4)\nm05 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_5)\n\n#--------------------------------------\n# estimates\n#--------------------------------------\n\ntexreg::screenreg(list(m01, m02, m03, m04, m05), \n  star.symbol = \"*\", \n  center = TRUE, \n  doctype = FALSE,\n  dcolumn = TRUE, \n  booktabs = TRUE,\n  single.row = FALSE,\n  custom.model.names = c('E1','E2','E3','E4','E5'))\n\n\n============================================================================\n             E1           E2           E3           E4           E5         \n----------------------------------------------------------------------------\n(Intercept)   699.14 ***   699.14 ***   699.14 ***   699.14 ***   699.14 ***\n               (2.32)       (2.32)       (2.32)       (2.32)       (2.32)   \nx               0.81       100.81 ***   100.81 ***   100.81 ***   100.81 ***\n               (3.35)       (3.35)       (3.35)       (3.35)       (3.35)   \nw              -0.80        -0.80        99.20 ***    99.20 ***    99.20 ***\n               (3.29)       (3.29)       (3.29)       (3.29)       (3.29)   \nx:w             2.02         2.02         2.02       -97.98 ***   102.02 ***\n               (4.71)       (4.71)       (4.71)       (4.71)       (4.71)   \n----------------------------------------------------------------------------\nR^2             0.00         0.29         0.46         0.24         0.66    \nAdj. R^2       -0.00         0.29         0.46         0.24         0.66    \nNum. obs.    4500         4500         4500         4500         4500       \n============================================================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "edu4046_mod_code.html#medias-esperadas-empleando-a-los-resultados-del-modelo-de-regresión",
    "href": "edu4046_mod_code.html#medias-esperadas-empleando-a-los-resultados-del-modelo-de-regresión",
    "title": "Interacción entre variables",
    "section": "Medias esperadas empleando a los resultados del modelo de regresión",
    "text": "Medias esperadas empleando a los resultados del modelo de regresión\nLa idea general es que con la ecuación de regresión anterior podemos producir valores. Podemos tanto producir valores esperados, como las medias esperadas de los grupos, como los valores esperados por el modelo. Nos vamos a enfocar en las medias esperadas de cada grupo. Ordenando los diferentes términos de la regresión general con interacción podemos obtener las medias esperadas de cada uno de los grupos implicados por ambos factores.\n\nMedia de estudiantes con padres de escolaridad menor a terciaria, que asisten a escuelas públicas\n\n\\[E(\\bar{y} | x_{i} = 0, w_{i} = 0) = \\beta_{0} + \\beta_{1}*0 + \\beta_{2}*0 + \\beta_{3}*0*0\\]\n\nMedia de estudiantes con padres de escolaridad menor a terciaria, que asisten a escuelas privadas\n\n\\[E(\\bar{y} | x_{i} = 0, w_{i} = 1) = \\beta_{0} + \\beta_{1}*0 + \\beta_{2}*1 + \\beta_{3}*0*1\\]\n\nMedia de estudiantes con padres de escolaridad terciaria, que asisten a escuelas públicas\n\n\\[E(\\bar{y} | x_{i} = 1, w_{i} = 0) = \\beta_{0} + \\beta_{1}*1 + \\beta_{2}*0 + \\beta_{3}*1*0\\]\n\nMedia de estudiantes con padres de escolaridad terciaria, que asisten a escuelas privadas\n\n\\[E(\\bar{y} | x_{i} = 1, w_{i} = 1) = \\beta_{0} + \\beta_{1}*1 + \\beta_{2}*1 + \\beta_{3}*1*1\\]"
  },
  {
    "objectID": "edu4046_mod_code.html#terminologia",
    "href": "edu4046_mod_code.html#terminologia",
    "title": "Interacción entre variables",
    "section": "Terminologia",
    "text": "Terminologia\n\nEfectos principales (i.e., main effects)\nEfectos de interacción (i.e., interaction term)"
  },
  {
    "objectID": "edu4046_mod_code.html#forma-de-las-interacciones",
    "href": "edu4046_mod_code.html#forma-de-las-interacciones",
    "title": "Interacción entre variables",
    "section": "Forma de las interacciones",
    "text": "Forma de las interacciones"
  },
  {
    "objectID": "edu4046_mod_code.html#introducción",
    "href": "edu4046_mod_code.html#introducción",
    "title": "Interacción entre variables",
    "section": "Introducción",
    "text": "Introducción"
  },
  {
    "objectID": "edu4046_mod_code.html#datos",
    "href": "edu4046_mod_code.html#datos",
    "title": "Interacción entre variables",
    "section": "Datos",
    "text": "Datos"
  },
  {
    "objectID": "edu4046_mod_code.html#preparar-datos",
    "href": "edu4046_mod_code.html#preparar-datos",
    "title": "Interacción entre variables",
    "section": "Preparar Datos",
    "text": "Preparar Datos"
  },
  {
    "objectID": "edu4046_mod_code.html#ajustar-modelo",
    "href": "edu4046_mod_code.html#ajustar-modelo",
    "title": "Interacción entre variables",
    "section": "Ajustar Modelo",
    "text": "Ajustar Modelo"
  },
  {
    "objectID": "edu4046_mod_code.html#tabla-de-resultados",
    "href": "edu4046_mod_code.html#tabla-de-resultados",
    "title": "Interacción entre variables",
    "section": "Tabla de resultados",
    "text": "Tabla de resultados"
  },
  {
    "objectID": "edu4046_mod_code.html#descripción-de-resultados",
    "href": "edu4046_mod_code.html#descripción-de-resultados",
    "title": "Interacción entre variables",
    "section": "Descripción de resultados",
    "text": "Descripción de resultados"
  },
  {
    "objectID": "edu4046_mod_code.html#interacciones-entre-dicotómicas",
    "href": "edu4046_mod_code.html#interacciones-entre-dicotómicas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre dicotómicas",
    "text": "Interacciones entre dicotómicas"
  },
  {
    "objectID": "edu4046_mod_code.html#interacciones-entre-dicotómicas-y-continuas",
    "href": "edu4046_mod_code.html#interacciones-entre-dicotómicas-y-continuas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre dicotómicas y continuas",
    "text": "Interacciones entre dicotómicas y continuas"
  },
  {
    "objectID": "edu4046_mod_code.html#interacciones-entre-continuas",
    "href": "edu4046_mod_code.html#interacciones-entre-continuas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre continuas",
    "text": "Interacciones entre continuas"
  },
  {
    "objectID": "edu4046_mod_code.html#inferencia-en-interacciones",
    "href": "edu4046_mod_code.html#inferencia-en-interacciones",
    "title": "Interacción entre variables",
    "section": "Inferencia en interacciones",
    "text": "Inferencia en interacciones"
  },
  {
    "objectID": "edu4046_mod_code.html#poder-estadístico",
    "href": "edu4046_mod_code.html#poder-estadístico",
    "title": "Interacción entre variables",
    "section": "Poder estadístico",
    "text": "Poder estadístico"
  },
  {
    "objectID": "edu4046_mod_code.html#modelos-alternativos-para-evaluar-interacciones",
    "href": "edu4046_mod_code.html#modelos-alternativos-para-evaluar-interacciones",
    "title": "Interacción entre variables",
    "section": "Modelos alternativos para evaluar interacciones",
    "text": "Modelos alternativos para evaluar interacciones"
  },
  {
    "objectID": "edu4046_mod_code.html#interacciones-en-modelos-generalizados",
    "href": "edu4046_mod_code.html#interacciones-en-modelos-generalizados",
    "title": "Interacción entre variables",
    "section": "Interacciones en modelos generalizados",
    "text": "Interacciones en modelos generalizados"
  },
  {
    "objectID": "edu4046_mod_code.html#texto-sin-editar",
    "href": "edu4046_mod_code.html#texto-sin-editar",
    "title": "Interacción entre variables",
    "section": "Texto sin editar",
    "text": "Texto sin editar\nDiagrama Conceptual\nDiagrama de vías\nDescriptivamente, podemos calcular las medias de ambos grupos de estudiantes, y ademas, podríamos calcular la diferencia de medias entre ambos grupos, y con lo anterior tener una noción de si los estudiantes difieren en sus puntajes condicional a la escolaridad de sus padres.\nAhora, podemos abordar la misma inquietud empleando un modelo de regresión:\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\epsilon_{i}\\]\nDonde,\n\n\\(y_{i}\\) = puntaje total de cada estudiante \\(_{i}\\).\n\\(x_{i}\\) = escolaridad máxima de los padres de cada estudiante \\(_{i}\\).\n\nCon los resultados de un modelo de regresión como el anterior podemos obtener las medias esperadas de cada grupo:\n\nMedia de estudiantes con padres de escolaridad menor a terciaria\n\n\\[\\beta_{0} + \\beta_{1}(x_{i} = 0)\\]\n\nMedia de estudiantes con padres de escolaridad terciaria\n\n\\[\\beta_{0} + \\beta_{1}(x_{i} = 1)\\]\n¿Que pasaría sin incluimos una tercera variable? Si tuvieramos la información de una tercera variable, dado que estamos pensando el modelo de regresión como una forma de expresar medias condicionadas, es que entonces podriamos tener otra diferencia adicional entre grupos. Pensemos en una tercera covariable como la dependencia de la escuelas (e.g., Privadas y Públicas). Para efectos del ejemplo, pensemos que las escuelas privadas toman un valor uno, y las escuelas públicas toman un valor cero.\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\beta_{2}w_{i} + \\epsilon_{i}\\]\n\n\n\\(w_{i}\\) = tipo de escuela a la que asisten a los estudiantes \\(_{i}\\), donde 1 son escuelas privadas, y 0 son escuelas públicas.\n\nCon el modelo anterior, solo podemos representar (i.e., asumir) que las medias entre los grupos aumentan o disminuyen con respecto a al intercepto ( \\(\\beta_{0}\\) ), condicional a los valores de \\(x_{i}\\) (i.e. la escolaridad máxima de los padres) y condicional a los valores de \\(w_{i}\\) (i.e., la dependencia administrativa de la escuelas).\nPara poder representar que las medias anteriores son condicionales entre sí o que interactúan, necesitamos incluir un término adicional: el múltiplo de las variables \\(x_{i}\\) e \\(w_{i}\\), es decir \\(x_{i}*w_{i}\\). Este término nos permitirá obtener un coeficiente de regresión adicional, el cual nos permite saber si hay un “exceso” en las diferencias de medias que estamos obteniendo con los coeficientes anteriores. Este “exceso” puede ser positivo o negativo.\nSi incluimos a todos los términos, ahora contamos con un modelo de regresión, el cual incluye a un término de interacción para las variabels \\(x_{i}\\) e \\(w_{i}\\).\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\beta_{2}w_{i} + \\beta_{3}(x_{i}*w_{i})+\\epsilon_{i}\\]\nLa inquietud general que uno busca responder con los modelos de regresión con interacciones consiste en evaluar si la relación entre dos variables es equivalente, cuando consideramos la información de una tercera variable."
  },
  {
    "objectID": "untitled.rmd.html",
    "href": "untitled.rmd.html",
    "title": "Interacción entre variables",
    "section": "",
    "text": "Cuando estudiamos las relaciones de covariables con respecto a una variable de respuesta existe un escenario particular, donde las relaciones pueden no ser constantes. Es decir, que la relación de una covariable con respecto a la variable de respuesta, puede aumentar, o disminuir con respecto a los valores de una tercera variable.\nEn la investigación educación existen diversas aplicaciones donde este escenario es de interés:\n\n\npodemos estar interesados en buscar factores protectores para la brecha socioeconómica de los resultados académicos de los estudiantes.\n\n\npodemos estar evaluando el efecto de un programa de intervención, y tener dudas razonables respecto a si el programa es efectivo para todos los estudiantes.\n\n\npodemos estar estudiando cómo funciona una práctica escolar, y podríamos querer saber si opera de forma compensatoria con respecto a los estudiantes más vulnerables.\n\n\npodemos estar estudiando cómo funciona una práctica escolar, y podríamos querer evaluar si la práctica es igual de beneficiosa para estudiantes hombres y mujeres.\n\n\npodríamos estar interesados en sí la introducción de incentivos salariales para profesores en escuelas vulnerables promueve la retención de profesores en estas escuelas (a niveles similares al resto de las escuelas).\n\n\nEn todos los ejemplos anteriores podemos separar nuestras expectativas de resultados en al menos dos elementos:\n\n\ntenemos una relacion principal entre dos variables (la variable de respuesta, y una covariable).\n\n\nqueremos ver si esta relación principal cambia segun un tercer factor\n\n\nUna herramienta que nos sirve para estudiar si la relación entre dos variable cambia en relación a un tercer factor son las interacciones entre variables. Esta herramienta nos permite evaluar si una relación de interés entre dos variables es constante o no, a los valores de una tercera variable. Este tipo de modelos es muy común en el estudio de efectividad escolar, en el estudio de evaluación de programas, y en el estudio general de inequidad escolar."
  },
  {
    "objectID": "untitled.rmd.html#medias-condicionadas",
    "href": "untitled.rmd.html#medias-condicionadas",
    "title": "Interacción entre variables",
    "section": "Medias condicionadas",
    "text": "Medias condicionadas\nLos modelos de regresión los podemos pensar como modelos de medias condicionadas. En términos gráficos nos tenemos que imaginar que tenemos una media y condicional a los valores de otro atributo la media de la variable de respuesta puede tomar diferentes valores o posiciones.\nComencemos con un ejemplo de tres variables. Supongamos que tenemos los puntajes de un test que expresa habilidad matemática (e.g., capacidad de resolución de problemas matemáticos de sexto grado), y denominemos a este puntaje como \\(y_{i}\\). Que un modelo de regresión sea pensado como un modelo de medias condicionadas, nos permite indicar que podemos expresar diferentes puntos del puntaje total anterior, segun los valores de otras covariables (i.e., condicional a…). Por ejemplo, que contamos con la escolaridad de los padres de los estudiantes, para los cuales tenemos los puntajes de habilidad. Empleemos a la variable \\(x_{i}\\) para alojar a los valores de escolaridad de los padres (e.g., 1 para educación terciaria, y 0 para grados educativos menores a la educación terciaria.). Y finalmente, agreguemos un tercer factor: la dependencia de la escuelas a las que asisten los estudiantes. Designemos esta tercera variable mediante \\(w_{i}\\), y para este ejemplo vamos a emplear los valores cero para las escuelas públicas, y los valores uno para los estudiantes que asisten a escuelas privadas.\nPara ilustrar la idea de las medias condicionadas, comencemos con un escenario sencillo. En este primer escenario vamos a imaginarnos que no hay diferencias ni por la escolaridad de los padres de los estudiantes, y que tampoco hay diferencias condicional a la escuela a la que asisten los estudiantes. En este escenario, lo más informativo de los puntajes observados sería la media de los puntajes de matemáticas. Vamos a dejar este punto de referencia en 700 puntos.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*0  , # b1\n    b2*0  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_1 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_1 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 1: sin diferencias\n\n\n\nEn este primer escenario, formalmente estamos planteando que las medias de los cuatro grupos posibles son similares entre sí. Y por tanto, que hay diferencias o desplazamientos de la media grupal, condicional a los valores de los factores de interés ( \\(x_{i}\\) y \\(w_{i}\\)).\nAhora nos vamos imaginarnos un segundo escenario. En este segundo escenario, solo vamos a tener diferencias por la escolaridad de los padres de los estudiantes, pero nos vamos a imaginar que no hay diferencias condicionales a las escuela a la que asisten los estudiantes. De esta forma, la brecha de puntajes entre estudiantes con padres de diferente escolaridad, no varía según al tipo de escuela a la que asisten.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*0  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_2 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_2 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 2: solo diferencias respecto a x\n\n\n\nEn este segundo escenario solo tenemos una relación principal. Los valores de los puntajes de matemáticas ( \\(y_{i}\\) ), varían condicional a los valores de \\(x_{i}\\); pero no varían segun los valores de \\(w_{i}\\).\nSigamos con el ejemplo, e imaginemos un tercer escenario. En este escenario vamos a incluir efectos principales para cada covariable, o relaciones de interés para cada factor. En este escenario aun no estamos incluyendo una interacción. Esto nos permitirá obtener medias condicionales para los cuatro grupos posibles:\n\nestudiantes hijos de padres sin educación terciaria, que asisten a escuelas públicas\nestudiantes hijos de padres sin educación terciaria, que asisten a escuelas privadadas\nestudiantes hijos de padres con educación terciaria, que asisten a escuelas públicas\nestudiantes hijos de padres con educación terciaria, que asisten a escuelas privadadas\n\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_3 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_3 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 3: diferencias respecto a x y w, pero sin interacción\n\n\n\nEn este tercer escenario las medias se desplazan respecto al punto de referencia inicial, el intercepto. Este desplazamiento ocurre tanto condicional a los valores de \\(x_{i}\\), como condicional a los valores de \\(w_{i}\\). Los estudiantes hijos de padres sin educación terciara presentan medias menores, en contraste a sus pares que asisten a escuelas privadas. En este escenario, observamos diferencias similares, entre los estudiantes hijos de padres con educación terciara. Aquellos que asisten a escuelas privadas, presentan medias de mayor tamaño, en contraste a sus pares que asisten a escuelas públicas.\nAhora, nos vamos a imginar un cuarto escenario, donde incluímos una interacción entre ambas variables: entre la escolaridad de los padres, y el tipo de escuela al que asisten los estudiantes.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*-1    # b3\n    )\n)\n\ndata_example_4 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_4 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 4: diferencias respecto a x y w, y una interacción negativa\n\n\n\nEn este cuarto escenario la brecha entre estudiantes que asiste a escuelas públicas y privadas no posee el mismo tamaño. Entre los estudiantes hijos de padres con escolaridad terciara no se observan diferencias de medias; mientras que entre los estudiantes hijos de padres son educación terciaria observamos una diferencia de 100 puntos.\nFinalmente, en un quinto escenario, vamos a incluir una interacción, pero esta interacción toma una dirección diferente. Mientras en el escenario anterior lo que observabamos condiciones donde la brecha en puntajes de matemáticas entre estudiantes hijos de padres de diferente escolaridad, era nula entre escuelas privadas, y solo se observada entre escuelas públicas; ahora vamos imaginarnos un escenario inverso. En este escenario inverso, vamos a incluir una interacción tal, que la brecha entre los estudiantes, producto de la escolaridad de sus padres es de mayor tamaño entre quieres asisten a escuelas privadas, en contraste entre quienes asisten a escuelas públicas.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*1    # b3\n    )\n)\n\ndata_example_5 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_5 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 5: diferencias respecto a x y w, y una interacción positiva\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nDe los cinco escenarios revisados, solo dos de ellos incluyen un efecto de interacción, el escenario 4 y 5. En estos escenarios los la brecha o relación entre \\(y_{i}\\) y \\(x_{i}\\) varía segúm los valores de \\(w_{i}\\). Mientras en el escenario 4 la brecha entre \\(y_{i}\\) y \\(x_{i}\\) se hace mas pequeña al aumentar los valores de \\(w_{i}\\); en el escenario 5 la brecha entre \\(y_{i}\\) y \\(x_{i}\\) es de mayor tamaño al aumentar los valores de \\(w_{i}\\) (de público \\(w_{i} = 0\\) a privado \\(w_{i} = 1\\)).\n\n\nA continuación, vamos a representar de manera formal a los escenarios anteriores."
  },
  {
    "objectID": "untitled.rmd.html#estimados-de-los-escenarios-revisados",
    "href": "untitled.rmd.html#estimados-de-los-escenarios-revisados",
    "title": "Interacción entre variables",
    "section": "Estimados de los escenarios revisados",
    "text": "Estimados de los escenarios revisados\nA continuación vamos a ajustar modelos de regresión sobre los datos generados que constituyen a los escenarios 1 a 5. Estos ejericio nos servirá para ilustrar como los términos del modelo de regresión anterior se vinculan con las medias esperadas que fueron graficas con las figuras anteriores.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\nm01 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_1)\nm02 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_2)\nm03 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_3)\nm04 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_4)\nm05 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_5)\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\ntexreg::screenreg(list(m01, m02, m03, m04, m05), \n  star.symbol = \"\\\\*\", \n  center = TRUE, \n  doctype = FALSE,\n  dcolumn = TRUE, \n  booktabs = TRUE,\n  single.row = FALSE,\n  custom.model.names = c('E1','E2','E3','E4','E5'))\n\n\n===========================================================================================\n             E1              E2              E3              E4              E5            \n-------------------------------------------------------------------------------------------\n(Intercept)   699.14 \\*\\*\\*   699.14 \\*\\*\\*   699.14 \\*\\*\\*   699.14 \\*\\*\\*   699.14 \\*\\*\\*\n               (2.32)          (2.32)          (2.32)          (2.32)          (2.32)      \nx               0.81          100.81 \\*\\*\\*   100.81 \\*\\*\\*   100.81 \\*\\*\\*   100.81 \\*\\*\\*\n               (3.35)          (3.35)          (3.35)          (3.35)          (3.35)      \nw              -0.80           -0.80           99.20 \\*\\*\\*    99.20 \\*\\*\\*    99.20 \\*\\*\\*\n               (3.29)          (3.29)          (3.29)          (3.29)          (3.29)      \nx:w             2.02            2.02            2.02          -97.98 \\*\\*\\*   102.02 \\*\\*\\*\n               (4.71)          (4.71)          (4.71)          (4.71)          (4.71)      \n-------------------------------------------------------------------------------------------\nR^2             0.00            0.29            0.46            0.24            0.66       \nAdj. R^2       -0.00            0.29            0.46            0.24            0.66       \nNum. obs.    4500            4500            4500            4500            4500          \n===========================================================================================\n\\*\\*\\* p &lt; 0.001; \\*\\* p &lt; 0.01; \\* p &lt; 0.05"
  },
  {
    "objectID": "untitled.rmd.html#medias-esperadas-empleando-a-los-resultados-del-modelo-de-regresión",
    "href": "untitled.rmd.html#medias-esperadas-empleando-a-los-resultados-del-modelo-de-regresión",
    "title": "Interacción entre variables",
    "section": "Medias esperadas empleando a los resultados del modelo de regresión",
    "text": "Medias esperadas empleando a los resultados del modelo de regresión\nLa idea general es que con la ecuación de regresión anterior podemos producir valores. Podemos tanto producir valores esperados, como las medias esperadas de los grupos, como los valores esperados por el modelo. Nos vamos a enfocar en las medias esperadas de cada grupo. Ordenando los diferentes términos de la regresión general con interacción podemos obtener las medias esperadas de cada uno de los grupos implicados por ambos factores.\n\nMedia de estudiantes con padres de escolaridad menor a terciaria, que asisten a escuelas públicas\n\n\\(E(\\bar{y} | x_{i} = 0, w_{i} = 0) = \\beta_{0} + \\beta_{1}*0 + \\beta_{2}*0 + \\beta_{3}*0*0\\)\n\nMedia de estudiantes con padres de escolaridad menor a terciaria, que asisten a escuelas privadas\n\n\\(E(\\bar{y} | x_{i} = 0, w_{i} = 1) = \\beta_{0} + \\beta_{1}*0 + \\beta_{2}*1 + \\beta_{3}*0*1\\)\n\nMedia de estudiantes con padres de escolaridad terciaria, que asisten a escuelas públicas\n\n\\(E(\\bar{y} | x_{i} = 1, w_{i} = 0) = \\beta_{0} + \\beta_{1}*1 + \\beta_{2}*0 + \\beta_{3}*1*0\\)\n\nMedia de estudiantes con padres de escolaridad terciaria, que asisten a escuelas privadas\n\n\\(E(\\bar{y} | x_{i} = 1, w_{i} = 1) = \\beta_{0} + \\beta_{1}*1 + \\beta_{2}*1 + \\beta_{3}*1*1\\)\nCon el modelo anterior y definiendo a los términos \\(\\beta_{0}\\), \\(\\beta_{1}\\), \\(\\beta_{2}\\) y \\(\\beta_{3}\\) podemos generar los datos de cada uno de los escenarios anterioes.\nEscenario 1: sin diferencias\n\\[y_{i} = 700 + 0*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 2: solo diferencias por escolaridad.\n\\[y_{i} = 700 + 100*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 3: efectos principales sin interacción\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 4: interacción negativa\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} - 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 5: interacción positiva\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nDiagrama Conceptual\nDiagrama de vías\nDescriptivamente, podemos calcular las medias de ambos grupos de estudiantes, y ademas, podríamos calcular la diferencia de medias entre ambos grupos, y con lo anterior tener una noción de si los estudiantes difieren en sus puntajes condicional a la escolaridad de sus padres.\nAhora, podemos abordar la misma inquietud empleando un modelo de regresión:\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\epsilon_{i}\\]\nDonde,\n\n\\(y_{i}\\) = puntaje total de cada estudiante \\(_{i}\\).\n\\(x_{i}\\) = escolaridad máxima de los padres de cada estudiante \\(_{i}\\).\n\nCon los resultados de un modelo de regresión como el anterior podemos obtener las medias esperadas de cada grupo:\n\nMedia de estudiantes con padres de escolaridad menor a terciaria\n\n\\(\\beta_{0} + \\beta_{1}(x_{i} = 0)\\)\n\nMedia de estudiantes con padres de escolaridad terciaria\n\n\\(\\beta_{0} + \\beta_{1}(x_{i} = 1)\\)\n¿Que pasaría sin incluimos una tercera variable? Si tuvieramos la información de una tercera variable, dado que estamos pensando el modelo de regresión como una forma de expresar medias condicionadas, es que entonces podriamos tener otra diferencia adicional entre grupos. Pensemos en una tercera covariable como la dependencia de la escuelas (e.g., Privadas y Públicas). Para efectos del ejemplo, pensemos que las escuelas privadas toman un valor uno, y las escuelas públicas toman un valor cero.\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\beta_{2}w_{i} + \\epsilon_{i}\\]\n\n\n\\(w_{i}\\) = tipo de escuela a la que asisten a los estudiantes \\(_{i}\\), donde 1 son escuelas privadas, y 0 son escuelas públicas.\n\nCon el modelo anterior, solo podemos representar (i.e., asumir) que las medias entre los grupos aumentan o disminuyen con respecto a al intercepto ( \\(\\beta_{0}\\) ), condicional a los valores de \\(x_{i}\\) (i.e. la escolaridad máxima de los padres) y condicional a los valores de \\(w_{i}\\) (i.e., la dependencia administrativa de la escuelas).\nPara poder representar que las medias anteriores son condicionales entre sí o que interactúan, necesitamos incluir un término adicional: el múltiplo de las variables \\(x_{i}\\) e \\(w_{i}\\), es decir \\(x_{i}*w_{i}\\). Este término nos permitirá obtener un coeficiente de regresión adicional, el cual nos permite saber si hay un “exceso” en las diferencias de medias que estamos obteniendo con los coeficientes anteriores. Este “exceso” puede ser positivo o negativo.\nSi incluimos a todos los términos, ahora contamos con un modelo de regresión, el cual incluye a un término de interacción para las variabels \\(x_{i}\\) e \\(w_{i}\\).\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\beta_{2}w_{i} + \\beta_{3}(x_{i}*w_{i})+\\epsilon_{i}\\]\nLa inquietud general que uno busca responder con los modelos de regresión con interacciones consiste en evaluar si la relación entre dos variables es equivalente, cuando consideramos la información de una tercera variable."
  },
  {
    "objectID": "untitled.rmd.html#terminologia",
    "href": "untitled.rmd.html#terminologia",
    "title": "Interacción entre variables",
    "section": "Terminologia",
    "text": "Terminologia\n\nEfectos principales (i.e., main effects)\nEfectos de interacción (i.e., interaction term)"
  },
  {
    "objectID": "untitled.rmd.html#forma-de-las-interacciones",
    "href": "untitled.rmd.html#forma-de-las-interacciones",
    "title": "Interacción entre variables",
    "section": "Forma de las interacciones",
    "text": "Forma de las interacciones"
  },
  {
    "objectID": "untitled.rmd.html#introducción",
    "href": "untitled.rmd.html#introducción",
    "title": "Interacción entre variables",
    "section": "Introducción",
    "text": "Introducción"
  },
  {
    "objectID": "untitled.rmd.html#datos",
    "href": "untitled.rmd.html#datos",
    "title": "Interacción entre variables",
    "section": "Datos",
    "text": "Datos"
  },
  {
    "objectID": "untitled.rmd.html#preparar-datos",
    "href": "untitled.rmd.html#preparar-datos",
    "title": "Interacción entre variables",
    "section": "Preparar Datos",
    "text": "Preparar Datos"
  },
  {
    "objectID": "untitled.rmd.html#ajustar-modelo",
    "href": "untitled.rmd.html#ajustar-modelo",
    "title": "Interacción entre variables",
    "section": "Ajustar Modelo",
    "text": "Ajustar Modelo"
  },
  {
    "objectID": "untitled.rmd.html#tabla-de-resultados",
    "href": "untitled.rmd.html#tabla-de-resultados",
    "title": "Interacción entre variables",
    "section": "Tabla de resultados",
    "text": "Tabla de resultados"
  },
  {
    "objectID": "untitled.rmd.html#descripción-de-resultados",
    "href": "untitled.rmd.html#descripción-de-resultados",
    "title": "Interacción entre variables",
    "section": "Descripción de resultados",
    "text": "Descripción de resultados"
  },
  {
    "objectID": "untitled.rmd.html#interacciones-entre-dicotómicas",
    "href": "untitled.rmd.html#interacciones-entre-dicotómicas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre dicotómicas",
    "text": "Interacciones entre dicotómicas"
  },
  {
    "objectID": "untitled.rmd.html#interacciones-entre-dicotómicas-y-continuas",
    "href": "untitled.rmd.html#interacciones-entre-dicotómicas-y-continuas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre dicotómicas y continuas",
    "text": "Interacciones entre dicotómicas y continuas"
  },
  {
    "objectID": "untitled.rmd.html#interacciones-entre-continuas",
    "href": "untitled.rmd.html#interacciones-entre-continuas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre continuas",
    "text": "Interacciones entre continuas"
  },
  {
    "objectID": "untitled.rmd.html#inferencia-en-interacciones",
    "href": "untitled.rmd.html#inferencia-en-interacciones",
    "title": "Interacción entre variables",
    "section": "Inferencia en interacciones",
    "text": "Inferencia en interacciones"
  },
  {
    "objectID": "untitled.rmd.html#poder-estadístico",
    "href": "untitled.rmd.html#poder-estadístico",
    "title": "Interacción entre variables",
    "section": "Poder estadístico",
    "text": "Poder estadístico"
  },
  {
    "objectID": "untitled.rmd.html#modelos-alternativos-para-evaluar-interacciones",
    "href": "untitled.rmd.html#modelos-alternativos-para-evaluar-interacciones",
    "title": "Interacción entre variables",
    "section": "Modelos alternativos para evaluar interacciones",
    "text": "Modelos alternativos para evaluar interacciones"
  },
  {
    "objectID": "untitled.rmd.html#interacciones-en-modelos-generalizados",
    "href": "untitled.rmd.html#interacciones-en-modelos-generalizados",
    "title": "Interacción entre variables",
    "section": "Interacciones en modelos generalizados",
    "text": "Interacciones en modelos generalizados"
  },
  {
    "objectID": "00_prev_mod.html",
    "href": "00_prev_mod.html",
    "title": "Interacción entre variables",
    "section": "",
    "text": "Cuando estudiamos las relaciones de covariables con respecto a una variable de respuesta existe un escenario particular, donde las relaciones pueden no ser constantes. Es decir, que la relación de una covariable con respecto a la variable de respuesta, puede aumentar, o disminuir con respecto a los valores de una tercera variable.\nEn la investigación educación existen diversas aplicaciones donde este escenario es de interés:\n\n\npodemos estar interesados en buscar factores protectores para la brecha socioeconómica de los resultados académicos de los estudiantes.\n\n\npodemos estar evaluando el efecto de un programa de intervención, y tener dudas razonables respecto a si el programa es efectivo para todos los estudiantes.\n\n\npodemos estar estudiando cómo funciona una práctica escolar, y podríamos querer saber si opera de forma compensatoria con respecto a los estudiantes más vulnerables.\n\n\npodemos estar estudiando cómo funciona una práctica escolar, y podríamos querer evaluar si la práctica es igual de beneficiosa para estudiantes hombres y mujeres.\n\n\npodríamos estar interesados en sí la introducción de incentivos salariales para profesores en escuelas vulnerables promueve la retención de profesores en estas escuelas (a niveles similares al resto de las escuelas).\n\n\nEn todos los ejemplos anteriores podemos separar nuestras expectativas de resultados en al menos dos elementos:\n\n\ntenemos una relacion principal entre dos variables (la variable de respuesta, y una covariable).\n\n\nqueremos ver si esta relación principal cambia segun un tercer factor\n\n\nUna herramienta que nos sirve para estudiar si la relación entre dos variable cambia en relación a un tercer factor son las interacciones entre variables. Esta herramienta nos permite evaluar si una relación de interés entre dos variables es constante o no, a los valores de una tercera variable. Este tipo de modelos es muy común en el estudio de efectividad escolar, en el estudio de evaluación de programas, y en el estudio general de inequidad escolar."
  },
  {
    "objectID": "00_prev_mod.html#medias-condicionadas",
    "href": "00_prev_mod.html#medias-condicionadas",
    "title": "Interacción entre variables",
    "section": "Medias condicionadas",
    "text": "Medias condicionadas\nLos modelos de regresión los podemos pensar como modelos de medias condicionadas. En términos gráficos nos tenemos que imaginar que tenemos una media y condicional a los valores de otro atributo la media de la variable de respuesta puede tomar diferentes valores o posiciones.\nComencemos con un ejemplo de tres variables. Supongamos que tenemos los puntajes de un test que expresa habilidad matemática (e.g., capacidad de resolución de problemas matemáticos de sexto grado), y denominemos a este puntaje como \\(y_{i}\\). Que un modelo de regresión sea pensado como un modelo de medias condicionadas, nos permite indicar que podemos expresar diferentes puntos del puntaje total anterior, segun los valores de otras covariables (i.e., condicional a…). Por ejemplo, que contamos con la escolaridad de los padres de los estudiantes, para los cuales tenemos los puntajes de habilidad. Empleemos a la variable \\(x_{i}\\) para alojar a los valores de escolaridad de los padres (e.g., 1 para educación terciaria, y 0 para grados educativos menores a la educación terciaria.). Y finalmente, agreguemos un tercer factor: la dependencia de la escuelas a las que asisten los estudiantes. Designemos esta tercera variable mediante \\(w_{i}\\), y para este ejemplo vamos a emplear los valores cero para las escuelas públicas, y los valores uno para los estudiantes que asisten a escuelas privadas.\nPara ilustrar la idea de las medias condicionadas, comencemos con un escenario sencillo. En este primer escenario vamos a imaginarnos que no hay diferencias ni por la escolaridad de los padres de los estudiantes, y que tampoco hay diferencias condicional a la escuela a la que asisten los estudiantes. En este escenario, lo más informativo de los puntajes observados sería la media de los puntajes de matemáticas. Vamos a dejar este punto de referencia en 700 puntos.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*0  , # b1\n    b2*0  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_1 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_1 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 1: sin diferencias\n\n\n\nEn este primer escenario, formalmente estamos planteando que las medias de los cuatro grupos posibles son similares entre sí. Y por tanto, que hay diferencias o desplazamientos de la media grupal, condicional a los valores de los factores de interés ( \\(x_{i}\\) y \\(w_{i}\\)).\nAhora nos vamos imaginarnos un segundo escenario. En este segundo escenario, solo vamos a tener diferencias por la escolaridad de los padres de los estudiantes, pero nos vamos a imaginar que no hay diferencias condicionales a las escuela a la que asisten los estudiantes. De esta forma, la brecha de puntajes entre estudiantes con padres de diferente escolaridad, no varía según al tipo de escuela a la que asisten.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*0  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_2 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_2 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 2: solo diferencias respecto a x\n\n\n\nEn este segundo escenario solo tenemos una relación principal. Los valores de los puntajes de matemáticas ( \\(y_{i}\\) ), varían condicional a los valores de \\(x_{i}\\); pero no varían segun los valores de \\(w_{i}\\).\nSigamos con el ejemplo, e imaginemos un tercer escenario. En este escenario vamos a incluir efectos principales para cada covariable, o relaciones de interés para cada factor. En este escenario aun no estamos incluyendo una interacción. Esto nos permitirá obtener medias condicionales para los cuatro grupos posibles:\n\nestudiantes hijos de padres sin educación terciaria, que asisten a escuelas públicas\nestudiantes hijos de padres sin educación terciaria, que asisten a escuelas privadadas\nestudiantes hijos de padres con educación terciaria, que asisten a escuelas públicas\nestudiantes hijos de padres con educación terciaria, que asisten a escuelas privadadas\n\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*0    # b3\n    )\n)\n\ndata_example_3 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_3 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 3: diferencias respecto a x y w, pero sin interacción\n\n\n\n\n\n\n\n\n\nAdvertencia\n\n\n\n\nnota aclaratoria aqui de que hablamos de efectos en el sentido estructural, como RabeHesketh, y no como efecto causal.\n\n\n\nEn este tercer escenario las medias se desplazan respecto al punto de referencia inicial, el intercepto. Este desplazamiento ocurre tanto condicional a los valores de \\(x_{i}\\), como condicional a los valores de \\(w_{i}\\). Los estudiantes hijos de padres sin educación terciara presentan medias menores, en contraste a sus pares que asisten a escuelas privadas. En este escenario, observamos diferencias similares, entre los estudiantes hijos de padres con educación terciara. Aquellos que asisten a escuelas privadas, presentan medias de mayor tamaño, en contraste a sus pares que asisten a escuelas públicas.\nAhora, nos vamos a imginar un cuarto escenario, donde incluímos una interacción entre ambas variables: entre la escolaridad de los padres, y el tipo de escuela al que asisten los estudiantes.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*-1    # b3\n    )\n)\n\ndata_example_4 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_4 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 4: diferencias respecto a x y w, y una interacción negativa\n\n\n\nEn este cuarto escenario la brecha entre estudiantes que asiste a escuelas públicas y privadas no posee el mismo tamaño. Entre los estudiantes hijos de padres con escolaridad terciara no se observan diferencias de medias; mientras que entre los estudiantes hijos de padres son educación terciaria observamos una diferencia de 100 puntos.\nFinalmente, en un quinto escenario, vamos a incluir una interacción, pero esta interacción toma una dirección diferente. Mientras en el escenario anterior lo que observabamos condiciones donde la brecha en puntajes de matemáticas entre estudiantes hijos de padres de diferente escolaridad, era nula entre escuelas privadas, y solo se observada entre escuelas públicas; ahora vamos imaginarnos un escenario inverso. En este escenario inverso, vamos a incluir una interacción tal, que la brecha entre los estudiantes, producto de la escolaridad de sus padres es de mayor tamaño entre quieres asisten a escuelas privadas, en contraste entre quienes asisten a escuelas públicas.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nb0 &lt;- 700.000\nb1 &lt;- 100.000\nb2 &lt;- 100.000\nb3 &lt;- 100.000\n\n#--------------------------------------\n# no differences\n#--------------------------------------\n\nset.seed(321)\nlibrary(dplyr)\nlibrary(simglm)\n\nsample_size &lt;- 4500\nsim_arguments &lt;- list(\n  formula = y ~ 1 + x + w + x*w,\n  fixed = list(\n               x = list(var_type = 'factor', levels = c(0, 1)),\n               w = list(var_type = 'factor', levels = c(0, 1))\n               ),\n  error = list(variance = 6350.643),\n  sample_size = sample_size,\n  reg_weights = c(\n    b0*1  , # b0\n    b1*1  , # b1\n    b2*1  , # b2\n    b3*1    # b3\n    )\n)\n\ndata_example_5 &lt;- simulate_fixed(data = NULL, sim_arguments) %&gt;%\nsimulate_error(sim_arguments) %&gt;%\ngenerate_response(sim_arguments)\n\n#--------------------------------------\n# bar plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\ndata_example_5 %&gt;%\ngroup_by(x,w) %&gt;%\nsummarize(\ny = mean(y, na.rm =TRUE)\n) %&gt;%\nungroup() %&gt;%\nmutate(dependencia = case_when(\nw == 1 ~ 'Privada',\nw == 0 ~ 'Pública'\n)) %&gt;%\nmutate(escolaridad = case_when(\nx == 1 ~ 'Terciaria',\nx == 0 ~ 'No terciaria'\n)) %&gt;%\nggplot(., \n  aes(\n    y = y,\n    x = escolaridad,\n    fill = dependencia\n    )) +\ngeom_bar(position=\"dodge\", stat=\"identity\") +\nscale_y_continuous(\n  breaks = seq(0, 1100, by = 100),\n  limits = c(0, 1100)\n) +\ntheme_ipsum() +\nylab('Matemáticas') +\nscale_fill_manual(\nvalues = c(\n'Privada' = 'black',\n'Pública' = 'red'\n))\n\n\n\nEscenario 5: diferencias respecto a x y w, y una interacción positiva\n\n\n\n\n\n\n\n\n\nNota\n\n\n\nDe los cinco escenarios revisados, solo dos de ellos incluyen un efecto de interacción, el escenario 4 y 5. En estos escenarios los la brecha o relación entre \\(y_{i}\\) y \\(x_{i}\\) varía segúm los valores de \\(w_{i}\\). Mientras en el escenario 4 la brecha entre \\(y_{i}\\) y \\(x_{i}\\) se hace mas pequeña al aumentar los valores de \\(w_{i}\\); en el escenario 5 la brecha entre \\(y_{i}\\) y \\(x_{i}\\) es de mayor tamaño al aumentar los valores de \\(w_{i}\\) (de público \\(w_{i} = 0\\) a privado \\(w_{i} = 1\\)).\n\n\nA continuación, vamos a representar de manera formal a los escenarios anteriores."
  },
  {
    "objectID": "00_prev_mod.html#parámetros-de-los-escenarios-revisados",
    "href": "00_prev_mod.html#parámetros-de-los-escenarios-revisados",
    "title": "Interacción entre variables",
    "section": "Parámetros de los escenarios revisados",
    "text": "Parámetros de los escenarios revisados\nCon el modelo anterior y definiendo a los términos \\(\\beta_{0}\\), \\(\\beta_{1}\\), \\(\\beta_{2}\\) y \\(\\beta_{3}\\) generamos los datos de cada uno de los escenarios anteriores. Es decir, produjimos datos simulados para representar diferentes posibilidades de relaciones entre tres variables diferentes.\nEscenario 1: sin diferencias\n\\[y_{i} = 700 + 0*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 2: solo diferencias por un factor.\n\\[y_{i} = 700 + 100*x_{i} + 0*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 3: efectos principales sin interacción\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 0*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 4: interacción negativa\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} - 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]\nEscenario 5: interacción positiva\n\\[y_{i} = 700 + 100*x_{i} + 100*w_{i} + 100*(x_{i}*w_{i}) + \\epsilon_{i}\\]"
  },
  {
    "objectID": "00_prev_mod.html#representación-gráfica-de-una-interacción",
    "href": "00_prev_mod.html#representación-gráfica-de-una-interacción",
    "title": "Interacción entre variables",
    "section": "Representación gráfica de una interacción",
    "text": "Representación gráfica de una interacción\nTradicionalmente la visualización de interacciones emplea graficos de simple slopes o de medias por grupos unidas por una linea. A continuación graficaremos de esta forma a los 5 escenarios que planteamos anteriormente.\nPara el caso del escenario 1 el único parámetro informativo es el intercepto, porque este es un escenario en que las variables \\(x_{i}\\) e \\(w_{i}\\) no son informativas respecto a los valores de \\(y_{i}\\).\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm01 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_1)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_1 &lt;- interactions::interact_plot(m01, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 1',\nsubtitle = 'b0 = 700, b1 = 0, b2 = 0, b3 = 0'\n)\n\nplot_1\n\n\n\nEscenario 1: figura sin efectos\n\n\n\nEn el escenario 2, solo incluimos un efecto principal relaciona a la variabe \\(x_{i}\\). En este escenario podemos indicar que la brecha de puntajes de matemáticas producto de las diferencias de escolaridad de los padres, es generalizable a los estudiantes que asisten a ambos tipos de escuelas, tanto públicas como privadas.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm02 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_2)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_2 &lt;- interactions::interact_plot(m02, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 2',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 0, b3 = 0'\n)\n\nplot_2\n\n\n\nEscenario 1: figura sin efectos\n\n\n\nEl escenario 3, consiste de un escenario en que solo observamos efectos principales sin interaccionees. Es de decir que, los valores de \\(y_{i}\\) varían condicionales a los valores de \\(x_{i}\\) y \\(w_{i}\\), de forma aditiva, sin incluir interacciones entre ambos factores. En terminos sustantivos esto implica que los valores esperados de los puntajes de Matemáticas varían entre lso estudiantes segun la escolaridad de los padres, y según al tipo de escuela a la que asisten, sin que estas relaciones interactuen entre sí.\nEn este tipo de escenarios, los graficos de simple slopes presentan lineas rectas que son paralelas. Esta aspecto es una característica distintiva de la evaluacion de los efectos de interacción: solo cuando hay interacciones las rectas generadas por los graficos de simple slope se deben cruzar. En escenarios en que no hay interacciones, estos graficos deben desplegar rectas paralelas.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm03 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_3)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_3 &lt;- interactions::interact_plot(m03, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 3',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = 0'\n)\n\nplot_3\n\n\n\nEscenario 1: figura sin efectos\n\n\n\nEn el escenario 4, es el primer escenario donde en un sistema de 3 variables incluimos una interacción entre las covariables. En este caso, no podemos decir que la relación entre \\(y_{i}\\) y \\(x_{i}\\) es generalible a los diferentes valores observados de \\(w_{i}\\). En términos sustantivos, los resultados implican que no hay brecha en los puntajes de matemáticas de los estudiantes condicionales a la escolaridad de los padres, para aquellos estudiantes que asisten a escuelas privadas. Sin embargo, si observamos una brecha entre los estudiantes hijos de padres con diferentes grados educativos. Aquellos estudiantes hijos de padres sin educación terciaria, presentan medias de cerca de 700 puntos, en contraste a sus pares hijos de padres con mayor escolaridad (educación terciaria), los cuales presentan medias de cerca de 800 puntos.\nComo fuera mencionado anteriormente, solo en casos de interacción entre variables los gráficos de simples slopes, presentan rectas que no son paralelas y que potencionalmente se cruzan.\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm04 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_4)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_4 &lt;- interactions::interact_plot(m04, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 4',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = -100'\n)\n\nplot_4\n\n\n\nEscenario 1: figura sin efectos\n\n\n\nFinalmente, en el escenario 5 incluimos un efecto de interacción. En este caso, es una interacción positiva que se espera que aumente las brechas observadas entre \\(y_{i}\\) y \\(x_{i}\\), condicional a los valores de \\(w_{i}\\). En terminos sustantivos, los resultados de este escenario nos indican que la brecha en los puntajes de matematicas relativa a la escolaridad de los padres, es de mayor tamaño entre los estudiantes que asisten a escuelas privadas, en contraste a los estudiantes que asisten a escuelas públicas.\nLos gráficos de simple slope, para este tipo de escenarios muestran rectas que se cruzan, y que se abren a medida que aumentan los valores de \\(x_{i}\\).\n\nCode#---------------------------------------------------------------\n# simple slope\n#---------------------------------------------------------------\n\n#--------------------------------------\n# fitted model\n#--------------------------------------\n\nm05 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_5)\n\n#--------------------------------------\n# plot\n#--------------------------------------\n\nlibrary(ggplot2)\nlibrary(hrbrthemes)\nplot_5 &lt;- interactions::interact_plot(m05, \npred = x, \nmodx = w,\ninterval = TRUE,\ny.label = 'Matemáticas',\nx.label = \n'Educación de los padres\n(No Terciaria = 0,Terciaria = 1)\n',\nmodx.labels = c('Pública','Privada'),\ncolors = c('black','red')\n) +\nscale_y_continuous(\n  breaks = seq(400, 1000, by = 100),\n  limits = c(400, 1000)\n) +\ntheme_ipsum() +\nlabs(\ntitle = 'Escenario 5',\nsubtitle = 'b0 = 700, b1 = 100, b2 = 100, b3 = 100'\n)\n\nplot_5\n\n\n\nEscenario 1: figura sin efectos"
  },
  {
    "objectID": "00_prev_mod.html#estimados-de-los-escenarios-generados",
    "href": "00_prev_mod.html#estimados-de-los-escenarios-generados",
    "title": "Interacción entre variables",
    "section": "Estimados de los escenarios generados",
    "text": "Estimados de los escenarios generados\nA continuación vamos a ajustar modelos de regresión sobre los datos generados que constituyen a los escenarios 1 a 5. Como los datos simulados solo incluyen a una realización del modelo o mecanismo generador de datos, los resultados obtenidos van a ser muy parecidos a los modelos definidos, pero no exactamente iguales. Estos ejericio nos servirá para ilustrar como los términos del modelo de regresión anterior se vinculan con las medias esperadas que fueron graficas con las figuras anteriores.\n\nCode#---------------------------------------------------------------\n# figure\n#---------------------------------------------------------------\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\nm01 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_1)\nm02 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_2)\nm03 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_3)\nm04 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_4)\nm05 &lt;- lm(y ~ 1 + x + w + x*w, data = data_example_5)\n\n#--------------------------------------\n# ideal effects\n#--------------------------------------\n\ntexreg::screenreg(list(m01, m02, m03, m04, m05), \n  star.symbol = \"*\", \n  center = TRUE, \n  doctype = FALSE,\n  dcolumn = TRUE, \n  booktabs = TRUE,\n  single.row = FALSE,\n  custom.model.names = c('E1','E2','E3','E4','E5'))\n\n\n============================================================================\n             E1           E2           E3           E4           E5         \n----------------------------------------------------------------------------\n(Intercept)   699.14 ***   699.14 ***   699.14 ***   699.14 ***   699.14 ***\n               (2.32)       (2.32)       (2.32)       (2.32)       (2.32)   \nx               0.81       100.81 ***   100.81 ***   100.81 ***   100.81 ***\n               (3.35)       (3.35)       (3.35)       (3.35)       (3.35)   \nw              -0.80        -0.80        99.20 ***    99.20 ***    99.20 ***\n               (3.29)       (3.29)       (3.29)       (3.29)       (3.29)   \nx:w             2.02         2.02         2.02       -97.98 ***   102.02 ***\n               (4.71)       (4.71)       (4.71)       (4.71)       (4.71)   \n----------------------------------------------------------------------------\nR^2             0.00         0.29         0.46         0.24         0.66    \nAdj. R^2       -0.00         0.29         0.46         0.24         0.66    \nNum. obs.    4500         4500         4500         4500         4500       \n============================================================================\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05"
  },
  {
    "objectID": "00_prev_mod.html#medias-esperadas-empleando-a-los-resultados-del-modelo-de-regresión",
    "href": "00_prev_mod.html#medias-esperadas-empleando-a-los-resultados-del-modelo-de-regresión",
    "title": "Interacción entre variables",
    "section": "Medias esperadas empleando a los resultados del modelo de regresión",
    "text": "Medias esperadas empleando a los resultados del modelo de regresión\nLa idea general es que con la ecuación de regresión anterior podemos producir valores. Podemos tanto producir valores esperados, como las medias esperadas de los grupos, como los valores esperados por el modelo. Nos vamos a enfocar en las medias esperadas de cada grupo. Ordenando los diferentes términos de la regresión general con interacción podemos obtener las medias esperadas de cada uno de los grupos implicados por ambos factores.\n\nMedia de estudiantes con padres de escolaridad menor a terciaria, que asisten a escuelas públicas\n\n\\(E(\\bar{y} | x_{i} = 0, w_{i} = 0) = \\beta_{0} + \\beta_{1}*0 + \\beta_{2}*0 + \\beta_{3}*0*0\\)\n\nMedia de estudiantes con padres de escolaridad menor a terciaria, que asisten a escuelas privadas\n\n\\(E(\\bar{y} | x_{i} = 0, w_{i} = 1) = \\beta_{0} + \\beta_{1}*0 + \\beta_{2}*1 + \\beta_{3}*0*1\\)\n\nMedia de estudiantes con padres de escolaridad terciaria, que asisten a escuelas públicas\n\n\\(E(\\bar{y} | x_{i} = 1, w_{i} = 0) = \\beta_{0} + \\beta_{1}*1 + \\beta_{2}*0 + \\beta_{3}*1*0\\)\n\nMedia de estudiantes con padres de escolaridad terciaria, que asisten a escuelas privadas\n\n\\(E(\\bar{y} | x_{i} = 1, w_{i} = 1) = \\beta_{0} + \\beta_{1}*1 + \\beta_{2}*1 + \\beta_{3}*1*1\\)"
  },
  {
    "objectID": "00_prev_mod.html#terminologia",
    "href": "00_prev_mod.html#terminologia",
    "title": "Interacción entre variables",
    "section": "Terminologia",
    "text": "Terminologia\n\nEfectos principales (i.e., main effects)\nEfectos de interacción (i.e., interaction term)"
  },
  {
    "objectID": "00_prev_mod.html#forma-de-las-interacciones",
    "href": "00_prev_mod.html#forma-de-las-interacciones",
    "title": "Interacción entre variables",
    "section": "Forma de las interacciones",
    "text": "Forma de las interacciones"
  },
  {
    "objectID": "00_prev_mod.html#introducción",
    "href": "00_prev_mod.html#introducción",
    "title": "Interacción entre variables",
    "section": "Introducción",
    "text": "Introducción"
  },
  {
    "objectID": "00_prev_mod.html#datos",
    "href": "00_prev_mod.html#datos",
    "title": "Interacción entre variables",
    "section": "Datos",
    "text": "Datos"
  },
  {
    "objectID": "00_prev_mod.html#preparar-datos",
    "href": "00_prev_mod.html#preparar-datos",
    "title": "Interacción entre variables",
    "section": "Preparar Datos",
    "text": "Preparar Datos"
  },
  {
    "objectID": "00_prev_mod.html#ajustar-modelo",
    "href": "00_prev_mod.html#ajustar-modelo",
    "title": "Interacción entre variables",
    "section": "Ajustar Modelo",
    "text": "Ajustar Modelo"
  },
  {
    "objectID": "00_prev_mod.html#tabla-de-resultados",
    "href": "00_prev_mod.html#tabla-de-resultados",
    "title": "Interacción entre variables",
    "section": "Tabla de resultados",
    "text": "Tabla de resultados"
  },
  {
    "objectID": "00_prev_mod.html#descripción-de-resultados",
    "href": "00_prev_mod.html#descripción-de-resultados",
    "title": "Interacción entre variables",
    "section": "Descripción de resultados",
    "text": "Descripción de resultados"
  },
  {
    "objectID": "00_prev_mod.html#interacciones-entre-dicotómicas",
    "href": "00_prev_mod.html#interacciones-entre-dicotómicas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre dicotómicas",
    "text": "Interacciones entre dicotómicas"
  },
  {
    "objectID": "00_prev_mod.html#interacciones-entre-dicotómicas-y-continuas",
    "href": "00_prev_mod.html#interacciones-entre-dicotómicas-y-continuas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre dicotómicas y continuas",
    "text": "Interacciones entre dicotómicas y continuas"
  },
  {
    "objectID": "00_prev_mod.html#interacciones-entre-continuas",
    "href": "00_prev_mod.html#interacciones-entre-continuas",
    "title": "Interacción entre variables",
    "section": "Interacciones entre continuas",
    "text": "Interacciones entre continuas"
  },
  {
    "objectID": "00_prev_mod.html#inferencia-en-interacciones",
    "href": "00_prev_mod.html#inferencia-en-interacciones",
    "title": "Interacción entre variables",
    "section": "Inferencia en interacciones",
    "text": "Inferencia en interacciones"
  },
  {
    "objectID": "00_prev_mod.html#poder-estadístico",
    "href": "00_prev_mod.html#poder-estadístico",
    "title": "Interacción entre variables",
    "section": "Poder estadístico",
    "text": "Poder estadístico"
  },
  {
    "objectID": "00_prev_mod.html#modelos-alternativos-para-evaluar-interacciones",
    "href": "00_prev_mod.html#modelos-alternativos-para-evaluar-interacciones",
    "title": "Interacción entre variables",
    "section": "Modelos alternativos para evaluar interacciones",
    "text": "Modelos alternativos para evaluar interacciones"
  },
  {
    "objectID": "00_prev_mod.html#interacciones-en-modelos-generalizados",
    "href": "00_prev_mod.html#interacciones-en-modelos-generalizados",
    "title": "Interacción entre variables",
    "section": "Interacciones en modelos generalizados",
    "text": "Interacciones en modelos generalizados"
  },
  {
    "objectID": "00_prev_mod.html#texto-sin-editar",
    "href": "00_prev_mod.html#texto-sin-editar",
    "title": "Interacción entre variables",
    "section": "Texto sin editar",
    "text": "Texto sin editar\nDiagrama Conceptual\nDiagrama de vías\nDescriptivamente, podemos calcular las medias de ambos grupos de estudiantes, y ademas, podríamos calcular la diferencia de medias entre ambos grupos, y con lo anterior tener una noción de si los estudiantes difieren en sus puntajes condicional a la escolaridad de sus padres.\nAhora, podemos abordar la misma inquietud empleando un modelo de regresión:\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\epsilon_{i}\\]\nDonde,\n\n\\(y_{i}\\) = puntaje total de cada estudiante \\(_{i}\\).\n\\(x_{i}\\) = escolaridad máxima de los padres de cada estudiante \\(_{i}\\).\n\nCon los resultados de un modelo de regresión como el anterior podemos obtener las medias esperadas de cada grupo:\n\nMedia de estudiantes con padres de escolaridad menor a terciaria\n\n\\(\\beta_{0} + \\beta_{1}(x_{i} = 0)\\)\n\nMedia de estudiantes con padres de escolaridad terciaria\n\n\\(\\beta_{0} + \\beta_{1}(x_{i} = 1)\\)\n¿Que pasaría sin incluimos una tercera variable? Si tuvieramos la información de una tercera variable, dado que estamos pensando el modelo de regresión como una forma de expresar medias condicionadas, es que entonces podriamos tener otra diferencia adicional entre grupos. Pensemos en una tercera covariable como la dependencia de la escuelas (e.g., Privadas y Públicas). Para efectos del ejemplo, pensemos que las escuelas privadas toman un valor uno, y las escuelas públicas toman un valor cero.\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\beta_{2}w_{i} + \\epsilon_{i}\\]\n\n\n\\(w_{i}\\) = tipo de escuela a la que asisten a los estudiantes \\(_{i}\\), donde 1 son escuelas privadas, y 0 son escuelas públicas.\n\nCon el modelo anterior, solo podemos representar (i.e., asumir) que las medias entre los grupos aumentan o disminuyen con respecto a al intercepto ( \\(\\beta_{0}\\) ), condicional a los valores de \\(x_{i}\\) (i.e. la escolaridad máxima de los padres) y condicional a los valores de \\(w_{i}\\) (i.e., la dependencia administrativa de la escuelas).\nPara poder representar que las medias anteriores son condicionales entre sí o que interactúan, necesitamos incluir un término adicional: el múltiplo de las variables \\(x_{i}\\) e \\(w_{i}\\), es decir \\(x_{i}*w_{i}\\). Este término nos permitirá obtener un coeficiente de regresión adicional, el cual nos permite saber si hay un “exceso” en las diferencias de medias que estamos obteniendo con los coeficientes anteriores. Este “exceso” puede ser positivo o negativo.\nSi incluimos a todos los términos, ahora contamos con un modelo de regresión, el cual incluye a un término de interacción para las variabels \\(x_{i}\\) e \\(w_{i}\\).\n\\[y_{i} = \\beta_{0} + \\beta_{1}x_{i} + \\beta_{2}w_{i} + \\beta_{3}(x_{i}*w_{i})+\\epsilon_{i}\\]\nLa inquietud general que uno busca responder con los modelos de regresión con interacciones consiste en evaluar si la relación entre dos variables es equivalente, cuando consideramos la información de una tercera variable."
  },
  {
    "objectID": "dev/edu4046_mlm.html",
    "href": "dev/edu4046_mlm.html",
    "title": "Modelos Multinivel",
    "section": "",
    "text": "#------------------------------------------------\n# power analysis function\n#------------------------------------------------\n\nget_power &lt;- function(n_size, d){\nlibrary(dplyr)\npower &lt;- pwr::pwr.t.test(n=n_size,d=d,sig.level=.05,alternative=\"two.sided\") %&gt;%\n         purrr::pluck('power')\n\ntable &lt;- data.frame(n = n_size, power = power, d = d)\n\nreturn(table)\n}\n\n\n#------------------------------------------------\n# generate data\n#------------------------------------------------\n\ntable_n &lt;- dplyr::bind_rows(\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .1), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .2), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .3), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .4), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .5), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .6), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .7), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .8), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = .9), .id = 'index'),\npurrr::map_df(as.list(seq(from = 10, to = 500, by = 1)),~ get_power(n_size = ., d = 1.00), .id = 'index')\n)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n#------------------------------------------------\n# display plot\n#------------------------------------------------\n\nlibrary(ggplot2)\nggplot(table_n, aes(d, power, group=n, colour=n)) + \ngeom_line() +\ngeom_hline(yintercept = .80, lintype = 'dashed', color = 'red') +\ntheme_minimal() +\ntheme(\nlegend.position = 'right',\n# legend.title = element_blank(),\ntext = element_text(size = 12, family = 'Avenir'),\npanel.background = element_blank(),\npanel.grid.minor.y = element_blank(),\npanel.grid.major.y = element_blank(),\npanel.grid.minor.x = element_blank(),\npanel.grid.major.x = element_blank(),\naxis.text.x =  element_text(colour = \"grey30\", size = 10),\naxis.text.y =  element_text(colour = \"grey30\", size = 10),\naxis.line = element_line(colour = \"black\")\n) +\nxlab('effect size') +\nylab('satistical power')\n\nWarning in geom_hline(yintercept = 0.8, lintype = \"dashed\", color = \"red\"):\nIgnoring unknown parameters: `lintype`"
  },
  {
    "objectID": "dev/edu4046_mlm.html#a-second-subtitle",
    "href": "dev/edu4046_mlm.html#a-second-subtitle",
    "title": "Modelos Multinivel",
    "section": "A second subtitle",
    "text": "A second subtitle\nAnd A third subtitle"
  },
  {
    "objectID": "logit_reg.html#anexo-2-likelihood-ratio-test",
    "href": "logit_reg.html#anexo-2-likelihood-ratio-test",
    "title": "Regresión logística en R",
    "section": "Anexo 2: Likelihood Ratio Test",
    "text": "Anexo 2: Likelihood Ratio Test\n\n# secuencia de modelos\n\n# modelo nulo\nm00 &lt;- glm(dropout ~ 1, data = data_nels, family = \"binomial\")\n\n# modelo nulo\nm01 &lt;- glm(dropout ~ 1 + poor, data = data_nels, family = \"binomial\")\n\n# Likelihood ratio test\nlmtest::lrtest(m00, m01)\n\nLikelihood ratio test\n\nModel 1: dropout ~ 1\nModel 2: dropout ~ 1 + poor\n  #Df LogLik Df Chisq          Pr(&gt;Chisq)    \n1   1  -4984                                 \n2   2  -4603  1   762 &lt;0.0000000000000002 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1"
  }
]